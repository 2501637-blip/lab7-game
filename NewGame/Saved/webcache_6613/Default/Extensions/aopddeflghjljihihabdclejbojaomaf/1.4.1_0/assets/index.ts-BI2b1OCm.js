(function(){"use strict";(function(e){try{if(typeof document<"u")if(window.location.href.includes("chrome-extension://")){const t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}else{const t="__wps-translate-entry-content-css__";window[t]||(window[t]=[]),window[t].push(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})('@charset "UTF-8";.continue-translate-dialog[data-v-96293be0]{position:fixed;z-index:2147483647;bottom:32px;width:348px;padding:24px;font-weight:400;background-color:#fff;color:#000;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 24px #00000014;-webkit-user-select:none;user-select:none}[dir=ltr] .continue-translate-dialog[data-v-96293be0]{right:32px}[dir=rtl] .continue-translate-dialog[data-v-96293be0]{left:32px}.continue-translate-dialog .dialog-header[data-v-96293be0]{display:flex;gap:12px;align-items:center;margin-bottom:16px}.continue-translate-dialog .dialog-header .header-logo[data-v-96293be0]{display:flex;flex:1;align-items:center;gap:12px}.continue-translate-dialog .dialog-header .header-logo .logo-icon[data-v-96293be0]{height:24px;width:24px;border-radius:6px}.continue-translate-dialog .dialog-header .header-logo .logo-name[data-v-96293be0]{font-weight:600;font-size:16px;line-height:24px}.continue-translate-dialog .dialog-content[data-v-96293be0]{margin-bottom:20px}.continue-translate-dialog .dialog-content .description[data-v-96293be0]{font-size:14px;line-height:20px;color:#000000e6;margin:0 0 16px}.continue-translate-dialog .dialog-content .duration-selector[data-v-96293be0]{display:flex;align-items:center;justify-content:space-between;gap:16px}.continue-translate-dialog .dialog-content .duration-selector .duration-label[data-v-96293be0]{font-size:14px;font-weight:500;line-height:20px;color:#000}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0]{flex:1;min-width:160px;-webkit-user-select:none;user-select:none}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input{border-radius:8px}[dir=ltr] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input{padding-left:12px}[dir=rtl] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input{padding-right:12px}[dir=ltr] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input .select-label{text-align:right}[dir=rtl] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input .select-label{text-align:left}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-options{height:fit-content;border-radius:8px}.continue-translate-dialog .dialog-footer .confirm-btn[data-v-96293be0]{height:48px;border-radius:12px;font-size:16px;font-weight:600}.hover-ball-onboarding-container[data-v-e0b307f8]{position:absolute;display:flex;flex-direction:column;bottom:-30px;border-radius:12px;background-color:#fff;width:300px;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;transition:none}.hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{position:absolute;top:8px}[dir=ltr] .hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{right:8px}[dir=rtl] .hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{left:8px}.hover-ball-onboarding-container .hover-ball-onboarding-image[data-v-e0b307f8]{height:180px;border-radius:12px 12px 0 0;background-repeat:no-repeat;background-position:center;background-size:contain}.hover-ball-onboarding-container .hover-ball-onboarding-content[data-v-e0b307f8]{margin:16px 20px}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-title[data-v-e0b307f8]{font-weight:500;font-size:16px;line-height:24px;text-align:center;color:#000000e6}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-desc[data-v-e0b307f8]{font-weight:400;font-size:14px;line-height:22px;text-align:center;color:#333333e6;margin-top:8px}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-button[data-v-e0b307f8]{margin-top:24px}.onetap-login-tip[data-v-2a3e1960]{position:relative;min-width:320px;background:#fff;border:1px solid rgb(224,224,224);border-radius:16px;padding:20px 24px 8px;font-weight:400;font-size:14px;cursor:auto;text-shadow:none;box-shadow:0 12px 32px #00000014}.title[data-v-2a3e1960]{line-height:20px;color:#000000e6}.description[data-v-2a3e1960]{display:flex;align-items:center;margin-bottom:16px;line-height:20px;gap:4px}.description-text[data-v-2a3e1960]{color:#0009}.brand-container[data-v-2a3e1960]{display:flex;align-items:center;gap:4px}.brand-icon[data-v-2a3e1960]{width:16px;height:16px}.brand-text[data-v-2a3e1960]{color:#000000e6}.login-button[data-v-2a3e1960]{display:flex;align-items:center;border-radius:8px;padding:12px;gap:8px;cursor:pointer;white-space:nowrap;color:#000000e6}.login-button[data-v-2a3e1960]:hover{background:#f7f7f7}.login-button[data-v-2a3e1960]:active,.login-button.active[data-v-2a3e1960]{background:#e0e0e0}.login-button .login-button-text[data-v-2a3e1960]{flex:1}.login-button .login-button-icon[data-v-2a3e1960]{width:24px;height:24px}.google-login[data-v-2a3e1960]{border:1px solid rgb(218,218,218);font-weight:600;margin-bottom:4px}[data-v-2a3e1960] .icon-button{width:24px;height:24px}.confirm-container[data-v-a3738775]{display:flex;position:relative;z-index:1;flex-direction:column;width:258px;border-radius:12px;border:1px solid rgb(224,224,224);background-color:#fff;box-shadow:0 12px 32px #00000014;cursor:default;-webkit-user-select:select;user-select:select;padding-top:8px;padding-bottom:16px}.confirm-container .confirm-header[data-v-a3738775]{display:flex;justify-content:space-between;align-items:center}[dir=ltr] .confirm-container .confirm-header[data-v-a3738775]{padding-left:24px;padding-right:8px}[dir=rtl] .confirm-container .confirm-header[data-v-a3738775]{padding-right:24px;padding-left:8px}.confirm-container .confirm-header .title[data-v-a3738775]{font-weight:500;font-size:12px;color:#000;opacity:.9}.confirm-container .confirm-content[data-v-a3738775]{display:flex;flex:1;flex-direction:column;gap:10;font-weight:400;font-size:12px;color:#333;margin-top:14px;margin-bottom:12px}[dir=ltr] .confirm-container .confirm-content[data-v-a3738775]{padding-left:24px;padding-right:16px}[dir=rtl] .confirm-container .confirm-content[data-v-a3738775]{padding-right:24px;padding-left:16px}.confirm-container .confirm-content[data-v-a3738775] .base-radio{flex-direction:column;align-items:start}.confirm-container .confirm-content[data-v-a3738775] .base-radio .radio-container .radio{width:12px;height:12px}.confirm-container .confirm-content[data-v-a3738775] .base-radio .radio-container .radio.checked:after{width:8px;height:8px;margin:1px}.confirm-container .confirm-content .settings-can-be-re-enable[data-v-a3738775]{font-size:12px;color:#0009;margin-top:16px}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]{cursor:pointer;-webkit-user-select:none;user-select:none;font-size:12px;font-weight:600;color:#2962ff}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]:hover{opacity:.8}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]:active,.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link.active[data-v-a3738775]{color:#1c4eda;opacity:1}.confirm-container .confirm-footer[data-v-a3738775]{display:flex;justify-content:flex-end}[dir=ltr] .confirm-container .confirm-footer[data-v-a3738775]{padding-right:16px}[dir=rtl] .confirm-container .confirm-footer[data-v-a3738775]{padding-left:16px}.confirm-container .confirm-footer .confirm-button[data-v-a3738775]{height:32px;border-radius:8px;font-size:12px;line-height:100%}.hover-ball-container[data-v-6a5bfcd4]{position:fixed;z-index:2147483647;width:36px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none}.hover-ball-container .gift-ball-container[data-v-6a5bfcd4]{display:flex;justify-content:center;align-items:center;cursor:pointer;width:36px;height:36px;background:#fff;border-radius:24px;margin-bottom:4px;border:1px solid rgba(151,151,151,.14);box-shadow:0 10px 16px #00000014}.hover-ball-container .gift-ball-container .gift-image[data-v-6a5bfcd4]{width:18px;height:18px;background-size:cover}.hover-ball-container .actionContainer[data-v-6a5bfcd4]{display:flex;height:38px;transition:none;rotate:-90deg;overflow:hidden;width:100%;align-items:center;flex-direction:column;padding:4px;background:#fff;border-top-left-radius:24px;border-top-right-radius:24px;border:1px solid;border-image-source:linear-gradient(266.36deg,rgba(224,224,224,.48) -8.57%,rgba(151,151,151,.14) 101.08%);box-shadow:0 10px 16px #00000014}.hover-ball-container .actionContainer .translateIcon[data-v-6a5bfcd4]{display:flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:24px 24px 4px 4px;opacity:.5;background:radial-gradient(50.36% 54.17% at 43.75% 45.83%,#448cff,#4574f6 35.33%,#0e4eff 86.17%)}.hover-ball-container .actionContainer .otherIcons[data-v-6a5bfcd4]{height:0px;transition:none;display:flex;gap:2px;flex-direction:column}.hover-ball-container .actionContainer .red-hot[data-v-6a5bfcd4]{position:absolute;top:2px;width:4px;height:4px;border-radius:50%;background:#ff6c52}.hover-ball-container.hover .actionContainer[data-v-6a5bfcd4]{rotate:0deg;height:156px;transition:height .1s ease;border-radius:24px;padding:3px 3px 7px}.hover-ball-container.hover .actionContainer .otherIcons[data-v-6a5bfcd4]{transition:height .1s ease,margin-top .2s ease;height:110px;margin-top:6px}.hover-ball-container.hover .translateIcon[data-v-6a5bfcd4]{opacity:1;background:radial-gradient(50.36% 54.17% at 43.75% 45.83%,#448cff,#4574f6 35.33%,#0e4eff 86.17%)}.hover-ball-container.hover .translateIcon[data-v-6a5bfcd4]:active{opacity:1;background:#1c4eda}.hover-ball-container .closeIcon[data-v-6a5bfcd4]{cursor:pointer;margin-top:6px;width:16px;height:16px}.hover-ball-container .successIcon[data-v-6a5bfcd4],.hover-ball-container .hover-ball-close-second-confirm[data-v-6a5bfcd4]{position:absolute}[dir=ltr] .hover-ball-container .hover-ball-close-second-confirm[data-v-6a5bfcd4]{right:calc(100% - 4px);transition:right .2s ease}[dir=rtl] .hover-ball-container .hover-ball-close-second-confirm[data-v-6a5bfcd4]{left:calc(100% - 4px);transition:left .2s ease}.hover-ball-container .login-tip-container[data-v-6a5bfcd4]{position:absolute;top:0}.message-tip[data-v-6a5bfcd4]{position:fixed;z-index:999}.hover-ball-tips[data-v-6a5bfcd4]{position:fixed;z-index:2147483647;color:#fff;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000;border:1px solid rgb(54,54,54);box-shadow:0 12px 32px #00000014}.translate-setting-container[data-v-06196b44]{display:inline-flex;position:absolute;z-index:1;flex-direction:column;border-radius:12px;border:1px solid rgb(224,224,224);background-color:#fff;box-shadow:0 12px 32px #00000014;cursor:default;width:fit-content;-webkit-user-select:none;user-select:none}.translate-setting-container .close-button[data-v-06196b44]{position:absolute;top:12px}[dir=ltr] .translate-setting-container .close-button[data-v-06196b44]{right:12px}[dir=rtl] .translate-setting-container .close-button[data-v-06196b44]{left:12px}.translate-setting-container .setting-content[data-v-06196b44]{display:flex;flex-direction:column;padding:16px 16px 12px;gap:16px;border-bottom:1px solid rgba(46,60,53,.1)}.translate-setting-container .setting-content .setting-section .setting-section-label[data-v-06196b44]{font-size:16px;color:#000000e6;font-weight:600;line-height:16px;margin-bottom:8px}.translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input{height:40px;width:220px;gap:6px}[dir=ltr] .translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input{padding-left:16px}[dir=rtl] .translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input{padding-right:16px}.translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input .select-label{color:#000;font-weight:400;font-size:14px}[dir=ltr] .translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input .service-icon{margin-right:0}[dir=rtl] .translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input .service-icon{margin-left:0}.translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input .select-text{color:#000;font-weight:400;font-size:14px}.translate-setting-container .setting-footer[data-v-06196b44]{display:flex;padding:12px 16px 16px}.translate-setting-container .setting-footer .more-setting-link[data-v-06196b44]{color:#2962ff;font-size:14px;font-weight:400;cursor:pointer;border-bottom:1px solid rgb(41,98,255)}.translate-setting-container .setting-footer .more-setting-link[data-v-06196b44]:hover{opacity:.8}.translate-setting-container .setting-footer .more-setting-link[data-v-06196b44]:active,.translate-setting-container .setting-footer .more-setting-link.active[data-v-06196b44]{color:#1c4eda;opacity:1}.toast-tip-wrapper[data-v-fa11d61e]{position:relative;border-radius:6px;filter:drop-shadow(0px 12px 32px rgba(13,13,13,.08))}.toast-tip-wrapper .toast-tip[data-v-fa11d61e]{position:relative;background:#353b39cc;border-radius:6px;font-size:12px;line-height:16px;display:flex;align-items:center;min-height:32px}[dir=ltr] .toast-tip-wrapper .toast-tip[data-v-fa11d61e]{padding:8px 34px 8px 12px}[dir=rtl] .toast-tip-wrapper .toast-tip[data-v-fa11d61e]{padding:8px 12px 8px 34px}.toast-tip-wrapper .toast-tip .tip-content[data-v-fa11d61e]{flex:1;color:#fff}[dir=ltr] .toast-tip-wrapper .toast-tip .tip-content[data-v-fa11d61e]{text-align:left}[dir=rtl] .toast-tip-wrapper .toast-tip .tip-content[data-v-fa11d61e]{text-align:right}.toast-tip-wrapper .toast-tip .icon-close[data-v-fa11d61e]{position:absolute;top:8px;cursor:pointer;color:#fff;flex-shrink:0}[dir=ltr] .toast-tip-wrapper .toast-tip .icon-close[data-v-fa11d61e]{right:12px}[dir=rtl] .toast-tip-wrapper .toast-tip .icon-close[data-v-fa11d61e]{left:12px}.toast-tip-wrapper .toast-tip .icon-close[data-v-fa11d61e] svg path{stroke:#ccc;fill:#ccc}.toast-tip-wrapper .toast-tip .arrow[data-v-fa11d61e]{position:absolute;width:0;height:0}.toast-tip-wrapper .toast-tip .arrow.arrow-bottom[data-v-fa11d61e]{bottom:-4px;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-top[data-v-fa11d61e]{top:-4px;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-fa11d61e]{border-top:4px solid transparent;border-bottom:4px solid transparent}[dir=ltr] .toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-fa11d61e]{right:-4px;border-left:4px solid rgba(53,59,57,.8)}[dir=rtl] .toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-fa11d61e]{left:-4px;border-right:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-fa11d61e]{border-top:4px solid transparent;border-bottom:4px solid transparent}[dir=ltr] .toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-fa11d61e]{left:-4px;border-right:4px solid rgba(53,59,57,.8)}[dir=rtl] .toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-fa11d61e]{right:-4px;border-left:4px solid rgba(53,59,57,.8)}.image-translate-ball-container[data-v-2e124271]{position:fixed;z-index:2147483647}.image-translate-icon-container[data-v-2e124271]{position:relative;display:grid;grid-template-columns:32px 0fr;z-index:2147483647;padding:2px;width:32px;height:32px;transition:width .2s ease,grid-template-columns .2s ease;border-radius:24px;background:#353842e6;white-space:nowrap}.image-translate-icon-container.hover[data-v-2e124271]{width:88px;grid-template-columns:32px 1fr}.image-translate-icon-container .translateIcon[data-v-2e124271]{position:relative;display:inline-flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:14px}.image-translate-icon-container .translateIcon[data-v-2e124271]:hover,.image-translate-icon-container .translateIcon.active[data-v-2e124271]{background:#0006}.image-translate-icon-container .translateIcon.translating[data-v-2e124271]{animation:rotate 1s linear infinite}.image-translate-icon-container .image-translate-status-icon[data-v-2e124271]{position:absolute;bottom:-6px}.image-translate-icon-container .otherIcons[data-v-2e124271]{display:inline-flex;min-width:0;overflow:hidden}.image-translate-icon-container .otherIcons .icon-button[data-v-2e124271]{background:none;border:none;width:28px;height:28px;border-radius:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0}.image-translate-icon-container .otherIcons .icon-button[data-v-2e124271]:hover,.image-translate-icon-container .otherIcons .icon-button.active[data-v-2e124271]{background:#0006}.image-translate-ball-popup-container[data-v-2e124271]{position:absolute;z-index:2147483647}.image-translate-ball-colorful-tips-container[data-v-2e124271]{position:absolute;bottom:38px}.image-translate-ball-toast-container[data-v-2e124271]{position:absolute;bottom:42px;white-space:normal;max-width:320px;width:max-content}.image-translate-ball-close-second-confirm[data-v-2e124271]{position:absolute;bottom:40px;pointer-events:all}[dir=ltr] .image-translate-ball-close-second-confirm[data-v-2e124271]{right:0}[dir=rtl] .image-translate-ball-close-second-confirm[data-v-2e124271]{left:0}.image-translate-ball-close-second-confirm .second-confirm-popup[data-v-2e124271]{background:#fff;border:1px solid #eee;border-radius:8px;padding:12px;box-shadow:0 12px 32px #35384214}.image-translate-ball-close-second-confirm .second-confirm-popup .title[data-v-2e124271]{font-size:14px;margin-bottom:8px}.image-translate-ball-close-second-confirm .second-confirm-popup .options[data-v-2e124271]{display:flex;gap:8px}.image-translate-ball-close-second-confirm .second-confirm-popup .options button[data-v-2e124271]{background:#f5f5f5;border:1px solid #ddd;border-radius:4px;padding:4px 8px;cursor:pointer}.free-trial-btn[data-v-8ec0e80b]{height:28px;border:none;padding:0;font-size:12px;font-weight:600;line-height:16px;display:flex;align-items:center;gap:6px}.free-trial-btn .free-trial-btn-text[data-v-8ec0e80b]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-text-fill-color:transparent;color:transparent;transform:translateY(-1px)}[dir=ltr] .free-trial-btn .free-trial-btn-text[data-v-8ec0e80b]{background:linear-gradient(90deg,#33c2ff,#2963ff)}[dir=rtl] .free-trial-btn .free-trial-btn-text[data-v-8ec0e80b]{background:linear-gradient(-90deg,#33c2ff,#2963ff)}[dir] .free-trial-btn .free-trial-btn-text[data-v-8ec0e80b]{background-clip:text;-webkit-background-clip:text}.free-trial-btn[data-v-8ec0e80b]:hover,.free-trial-btn[data-v-8ec0e80b]:active{background:transparent;border:none}.translate-window-footer-explain[data-v-c39678ae]{display:flex;gap:4px;border-radius:4px;align-items:center;-webkit-user-select:none;user-select:none;cursor:pointer;padding:4px;justify-content:center;line-height:0;height:30px}.translate-window-footer-explain span[data-v-c39678ae]{font-size:12px;color:#333}.translate-window-footer-explain[data-v-c39678ae]:hover{background:#f0f0f0}.translate-window-footer-explain.active span[data-v-c39678ae],.translate-window-footer-explain:active span[data-v-c39678ae]{color:#2962ff}.translate-window-footer-explain[data-v-c39678ae]:focus{background:#e0e0e0}.translate-window-footer-explain.disable[data-v-c39678ae]{cursor:not-allowed;opacity:.6}.translate-window-footer-explain.disable[data-v-c39678ae]:hover{background:none}.translate-window-footer-explain.disable[data-v-c39678ae]:active,.translate-window-footer-explain.disable[data-v-c39678ae]:focus{background:none}.translate-window-footer-action-wrapper[data-v-4c60f9ac]{display:flex;gap:5px;justify-content:flex-start;align-items:center;padding:10px;border-top:1px solid rgb(236,236,236)}.translate-window-footer-action-wrapper .translate-window-footer-action-item[data-v-4c60f9ac]{flex-shrink:0}.translate-window-footer-action-wrapper .empty-area[data-v-4c60f9ac]{flex:1}.translate-window-footer-action-wrapper .free-trial-btn[data-v-4c60f9ac]{flex-shrink:1}.translate-window-header[data-v-35c0f386]{position:relative;display:flex;align-items:center;justify-content:space-between;height:56px;border-bottom:1px solid rgb(236,236,236);font-size:12px;color:#333}[dir=ltr] .translate-window-header[data-v-35c0f386]{padding-left:16px;padding-right:12px}[dir=rtl] .translate-window-header[data-v-35c0f386]{padding-right:16px;padding-left:12px}.translate-window-header .header-left[data-v-35c0f386]{display:flex;flex:1;gap:12px}.translate-window-header .header-left[data-v-35c0f386] .select-input{height:32px}[dir=ltr] .translate-window-header .header-left[data-v-35c0f386] .select-input{padding-left:4px;padding-right:10px}[dir=rtl] .translate-window-header .header-left[data-v-35c0f386] .select-input{padding-right:4px;padding-left:10px}.translate-window-header .header-left[data-v-35c0f386] .select-input .select-text{font-size:12px;color:#000;font-weight:400}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-input{border:none;gap:4px;background-color:transparent;padding-inline:0}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-input.active{border:none}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-input .select-label{display:flex;gap:4px;align-items:center;font-weight:600;font-size:14px;color:#000000e6}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column{height:auto;padding-inline:0;border-radius:12px}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column .option-list .option{height:36px;width:192px;padding-inline-start:0;border-radius:0}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column .option-list .option .function-icon{margin-inline:16px 4px}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column .option-list .option .function-label{flex:1;font-size:14px}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column .option-list .option .selected-icon{justify-content:flex-end;margin-inline-end:10px}.translate-window-header .header-left .empty-area[data-v-35c0f386]{flex:1}.translate-window-header .header-left .language-select[data-v-35c0f386]{cursor:default;width:auto;min-width:120px}.translate-window-header .header-left .language-select[data-v-35c0f386] .select-input{gap:8px;border:none}.translate-window-header .header-left .model-select[data-v-35c0f386]{cursor:default;width:52px}.translate-window-header .header-left .model-select[data-v-35c0f386] .select-input{border:none}[dir=ltr] .translate-window-header .header-left .model-select[data-v-35c0f386] .select-input .select-icon.service-icon{margin-right:8px}[dir=rtl] .translate-window-header .header-left .model-select[data-v-35c0f386] .select-input .select-icon.service-icon{margin-left:8px}.translate-window-header .header-right[data-v-35c0f386]{display:flex;align-items:center;cursor:default}.translate-window-header .header-right .window-action[data-v-35c0f386]{display:flex;gap:8px;-webkit-user-select:none;user-select:none}[dir=ltr] .translate-window-header .header-right .window-action[data-v-35c0f386]{margin-left:12px}[dir=rtl] .translate-window-header .header-right .window-action[data-v-35c0f386]{margin-right:12px}.translate-window-header .header-right .window-action .window-action-more-list-container[data-v-35c0f386]{z-index:10;display:flex;flex-direction:column;position:absolute;top:100%}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-content[data-v-35c0f386]{margin-top:4px;padding:12px;background:#fff;border:1px solid rgb(224,224,224);border-radius:12px}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]{cursor:pointer;padding:6px;font-size:14px;border-radius:6px;display:flex;gap:8px;align-items:center}[dir=ltr] .translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]{padding-right:24px}[dir=rtl] .translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]{padding-left:24px}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]:hover{background:#f0f0f0}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]:active,.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]:focus{background:#e0e0e0}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item .window-action-more-list-item-content[data-v-35c0f386]{white-space:nowrap}.translate-window-header .header-right .window-action .window-action-icon[data-v-35c0f386]{cursor:pointer;width:24px;height:24px;display:flex;padding:4px;border-radius:4px}.translate-window-header .header-right .window-action .window-action-icon[data-v-35c0f386]:hover{background:#f0f0f0}.translate-window-header .header-right .window-action .window-action-icon[data-v-35c0f386]:active,.translate-window-header .header-right .window-action .window-action-icon[data-v-35c0f386]:focus{background:#e0e0e0}.translate-window-header .select-text-close-second-confirm[data-v-35c0f386]{position:absolute;top:calc(100% - 2px)}[dir=rtl] .to-homepage-icon[data-v-35c0f386]{rotate:270deg}.explain-not-support-container[data-v-1d16d2d2]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding-block:24px}.explain-not-support-container .explain-not-support-text[data-v-1d16d2d2]{line-height:16px;font-size:12px;text-align:center;color:#333}.explain-not-support-container .explain-not-support-switch[data-v-1d16d2d2]{display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;gap:4px}.explain-not-support-container .explain-not-support-switch span[data-v-1d16d2d2]{font-size:12px;color:#2962ff}.translate-window-bottom-loading[data-v-787900e9]{display:flex;align-items:center;justify-content:center}.translate-window-bottom-loading .translate-loading-icon[data-v-787900e9]{animation:rotate 1s linear infinite}.translate-window-result-footer[data-v-6e0e4445]{height:24px;display:flex;gap:24px;padding:0 16px;margin-block:4px 12px;align-items:center;justify-content:space-between;position:relative;overflow:visible}.translate-window-result-footer.weakened-and-narrower[data-v-6e0e4445]{margin-top:0}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445]{margin-inline-start:-6px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input{border:none;border-radius:0;padding-inline-end:0;background-color:transparent;height:28px;gap:4px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input .select-arrow{display:flex;align-items:center;justify-content:center;margin-inline-end:4px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input.active,.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input:active{background-color:#f0f0f0;border-radius:8px}[dir=ltr] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input.active .select-arrow,[dir=ltr] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input:active .select-arrow{transform:rotate(180deg)}[dir=rtl] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input.active .select-arrow,[dir=rtl] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input:active .select-arrow{transform:rotate(-180deg)}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input:hover{background-color:#f0f0f0;border-radius:8px}.translate-window-result-footer .empty-area[data-v-6e0e4445]{flex:1}.translate-window-result-footer .translate-result-footer-icons[data-v-6e0e4445]{display:flex;gap:8px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-container[data-v-6e0e4445]{position:relative;overflow:visible}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]{display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none;gap:4px;padding:4px;height:24px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]:hover{background:#f0f0f0;border-radius:4px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper.active[data-v-6e0e4445],.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]:active,.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]:focus{background:#e0e0e0}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]:not(.show-label){width:24px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-tip[data-v-6e0e4445]{font-size:12px;font-weight:400;color:#000000e6}.translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-6e0e4445]{position:absolute;top:2px;width:4px;height:4px;border-radius:50%;background:#ff6c52}[dir=ltr] .translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-6e0e4445]{left:20px}[dir=rtl] .translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-6e0e4445]{right:20px}.translate-window-result-footer .translate-result-hover-tip[data-v-6e0e4445]{position:fixed;height:32px;padding:8px 12px;border-radius:6px;background:#353b39cc;color:#fff;font-size:12px;font-weight:400;white-space:nowrap;pointer-events:none;z-index:1000}.translate-window-result-footer .translate-result-hover-tip.with-icon[data-v-6e0e4445]{display:flex;align-items:center;justify-content:center;gap:4px}.translate-window-result-footer .translate-result-hover-tip .tip-icon[data-v-6e0e4445]{flex-shrink:0}.translate-window-result-footer .translate-result-hover-tip .tip-text[data-v-6e0e4445]{line-height:15px;height:15px}.translate-window-result-footer .translate-result-hover-tip[data-v-6e0e4445]:after{content:"";position:absolute;bottom:-4px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:4px solid rgba(0,0,0,.75)}[dir=ltr] .translate-window-result-footer .translate-result-hover-tip[data-v-6e0e4445]:after{left:50%;transform:translate(-50%)}[dir=rtl] .translate-window-result-footer .translate-result-hover-tip[data-v-6e0e4445]:after{right:50%;transform:translate(50%)}.slow-fade-in-enter-active[data-v-6e0e4445],.slow-fade-in-leave-active[data-v-6e0e4445]{transition:opacity .15s ease}.slow-fade-in-enter-from[data-v-6e0e4445],.slow-fade-in-leave-to[data-v-6e0e4445]{opacity:0}.translate-window-result-container[data-v-591e2f14]{padding:12px 16px;font-size:14px;font-weight:400;color:#000000e6;overflow-y:overlay;line-height:1.75}.translate-window-result-container.translate-error[data-v-591e2f14]{display:flex;justify-content:center}.translate-window-result-container.fixed-min-height[data-v-591e2f14]{min-height:77px}.translate-window-result-container .translate-window-result-error-container[data-v-591e2f14]{display:flex;flex-direction:column;justify-content:center;align-items:center}.translate-window-result-container .translate-window-result-error[data-v-591e2f14]{align-items:center;font-size:14px;line-height:1.75;gap:4px;font-weight:400;max-width:293px;text-align:center;color:#000000e6}.translate-window-result-container .translate-window-result-error .translate-result-error-retry[data-v-591e2f14]{display:flex;align-items:center;word-break:keep-all;gap:2px;color:#2962ff;cursor:pointer;-webkit-user-select:none;user-select:none}.translate-window-result-container .upgrade-now-wrapper[data-v-591e2f14]{display:flex;justify-content:center;margin-top:16px}.translate-window-result-container .upgrade-now-wrapper .upgrade-now-btn[data-v-591e2f14]{background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff);border-radius:8px;padding:12px 16px;color:#fff;font-size:14px;line-height:16px;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none}.translate-window-result-container .translate-window-result-text-wrapper[data-v-591e2f14]{display:flex;flex-direction:row}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .translate-window-result-text[data-v-591e2f14]{flex:1;font-size:14px;line-height:1.75;color:#0009;white-space:pre-line}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .translate-window-result-text.collapsed-in-two-lines[data-v-591e2f14]{color:#0006;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .collapse-bottom-icon[data-v-591e2f14]{cursor:pointer}.explain-disable-tips[data-v-591e2f14]{position:absolute;bottom:-50px;font-size:12px;padding:12px;line-height:16px;color:#333;background:#fff;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;border-radius:8px}[dir=ltr] .explain-disable-tips[data-v-591e2f14]{left:36px}[dir=rtl] .explain-disable-tips[data-v-591e2f14]{right:36px}.translate-window-up-bottom-result-wrapper[data-v-b30cd8d1]{display:flex;flex-direction:column;min-height:0;flex:1}.translate-window-up-bottom-result-wrapper>.translate-window-result-footer[data-v-b30cd8d1]{flex-shrink:0}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]{flex:1;overflow-y:auto;min-height:0}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]::-webkit-scrollbar{width:6px}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]::-webkit-scrollbar-thumb:hover{background-color:#0000004d}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]::-webkit-scrollbar-track{background-color:transparent}.translate-window-bottom-result-wrapper[data-v-b30cd8d1]{position:relative}.translate-window-bottom-result-wrapper[data-v-b30cd8d1]:before{content:"";position:absolute;top:0;left:16px;right:16px;height:1px;background-color:#0d0d0d1f}.bottom-sentinel[data-v-b30cd8d1]{height:1px;width:100%;pointer-events:none}.translate-window-container[data-v-b2b705f8]{position:fixed;display:flex;z-index:2147483647;border-radius:12px;width:552px;max-height:calc(100vh - 16px);background-color:#fff;border:1px solid rgba(13,13,13,.12);box-shadow:0 12px 32px #0d0d0d14;font-size:16px}.translate-window-container .translate-window-drag-zone[data-v-b2b705f8]{background:#f7f7f7;width:12px;display:flex;align-items:center;justify-content:center;cursor:move}[dir=ltr] .translate-window-container .translate-window-drag-zone[data-v-b2b705f8]{border-top-left-radius:12px;border-bottom-left-radius:12px}[dir=rtl] .translate-window-container .translate-window-drag-zone[data-v-b2b705f8]{border-top-right-radius:12px;border-bottom-right-radius:12px}.translate-window-container .translate-window-content-zone[data-v-b2b705f8]{flex:1;width:calc(100% - 12px);display:flex;flex-direction:column;word-break:normal;overflow-wrap:break-word;min-height:0}.translate-window-container .translate-window-header-wrapper[data-v-b2b705f8]{flex-shrink:0}.input-translate-ball-container[data-v-29c9e78e]{position:fixed;z-index:2147483647;pointer-events:none}.input-translate-ball-container.vertical .input-translate-ball-content[data-v-29c9e78e]{top:0;bottom:auto;height:60px;width:34px;transition:height .2s ease}.input-translate-ball-container.vertical .input-translate-ball-content .otherIcons[data-v-29c9e78e]{display:flex;flex-direction:column;margin-inline-end:0}.input-translate-ball-container.vertical .input-translate-ball-content.hover[data-v-29c9e78e]{width:32px;height:112px}.input-translate-ball-container .input-translate-ball-content[data-v-29c9e78e]{bottom:0}[dir=ltr] .input-translate-ball-container .input-translate-ball-content[data-v-29c9e78e]{right:0}[dir=rtl] .input-translate-ball-container .input-translate-ball-content[data-v-29c9e78e]{left:0}.input-translate-ball-container .input-translate-ball-content[data-v-29c9e78e]{position:absolute;bottom:0;pointer-events:all;overflow:hidden;padding:2px;width:60px;height:34px;transition:width .2s ease;border-radius:24px;background:#fff;border:1px solid rgba(46,50,60,.1);box-shadow:0 10px 16px #00000014;white-space:nowrap}.input-translate-ball-container .input-translate-ball-content.ball-content-small[data-v-29c9e78e]{border:none;box-shadow:none;background:transparent}.input-translate-ball-container .input-translate-ball-content.translating[data-v-29c9e78e]{width:32px}.input-translate-ball-container .input-translate-ball-content .input-translate-ball-small-icon[data-v-29c9e78e]{width:10px;height:10px;background:#353842;border:1px solid rgb(255,255,255);position:absolute;top:11px;border-radius:50%}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-29c9e78e]{position:relative;display:inline-flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:14px;background:#353842}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-29c9e78e]:hover{background:#353842}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-29c9e78e]:active{opacity:1;background:#212329}.input-translate-ball-container .input-translate-ball-content .translateIcon.translating[data-v-29c9e78e]{display:flex}.input-translate-ball-container .input-translate-ball-content .translateIcon .translate-loading-icon[data-v-29c9e78e]{animation:rotate 1s linear infinite;display:inline-flex;align-items:center;justify-content:center;line-height:0;overflow:hidden}.input-translate-ball-container .input-translate-ball-content .translateIcon .translate-loading-icon[data-v-29c9e78e] .svg{width:100%;height:100%;display:block}.input-translate-ball-container .input-translate-ball-content .otherIcons[data-v-29c9e78e]{display:inline-flex;transition:opacity .2s ease}.input-translate-ball-container .input-translate-ball-content .otherIcons[data-v-29c9e78e] .icon-button{padding:3px;border-radius:14px}.input-translate-ball-container .input-translate-ball-content .otherIcons .always-close-icon-button[data-v-29c9e78e] .icon-button .svg-icon{transform:translateY(1px)}.input-translate-ball-container .input-translate-ball-content.hover[data-v-29c9e78e]{width:146px}.input-translate-ball-container .input-translate-ball-popup-container[data-v-29c9e78e]{pointer-events:all}.input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-29c9e78e]{position:absolute}[dir=ltr] .input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-29c9e78e]{right:0}[dir=rtl] .input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-29c9e78e]{left:0}.input-translate-ball-tips[data-v-29c9e78e]{position:absolute;z-index:2147483647;-webkit-user-select:none;user-select:none;color:#fff;bottom:40px;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000;border:1px solid rgb(54,54,54);box-shadow:0 12px 32px #00000014}.input-translate-ball-tips.model-tip-label[data-v-29c9e78e]{display:flex}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content[data-v-29c9e78e]{display:flex;align-items:center;padding-inline-end:4px}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content .input-translate-ball-tips-icon-wrapper[data-v-29c9e78e]{display:inline-block;padding-inline:4px;height:16px}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content .input-translate-ball-tips-icon-wrapper .input-translate-ball-tips-icon[data-v-29c9e78e]{display:block;width:16px;height:16px}.input-translate-ball-tips.error-tips[data-v-29c9e78e]{bottom:40px}.pdf-banner-container[data-v-c3f257c8]{position:absolute;z-index:2147483647;top:0;left:0;right:0;height:50px;padding-left:60px;padding-right:60px;font-size:16px;display:flex;gap:8px;justify-content:center;align-items:center;background-color:#fff;color:#000000e6;line-height:1.5}.pdf-banner-container .pdf-banner-desc[data-v-c3f257c8]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pdf-banner-container .pdf-translate-button[data-v-c3f257c8]{height:32px;border-radius:18px;font-size:14px;font-weight:600;overflow:unset;text-overflow:unset}[dir=ltr] .pdf-banner-container .pdf-translate-button[data-v-c3f257c8]{margin-left:24px}[dir=rtl] .pdf-banner-container .pdf-translate-button[data-v-c3f257c8]{margin-right:24px}.pdf-banner-container .pdf-translate-close[data-v-c3f257c8]{position:absolute;width:60px;display:flex;justify-content:center;align-items:center}[dir=ltr] .pdf-banner-container .pdf-translate-close[data-v-c3f257c8]{right:0}[dir=rtl] .pdf-banner-container .pdf-translate-close[data-v-c3f257c8]{left:0}.pdf-only-translate-button-container[data-v-c3f257c8]{position:absolute;z-index:2147483647;top:12px;justify-content:end}[dir=ltr] .pdf-only-translate-button-container[data-v-c3f257c8]{right:136px}[dir=rtl] .pdf-only-translate-button-container[data-v-c3f257c8]{left:136px}.plugin-comment-guid-container[data-v-fef91c63]{position:fixed;z-index:2147483647;bottom:32px;padding:24px;font-weight:400;background-color:#fff;color:#000;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 24px #00000014}[dir=ltr] .plugin-comment-guid-container[data-v-fef91c63]{right:32px}[dir=rtl] .plugin-comment-guid-container[data-v-fef91c63]{left:32px}.plugin-comment-guid-container .plugin-comment-guid-header[data-v-fef91c63]{display:flex;gap:12px;align-items:center;margin-bottom:24px}.plugin-comment-guid-container .plugin-comment-guid-header .plugin-comment-guid-header-logo[data-v-fef91c63]{display:flex;flex:1;align-items:center;gap:12px}.plugin-comment-guid-container .plugin-comment-guid-header .plugin-comment-guid-header-logo .plugin-comment-logo-name[data-v-fef91c63]{font-weight:600;font-size:16px}.plugin-comment-guid-container .plugin-comment-five-star[data-v-fef91c63]{display:flex;flex-direction:column;align-items:center;margin-bottom:8px}.plugin-comment-guid-container .plugin-comment-dec-container[data-v-fef91c63]{display:flex;justify-content:center}.plugin-comment-guid-container .plugin-comment-dec-container .plugin-comment-dec[data-v-fef91c63]{max-width:300px;text-align:center;font-size:14px;line-height:1.5}.plugin-comment-guid-container .plugin-comment-btn-container[data-v-fef91c63]{display:flex;justify-content:center}.plugin-comment-guid-container .plugin-comment-btn-container .plugin-comment-btn[data-v-fef91c63]{width:284px;height:48px;border-radius:12px;margin:32px 8px 8px}.dialog-mask[data-v-eca39056]{position:fixed;top:0;width:100%;height:100%;background:#0009;z-index:2147483646}[dir=ltr] .dialog-mask[data-v-eca39056]{left:0}[dir=rtl] .dialog-mask[data-v-eca39056]{right:0}.confirm-dialog[data-v-eca39056]{position:fixed;top:50%;padding:16px 24px 24px;background:#fff;border-radius:16px;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;overflow:hidden;display:flex;flex-direction:column;z-index:2147483647}[dir=ltr] .confirm-dialog[data-v-eca39056]{left:50%;transform:translate(-50%,-50%)}[dir=rtl] .confirm-dialog[data-v-eca39056]{right:50%;transform:translate(50%,-50%)}.dialog-header[data-v-eca39056]{display:flex;align-items:center;justify-content:space-between}.dialog-header .dialog-title[data-v-eca39056]{font-size:14px;font-weight:700;color:#000000e6}.dialog-content[data-v-eca39056]{flex:1;margin-top:12px}.dialog-content .dialog-body[data-v-eca39056]{margin-bottom:24px}.dialog-content .dialog-body p[data-v-eca39056]{margin:0;line-height:1.5;color:#0d0d0de6;font-size:14px}.dialog-content .dialog-actions[data-v-eca39056]{display:flex;justify-content:flex-end;gap:12px}.dialog-content .dialog-actions .btn-cancel[data-v-eca39056]{background:#0d0d0d1a;border-radius:8px;padding:8px 12px;color:#0d0d0de6;font-size:12px;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s}.dialog-content .dialog-actions .btn-cancel[data-v-eca39056]:hover{background:#0d0d0d26}.dialog-content .dialog-actions .colorful-confirm-btn[data-v-eca39056]{background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff);color:#fff;font-size:12px;font-weight:600}.dialog-content .dialog-actions .colorful-confirm-btn[data-v-eca39056]:hover{opacity:.9}.upgrade-dialog-overlay[data-v-73213492]{position:fixed;top:0;left:0;right:0;bottom:0;background:transparent;display:flex;align-items:flex-start;justify-content:flex-start;z-index:2147483647;overflow:auto;padding:20px}.upgrade-dialog-overlay.with-mask[data-v-73213492]{background:#0009}.upgrade-dialog[data-v-73213492]{position:relative;height:480px;background:#fff;border-radius:24px;box-shadow:0 12px 32px #00000014;margin:auto}.dialog-close[data-v-73213492]{width:16px;height:16px;position:absolute;cursor:pointer;background-repeat:no-repeat;background-position:center;background-size:contain}[dir=ltr] .dialog-close[data-v-73213492]{right:-20px}[dir=rtl] .dialog-close[data-v-73213492]{left:-20px}.dialog-content[data-v-73213492]{display:flex;height:100%}.content-left[data-v-73213492]{width:456px;padding:48px;display:flex;flex-direction:column;justify-content:center}.dialog-title[data-v-73213492]{font-size:20px;font-weight:600;margin-bottom:24px;color:#000}.features-list[data-v-73213492]{display:flex;flex-direction:column;gap:12px;margin-bottom:60px}.feature-item[data-v-73213492]{display:flex;align-items:center;gap:8px}.check-icon[data-v-73213492]{color:#2962ff;flex-shrink:0}.feature-text[data-v-73213492]{font-size:14px;font-weight:500;line-height:1.5;color:#000}.feature-text.highlight[data-v-73213492]{color:#2962ff}.upgrade-button[data-v-73213492]{font-weight:500;font-size:16px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;cursor:pointer;color:#fff;background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff)}.content-right[data-v-73213492]{display:flex;align-items:center;justify-content:center}.upgrade-image[data-v-73213492]{width:480px;height:100%;background-repeat:no-repeat;background-position:center;background-size:contain}.word-translate-bubble[data-v-86790c53]{position:absolute;display:flex;align-items:center;justify-content:center;border-radius:4px;gap:2px;height:28px;padding-right:6px;padding-left:6px;background:#f7f7f7;z-index:2147483647;border:.5px solid rgb(207,207,207);box-shadow:0 6px 12px #00000014;color:#333;font-size:14px;-webkit-user-select:none;user-select:none;cursor:pointer}.word-translate-bubble .translate-text-sharp-angle[data-v-86790c53]{position:absolute;width:4px;height:4px;background:#f7f7f7;border:.5px solid rgb(207,207,207);box-shadow:0 6px 12px #00000014}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle[data-v-86790c53]{transform:rotate(45deg)}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle[data-v-86790c53]{transform:rotate(-45deg)}.word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-86790c53]{top:-2px;inset-inline-start:10px;border-bottom:none!important}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-86790c53]{border-right:none!important}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-86790c53]{border-left:none!important}.word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-86790c53]{bottom:-2px;border-top:none!important;inset-inline-end:10px}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-86790c53]{border-left:none!important}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-86790c53]{border-right:none!important}.word-translate-bubble.black-theme[data-v-86790c53]{background:#000;color:#fff;border:.5px solid rgb(54,54,54)}.word-translate-bubble.black-theme .translate-text-sharp-angle[data-v-86790c53]{background:#000;border:.5px solid rgb(54,54,54)}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-86790c53]{inset-inline-end:10px;inset-inline-start:unset}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-86790c53]{inset-inline-start:10px;inset-inline-end:unset}.mail-setting-container[data-v-1f5937b9]{position:relative}.mail-setting-btn[data-v-1f5937b9]{height:40px;width:50px;display:flex;align-items:center;justify-content:center}.mail-welcome-banner[data-v-1f5937b9]{position:absolute;top:100%;min-width:360px;background-color:#fff;border:1px solid rgb(224,224,224);border-radius:16px;z-index:2147483647;box-shadow:0 12px 32px #00000014}.banner-content[data-v-1f5937b9]{padding:20px}.header-section[data-v-1f5937b9]{position:relative;display:flex;margin-bottom:16px}.title[data-v-1f5937b9]{flex:1;font-size:14px;font-weight:600;line-height:24px;color:#000000e6}[dir=ltr] .title[data-v-1f5937b9]{margin-left:6px}[dir=rtl] .title[data-v-1f5937b9]{margin-right:6px}[dir=ltr] .close-button[data-v-1f5937b9]{margin-left:4px}[dir=rtl] .close-button[data-v-1f5937b9]{margin-right:4px}.feature-item[data-v-1f5937b9]{display:flex;align-items:center;margin-bottom:10px;gap:6px}.feature-item[data-v-1f5937b9]:last-child{margin-bottom:0}.feature-text[data-v-1f5937b9]{flex:1;font-size:14px;font-weight:400;color:#0009}.separator[data-v-1f5937b9]{width:100%;height:1px;background-color:#0000001a}.bottom-section[data-v-1f5937b9]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px}.enable-text[data-v-1f5937b9]{font-size:14px;font-weight:400;color:#000000e6}.mail-setting-btn-red-hot[data-v-1f5937b9]{position:absolute;top:8px;width:4px;height:4px;border-radius:50%;background:#ff6c52}[dir=ltr] .mail-setting-btn-red-hot[data-v-1f5937b9]{right:8px}[dir=rtl] .mail-setting-btn-red-hot[data-v-1f5937b9]{left:8px}[data-v-b02d00f3] .base-select .select-options .option-list .option{min-width:260px}.mail-translate-banner-container[data-v-b02d00f3]{position:relative;font-size:14px;font-weight:400;-webkit-user-select:none;user-select:none;padding-bottom:10px}.translate-btn[data-v-b02d00f3]{width:fit-content;display:inline-flex;vertical-align:middle;margin-top:4px;min-width:220px;position:relative;align-items:center;height:40px;cursor:pointer}[dir=ltr] .translate-btn[data-v-b02d00f3]{text-align:left;margin-right:8px}[dir=rtl] .translate-btn[data-v-b02d00f3]{text-align:right;margin-left:8px}.translate-btn .logo-container[data-v-b02d00f3]{flex:1;display:flex;height:100%;gap:8px;align-items:center;justify-content:center;border:1px solid rgb(224,224,224)}[dir=ltr] .translate-btn .logo-container[data-v-b02d00f3]{padding-left:8px;padding-right:16px;border-top-left-radius:48px;border-bottom-left-radius:48px}[dir=rtl] .translate-btn .logo-container[data-v-b02d00f3]{padding-right:8px;padding-left:16px;border-top-right-radius:48px;border-bottom-right-radius:48px}.translate-btn .logo-container .logo[data-v-b02d00f3]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background-color:#2962ff;border-radius:50%}.translate-btn .logo-container .text-content[data-v-b02d00f3]{flex:1;font-weight:600;color:#2962ff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.translate-btn .logo-container[data-v-b02d00f3]:hover{background-color:#f0f0f0}.translate-btn .logo-container[data-v-b02d00f3]:active,.translate-btn .logo-container.active[data-v-b02d00f3]{background-color:#e0e0e0}.translate-btn .setting-container[data-v-b02d00f3]{display:flex;width:44px;height:100%;align-items:center;justify-content:center;border:1px solid rgb(224,224,224)}[dir=ltr] .translate-btn .setting-container[data-v-b02d00f3]{border-left:none;border-top-right-radius:48px;border-bottom-right-radius:48px}[dir=rtl] .translate-btn .setting-container[data-v-b02d00f3]{border-right:none;border-top-left-radius:48px;border-bottom-left-radius:48px}.translate-btn .setting-container[data-v-b02d00f3]:hover{background-color:#f0f0f0}.translate-btn .setting-container[data-v-b02d00f3]:active,.translate-btn .setting-container.active[data-v-b02d00f3]{background-color:#e0e0e0}.translate-btn .translate-setting-container[data-v-b02d00f3]{position:absolute;top:calc(100% + 8px);z-index:1}[dir=ltr] .translate-btn .translate-setting-container[data-v-b02d00f3]{right:0}[dir=rtl] .translate-btn .translate-setting-container[data-v-b02d00f3]{left:0}.translate-btn .exceed-limit-tip[data-v-b02d00f3]{position:absolute;z-index:1;width:270px;top:calc(100% + 8px)}[dir=ltr] .translate-btn .exceed-limit-tip[data-v-b02d00f3]{right:50%;transform:translate(50%)}[dir=rtl] .translate-btn .exceed-limit-tip[data-v-b02d00f3]{left:50%;transform:translate(-50%)}.send-email-btn[data-v-b02d00f3]{display:inline-flex;vertical-align:middle;width:fit-content;gap:4px;height:40px;margin-top:4px;padding:0 16px;cursor:pointer;align-items:center;border:1px solid rgb(224,224,224);border-radius:48px}[dir=ltr] .send-email-btn[data-v-b02d00f3]{text-align:left;margin-right:8px}[dir=rtl] .send-email-btn[data-v-b02d00f3]{text-align:right;margin-left:8px}.send-email-btn[data-v-b02d00f3]:hover{background-color:#f0f0f0}.send-email-btn[data-v-b02d00f3]:active,.send-email-btn.active[data-v-b02d00f3]{background-color:#e0e0e0}.send-email-btn .send-mail-icon[data-v-b02d00f3]{opacity:.9}.send-email-btn .send-text-content[data-v-b02d00f3]{color:#000;opacity:.9;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-disabled[data-v-b02d00f3]{opacity:.5;cursor:not-allowed}.btn-disabled[data-v-b02d00f3]:hover,.btn-disabled[data-v-b02d00f3]:active,.btn-disabled.active[data-v-b02d00f3]{background-color:transparent!important}@media (max-width: 730px){.mail-translate-banner-container[data-v-b02d00f3]{display:flex;flex-direction:column}}.caption-window-container[data-v-d1944dd0]{position:absolute;width:100%;top:0;pointer-events:none;z-index:10;font-size:16px;color:#ffffffe6;font-weight:400;line-height:150%;transition:bottom .1s ease-in-out}[dir=ltr] .caption-window-container[data-v-d1944dd0]{left:0}[dir=rtl] .caption-window-container[data-v-d1944dd0]{right:0}.caption-window-content[data-v-d1944dd0]{position:absolute;left:40px;right:40px;bottom:5px;display:flex;flex-direction:column;align-items:center}.caption-window-text[data-v-d1944dd0]{background-color:#000000bf;padding:2px 8px;white-space:pre-wrap;display:none}.subtitle-guide-dialog-container[data-v-e6e519b9]{max-width:400px;min-width:320px;width:max-content;white-space:normal;background:#fff;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 32px #00000014;padding:20px 24px 24px;box-sizing:border-box;display:flex;flex-direction:column;text-shadow:none;font-size:14px}.subtitle-guide-dialog-container .dialog-title[data-v-e6e519b9]{color:#000000e6;font-weight:600;line-height:20px;margin-bottom:8px}.subtitle-guide-dialog-container .dialog-description[data-v-e6e519b9]{color:#0009;margin-bottom:20px}.subtitle-guide-dialog-container .dialog-actions[data-v-e6e519b9]{display:flex;gap:8px;justify-content:end}.subtitle-guide-dialog-container .got-it-button[data-v-e6e519b9]{height:40px;padding-left:16px;padding-right:16px;font-weight:600}.subtitle-guide-dialog-container .explore-button[data-v-e6e519b9]{height:40px;font-weight:600}.subtitle-icon[data-v-64fd24a9]{display:inline-flex;align-items:center;justify-content:center}.menu-cell[data-v-de94c478]{display:flex;align-items:center;justify-content:space-between;min-height:48px;padding:0 24px}.menu-cell[data-v-de94c478]:hover{background-color:#ffffff1a}.menu-cell.disabled[data-v-de94c478]:hover{background-color:transparent}.menu-cell .menu-cell-left[data-v-de94c478]{display:flex;align-items:center;gap:8px;flex:1}.menu-cell .menu-cell-right[data-v-de94c478]{display:flex;align-items:center;gap:4px}.menu-container[data-v-20d5d8e7]{display:flex;flex-direction:column;background-color:#000c;border:1px solid rgba(255,255,255,.2);border-radius:8px;padding:8px 0;box-shadow:0 2px 4px #0000004d}.menu-divider[data-v-f1c6b8bc]{height:1px;background-color:#fff3;margin:2px 24px}.select-list-item[data-v-cab79358]{display:flex;gap:8px;align-items:center;height:48px;padding:0 24px}.select-list-item[data-v-cab79358]:hover{background-color:#ffffff1a}.menu-header[data-v-4535d3fb]{display:flex;align-items:center;gap:8px;height:48px;padding:0 24px;overflow:hidden}.menu-header .menu-header-title[data-v-4535d3fb]{font-weight:700}.service-list-container[data-v-b42f5d5b]{flex:1;overflow:auto}.group-title[data-v-b42f5d5b]{padding:0 24px;display:flex;gap:8px;margin-top:16px;margin-bottom:8px;align-items:center}.group-title .group-title-text[data-v-b42f5d5b]{font-size:12px;color:#fff9;font-weight:600}.service-item[data-v-b42f5d5b]{display:flex;align-items:center;gap:8px;flex:1}.service-desc[data-v-b42f5d5b]{font-size:12px;color:#fff9}.try-ai-model-tip-wrapper[data-v-eda2ac46]{min-width:260px;max-width:300px;width:max-content;white-space:normal;position:relative;border-radius:8px;box-shadow:0 12px 32px #0d0d0d14;text-shadow:none}.try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{position:absolute;z-index:0;top:0;bottom:0;border-radius:inherit}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{left:0;right:0;background:linear-gradient(90deg,#47c8ff,#2962ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{right:0;left:0;background:linear-gradient(-90deg,#47c8ff,#2962ff)}.try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{position:relative;font-size:12px;line-height:1.5;border-radius:inherit;border:1px solid transparent;background-color:#fff;background-clip:padding-box}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{padding:12px 34px 12px 16px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{padding:12px 16px 12px 34px}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .tip-text[data-v-eda2ac46]{color:#333}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{-webkit-text-fill-color:transparent;color:transparent;font-weight:600;font-size:12px;cursor:pointer;position:relative;display:inline-block}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{background:linear-gradient(90deg,#2962ff,#47c8ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{background:linear-gradient(-90deg,#2962ff,#47c8ff)}[dir] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{-webkit-background-clip:text;background-clip:text}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{content:"";position:absolute;bottom:0;width:100%;height:1px}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{left:0;background:linear-gradient(90deg,#2962ff,#47c8ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{right:0;background:linear-gradient(-90deg,#2962ff,#47c8ff)}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:hover{opacity:.8}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:active,.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn.active[data-v-eda2ac46]{opacity:1}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow[data-v-eda2ac46]{position:absolute;width:0;height:0}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow[data-v-eda2ac46]:after{content:"";position:absolute;width:0;height:0}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{bottom:-5px;border-left:6px solid transparent;border-right:6px solid transparent;border-top:5px solid #4a9eff}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{left:50%;transform:translate(-50%)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{right:50%;transform:translate(50%)}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{top:-6px;border-left:5px solid transparent;border-right:5px solid transparent;border-top:4px solid white}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{left:-5px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{right:-5px}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{top:-5px;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:5px solid #4a9eff}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{left:50%;transform:translate(-50%)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{right:50%;transform:translate(50%)}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{bottom:-6px;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:4px solid white}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{left:-5px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{right:-5px}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{top:50%;transform:translateY(-50%);border-top:6px solid transparent;border-bottom:6px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{right:-5px;border-left:5px solid #4a9eff}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{left:-5px;border-right:5px solid #4a9eff}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{top:-5px;border-top:5px solid transparent;border-bottom:5px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{left:-6px;border-left:4px solid white}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{right:-6px;border-right:4px solid white}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{top:50%;transform:translateY(-50%);border-top:6px solid transparent;border-bottom:6px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{left:-5px;border-right:5px solid #4a9eff}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{right:-5px;border-left:5px solid #4a9eff}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{top:-5px;border-top:5px solid transparent;border-bottom:5px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{right:-6px;border-right:4px solid white}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{left:-6px;border-left:4px solid white}.try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{position:absolute;top:6px;cursor:pointer}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{right:6px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{left:6px}.quick-button-container[data-v-6ab58ce4]{position:relative;margin:0 16px;padding:0;height:100%;cursor:pointer;z-index:2147483647;display:flex;align-items:center;justify-content:center;font-size:16px;white-space:nowrap;font-weight:400;line-height:20px}.quick-button-container .logo-container[data-v-6ab58ce4]{position:relative;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer}.quick-button-container .logo-container .logo-outer-border[data-v-6ab58ce4]{position:absolute;width:36px;height:36px;border:1px solid rgba(255,255,255,.6);border-radius:10px;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease}.quick-button-container .logo-container .logo-outer-border .logo-inner-border[data-v-6ab58ce4]{width:30px;height:30px;border:1px solid rgb(255,255,255);border-radius:7px;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease}.quick-button-container .logo-container .logo-outer-border .logo-inner-border .logo-image[data-v-6ab58ce4]{width:24px;height:24px;border-radius:4px}.quick-button-container .logo-container.hide-borders .logo-outer-border[data-v-6ab58ce4],.quick-button-container .logo-container.hide-borders .logo-outer-border .logo-inner-border[data-v-6ab58ce4]{border-color:transparent}.quick-button-container .subtitle-popup-container[data-v-6ab58ce4]{position:absolute;bottom:calc(100% - 4px)}.quick-button-container .subtitle-popup-container.hide-borders[data-v-6ab58ce4]{bottom:calc(100% - 8px)}.quick-button-container .exceed-limit-tip[data-v-6ab58ce4]{width:300px;text-shadow:none;white-space:normal}.quick-button-container .no-caption-tip[data-v-6ab58ce4],.quick-button-container .error-tip[data-v-6ab58ce4],.quick-button-container .download-tip[data-v-6ab58ce4]{color:#fff;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000000bf;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 32px #00000040}.quick-button-container .error-tip[data-v-6ab58ce4]{display:flex;align-items:center;gap:4px}.quick-button-container .error-tip .error-tip-close[data-v-6ab58ce4] svg path{stroke:currentColor;fill:currentColor}.quick-button-container[data-v-6ab58ce4] ::-webkit-scrollbar{width:4px}.quick-button-container[data-v-6ab58ce4] ::-webkit-scrollbar-thumb{background-color:#afafaf;border-radius:12px}.root[data-v-9e0591f1]{height:0px!important;width:0px!important;font-size:14px;line-height:normal;letter-spacing:normal;cursor:auto;color:initial;font-style:normal;font-weight:400;font-variant:normal;font-stretch:normal;word-spacing:normal;text-transform:none;text-indent:0;text-align:start;text-shadow:none;visibility:visible;white-space:normal}')})();
var Ri=Object.defineProperty;var Ii=(t,e,n)=>e in t?Ri(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Be=(t,e,n)=>Ii(t,typeof e!="symbol"?e+"":e,n);import{c as Bi,B as Ut,a as to,b as tn,_ as Ve,u as $a,d as fn,e as no,f as it,g as Ni,h as gr,i as ki,j as Fi,o as Jt,v as yt,E as Jn,L as Oi,k as ro,l as Ua,M as ao,w as cn,C as Mi,T as zn,m as so,n as Pi,p as oo,q as io,r as qa,s as $i}from"./BaseSwitch-DRkjQ0H7.js";import{i as uo,r as D,w as ve,u as Xe,g as Ge,S as de,s as dt,a as jn,b as Cn,d as Pe,c as pt,e as se,f as nn,h as re,o as F,j as y,k as oe,n as Ae,t as pe,l as z,m as Ze,p as Gt,q as k,O as Vn,P as jt,v as Tt,T as q,x as ur,y as nt,M as Ie,z as _n,A as fe,R as Nt,E as ke,B as Ha,C as bs,D as Ts,F as Ui,G as Ir,H as Me,I as ar,J as qi,K as yr,L as qe,N as un,Q as ws,U as Tn,V as xt,W as Le,X as Br,Y as Ue,Z as Zt,_ as yn,$ as Ft,a0 as Dt,a1 as ge,a2 as hn,a3 as Je,a4 as Kt,a5 as Hi,a6 as fr,a7 as lo,a8 as As,a9 as pn,aa as _t,ab as Gi,ac as Ga,ad as gn,ae as Nn,af as Ye,ag as co,ah as po,ai as Dr,aj as go,ak as fo,al as ho,am as Va,an as Vi,ao as Wa,ap as Wi,aq as zi,ar as ji,as as Ra,at as Wn,au as Xi,av as On,aw as sa,ax as Yi,ay as mo,az as Wr,aA as oa,aB as vo,aC as zr,aD as jr,aE as Xr,aF as _s,aG as sn,aH as Ki,aI as Qi,aJ as Cs,aK as Ji,aL as Ia,aM as Mn,aN as Zi,aO as Eo,aP as wr,aQ as bo,aR as eu,aS as tu,aT as nu}from"./academia-BC6xrMjn.js";import{t as ru}from"./translations-BYHfSuVy.js";(function(){var t=window.Document.prototype.createElement,e=window.Document.prototype.createElementNS,n=window.Document.prototype.importNode,r=window.Document.prototype.prepend,a=window.Document.prototype.append,s=window.DocumentFragment.prototype.prepend,o=window.DocumentFragment.prototype.append,u=window.Node.prototype.cloneNode,l=window.Node.prototype.appendChild,c=window.Node.prototype.insertBefore,f=window.Node.prototype.removeChild,w=window.Node.prototype.replaceChild,T=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),A=window.Element.prototype.attachShadow,x=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),I=window.Element.prototype.getAttribute,L=window.Element.prototype.setAttribute,E=window.Element.prototype.removeAttribute,_=window.Element.prototype.toggleAttribute,p=window.Element.prototype.getAttributeNS,i=window.Element.prototype.setAttributeNS,h=window.Element.prototype.removeAttributeNS,g=window.Element.prototype.insertAdjacentElement,G=window.Element.prototype.insertAdjacentHTML,H=window.Element.prototype.prepend,te=window.Element.prototype.append,ue=window.Element.prototype.before,X=window.Element.prototype.after,Ee=window.Element.prototype.replaceWith,B=window.Element.prototype.remove,N=window.HTMLElement,P=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),W=window.HTMLElement.prototype.insertAdjacentElement,j=window.HTMLElement.prototype.insertAdjacentHTML,K=new Set;"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(d){return K.add(d)});function O(d){var b=K.has(d);return d=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(d),!b&&d}var Z=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function Y(d){var b=d.isConnected;if(b!==void 0)return b;if(Z(d))return!0;for(;d&&!(d.__CE_isImportDocument||d instanceof Document);)d=d.parentNode||(window.ShadowRoot&&d instanceof ShadowRoot?d.host:void 0);return!(!d||!(d.__CE_isImportDocument||d instanceof Document))}function Se(d){var b=d.children;if(b)return Array.prototype.slice.call(b);for(b=[],d=d.firstChild;d;d=d.nextSibling)d.nodeType===Node.ELEMENT_NODE&&b.push(d);return b}function ne(d,b){for(;b&&b!==d&&!b.nextSibling;)b=b.parentNode;return b&&b!==d?b.nextSibling:null}function V(d,b,C){for(var $=d;$;){if($.nodeType===Node.ELEMENT_NODE){var S=$;b(S);var m=S.localName;if(m==="link"&&S.getAttribute("rel")==="import"){if($=S.import,C===void 0&&(C=new Set),$ instanceof Node&&!C.has($))for(C.add($),$=$.firstChild;$;$=$.nextSibling)V($,b,C);$=ne(d,S);continue}else if(m==="template"){$=ne(d,S);continue}if(S=S.__CE_shadowRoot)for(S=S.firstChild;S;S=S.nextSibling)V(S,b,C)}$=$.firstChild?$.firstChild:ne(d,$)}}function Q(){var d=!(rt==null||!rt.noDocumentConstructionObserver),b=!(rt==null||!rt.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=b,this.I=!d}function he(d,b,C,$){var S=window.ShadyDOM;if(d.shadyDomFastWalk&&S&&S.inUse){if(b.nodeType===Node.ELEMENT_NODE&&C(b),b.querySelectorAll)for(d=S.nativeMethods.querySelectorAll.call(b,"*"),b=0;b<d.length;b++)C(d[b])}else V(b,C,$)}function J(d,b){d.j=!0,d.m.push(b)}function be(d,b){d.j=!0,d.g.push(b)}function _e(d,b){d.j&&he(d,b,function(C){return ye(d,C)})}function ye(d,b){if(d.j&&!b.__CE_patched){b.__CE_patched=!0;for(var C=0;C<d.m.length;C++)d.m[C](b);for(C=0;C<d.g.length;C++)d.g[C](b)}}function we(d,b){var C=[];for(he(d,b,function(S){return C.push(S)}),b=0;b<C.length;b++){var $=C[b];$.__CE_state===1?d.connectedCallback($):Oe(d,$)}}function Fe(d,b){var C=[];for(he(d,b,function(S){return C.push(S)}),b=0;b<C.length;b++){var $=C[b];$.__CE_state===1&&d.disconnectedCallback($)}}function Te(d,b,C){C=C===void 0?{}:C;var $=C.J,S=C.upgrade||function(v){return Oe(d,v)},m=[];for(he(d,b,function(v){if(d.j&&ye(d,v),v.localName==="link"&&v.getAttribute("rel")==="import"){var R=v.import;R instanceof Node&&(R.__CE_isImportDocument=!0,R.__CE_registry=document.__CE_registry),R&&R.readyState==="complete"?R.__CE_documentLoadHandled=!0:v.addEventListener("load",function(){var M=v.import;if(!M.__CE_documentLoadHandled){M.__CE_documentLoadHandled=!0;var me=new Set;$&&($.forEach(function(Ce){return me.add(Ce)}),me.delete(M)),Te(d,M,{J:me,upgrade:S})}})}else m.push(v)},$),b=0;b<m.length;b++)S(m[b])}function Oe(d,b){try{var C=b.ownerDocument,$=C.__CE_registry,S=$&&(C.defaultView||C.__CE_isImportDocument)?ft($,b.localName):void 0;if(S&&b.__CE_state===void 0){S.constructionStack.push(b);try{try{if(new S.constructorFunction!==b)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{S.constructionStack.pop()}}catch(M){throw b.__CE_state=2,M}if(b.__CE_state=1,b.__CE_definition=S,S.attributeChangedCallback&&b.hasAttributes()){var m=S.observedAttributes;for(S=0;S<m.length;S++){var v=m[S],R=b.getAttribute(v);R!==null&&d.attributeChangedCallback(b,v,null,R,null)}}Y(b)&&d.connectedCallback(b)}}catch(M){je(M)}}Q.prototype.connectedCallback=function(d){var b=d.__CE_definition;if(b.connectedCallback)try{b.connectedCallback.call(d)}catch(C){je(C)}},Q.prototype.disconnectedCallback=function(d){var b=d.__CE_definition;if(b.disconnectedCallback)try{b.disconnectedCallback.call(d)}catch(C){je(C)}},Q.prototype.attributeChangedCallback=function(d,b,C,$,S){var m=d.__CE_definition;if(m.attributeChangedCallback&&-1<m.observedAttributes.indexOf(b))try{m.attributeChangedCallback.call(d,b,C,$,S)}catch(v){je(v)}};function $e(d,b,C,$){var S=b.__CE_registry;if(S&&($===null||$==="http://www.w3.org/1999/xhtml")&&(S=ft(S,C)))try{var m=new S.constructorFunction;if(m.__CE_state===void 0||m.__CE_definition===void 0)throw Error("Failed to construct '"+C+"': The returned value was not constructed with the HTMLElement constructor.");if(m.namespaceURI!=="http://www.w3.org/1999/xhtml")throw Error("Failed to construct '"+C+"': The constructed element's namespace must be the HTML namespace.");if(m.hasAttributes())throw Error("Failed to construct '"+C+"': The constructed element must not have any attributes.");if(m.firstChild!==null)throw Error("Failed to construct '"+C+"': The constructed element must not have any children.");if(m.parentNode!==null)throw Error("Failed to construct '"+C+"': The constructed element must not have a parent node.");if(m.ownerDocument!==b)throw Error("Failed to construct '"+C+"': The constructed element's owner document is incorrect.");if(m.localName!==C)throw Error("Failed to construct '"+C+"': The constructed element's local name is incorrect.");return m}catch(v){return je(v),b=$===null?t.call(b,C):e.call(b,$,C),Object.setPrototypeOf(b,HTMLUnknownElement.prototype),b.__CE_state=2,b.__CE_definition=void 0,ye(d,b),b}return b=$===null?t.call(b,C):e.call(b,$,C),ye(d,b),b}function je(d){var b="",C="",$=0,S=0;d instanceof Error?(b=d.message,C=d.sourceURL||d.fileName||"",$=d.line||d.lineNumber||0,S=d.column||d.columnNumber||0):b="Uncaught "+String(d);var m=void 0;ErrorEvent.prototype.initErrorEvent===void 0?m=new ErrorEvent("error",{cancelable:!0,message:b,filename:C,lineno:$,colno:S,error:d}):(m=document.createEvent("ErrorEvent"),m.initErrorEvent("error",!1,!0,b,C,$),m.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),m.error===void 0&&Object.defineProperty(m,"error",{configurable:!0,enumerable:!0,get:function(){return d}}),window.dispatchEvent(m),m.defaultPrevented||console.error(d)}function ze(){var d=this;this.g=void 0,this.F=new Promise(function(b){d.l=b})}ze.prototype.resolve=function(d){if(this.g)throw Error("Already resolved.");this.g=d,this.l(d)};function Et(d){var b=document;this.l=void 0,this.h=d,this.g=b,Te(this.h,this.g),this.g.readyState==="loading"&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function Re(d){d.l&&d.l.disconnect()}Et.prototype.G=function(d){var b=this.g.readyState;for(b!=="interactive"&&b!=="complete"||Re(this),b=0;b<d.length;b++)for(var C=d[b].addedNodes,$=0;$<C.length;$++)Te(this.h,C[$])};function ce(d){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(b){return b()},this.i=!1,this.v=[],this.h=d,this.D=d.I?new Et(d):void 0}ce.prototype.H=function(d,b){var C=this;if(!(b instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");He(this,d),this.s.set(d,b),this.v.push(d),this.i||(this.i=!0,this.o(function(){return et(C)}))},ce.prototype.define=function(d,b){var C=this;if(!(b instanceof Function))throw new TypeError("Custom element constructors must be functions.");He(this,d),gt(this,d,b),this.v.push(d),this.i||(this.i=!0,this.o(function(){return et(C)}))};function He(d,b){if(!O(b))throw new SyntaxError("The element name '"+b+"' is not valid.");if(ft(d,b))throw Error("A custom element with name '"+(b+"' has already been defined."));if(d.A)throw Error("A custom element is already being defined.")}function gt(d,b,C){d.A=!0;var $;try{var S=C.prototype;if(!(S instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var m=function(Ce){var lt=S[Ce];if(lt!==void 0&&!(lt instanceof Function))throw Error("The '"+Ce+"' callback must be a function.");return lt},v=m("connectedCallback"),R=m("disconnectedCallback"),M=m("adoptedCallback"),me=($=m("attributeChangedCallback"))&&C.observedAttributes||[]}catch(Ce){throw Ce}finally{d.A=!1}return C={localName:b,constructorFunction:C,connectedCallback:v,disconnectedCallback:R,adoptedCallback:M,attributeChangedCallback:$,observedAttributes:me,constructionStack:[]},d.u.set(b,C),d.C.set(C.constructorFunction,C),C}ce.prototype.upgrade=function(d){Te(this.h,d)};function et(d){if(d.i!==!1){d.i=!1;for(var b=[],C=d.v,$=new Map,S=0;S<C.length;S++)$.set(C[S],[]);for(Te(d.h,document,{upgrade:function(M){if(M.__CE_state===void 0){var me=M.localName,Ce=$.get(me);Ce?Ce.push(M):d.u.has(me)&&b.push(M)}}}),S=0;S<b.length;S++)Oe(d.h,b[S]);for(S=0;S<C.length;S++){for(var m=C[S],v=$.get(m),R=0;R<v.length;R++)Oe(d.h,v[R]);(m=d.B.get(m))&&m.resolve(void 0)}C.length=0}}ce.prototype.get=function(d){if(d=ft(this,d))return d.constructorFunction},ce.prototype.whenDefined=function(d){if(!O(d))return Promise.reject(new SyntaxError("'"+d+"' is not a valid custom element name."));var b=this.B.get(d);if(b)return b.F;b=new ze,this.B.set(d,b);var C=this.u.has(d)||this.s.has(d);return d=this.v.indexOf(d)===-1,C&&d&&b.resolve(void 0),b.F},ce.prototype.polyfillWrapFlushCallback=function(d){this.D&&Re(this.D);var b=this.o;this.o=function(C){return d(function(){return b(C)})}};function ft(d,b){var C=d.u.get(b);if(C)return C;if(C=d.s.get(b)){d.s.delete(b);try{return gt(d,b,C())}catch($){je($)}}}ce.prototype.define=ce.prototype.define,ce.prototype.upgrade=ce.prototype.upgrade,ce.prototype.get=ce.prototype.get,ce.prototype.whenDefined=ce.prototype.whenDefined,ce.prototype.polyfillDefineLazy=ce.prototype.H,ce.prototype.polyfillWrapFlushCallback=ce.prototype.polyfillWrapFlushCallback;function Ke(d,b,C){function $(S){return function(m){for(var v=[],R=0;R<arguments.length;++R)v[R]=arguments[R];R=[];for(var M=[],me=0;me<v.length;me++){var Ce=v[me];if(Ce instanceof Element&&Y(Ce)&&M.push(Ce),Ce instanceof DocumentFragment)for(Ce=Ce.firstChild;Ce;Ce=Ce.nextSibling)R.push(Ce);else R.push(Ce)}for(S.apply(this,v),v=0;v<M.length;v++)Fe(d,M[v]);if(Y(this))for(v=0;v<R.length;v++)M=R[v],M instanceof Element&&we(d,M)}}C.prepend!==void 0&&(b.prepend=$(C.prepend)),C.append!==void 0&&(b.append=$(C.append))}function kt(d){Document.prototype.createElement=function(b){return $e(d,this,b,null)},Document.prototype.importNode=function(b,C){return b=n.call(this,b,!!C),this.__CE_registry?Te(d,b):_e(d,b),b},Document.prototype.createElementNS=function(b,C){return $e(d,this,C,b)},Ke(d,Document.prototype,{prepend:r,append:a})}function wt(d){function b($){return function(S){for(var m=[],v=0;v<arguments.length;++v)m[v]=arguments[v];v=[];for(var R=[],M=0;M<m.length;M++){var me=m[M];if(me instanceof Element&&Y(me)&&R.push(me),me instanceof DocumentFragment)for(me=me.firstChild;me;me=me.nextSibling)v.push(me);else v.push(me)}for($.apply(this,m),m=0;m<R.length;m++)Fe(d,R[m]);if(Y(this))for(m=0;m<v.length;m++)R=v[m],R instanceof Element&&we(d,R)}}var C=Element.prototype;ue!==void 0&&(C.before=b(ue)),X!==void 0&&(C.after=b(X)),Ee!==void 0&&(C.replaceWith=function($){for(var S=[],m=0;m<arguments.length;++m)S[m]=arguments[m];m=[];for(var v=[],R=0;R<S.length;R++){var M=S[R];if(M instanceof Element&&Y(M)&&v.push(M),M instanceof DocumentFragment)for(M=M.firstChild;M;M=M.nextSibling)m.push(M);else m.push(M)}for(R=Y(this),Ee.apply(this,S),S=0;S<v.length;S++)Fe(d,v[S]);if(R)for(Fe(d,this),S=0;S<m.length;S++)v=m[S],v instanceof Element&&we(d,v)}),B!==void 0&&(C.remove=function(){var $=Y(this);B.call(this),$&&Fe(d,this)})}function ae(d){function b(S,m){Object.defineProperty(S,"innerHTML",{enumerable:m.enumerable,configurable:!0,get:m.get,set:function(v){var R=this,M=void 0;if(Y(this)&&(M=[],he(d,this,function(lt){lt!==R&&M.push(lt)})),m.set.call(this,v),M)for(var me=0;me<M.length;me++){var Ce=M[me];Ce.__CE_state===1&&d.disconnectedCallback(Ce)}return this.ownerDocument.__CE_registry?Te(d,this):_e(d,this),v}})}function C(S,m){S.insertAdjacentElement=function(v,R){var M=Y(R);return v=m.call(this,v,R),M&&Fe(d,R),Y(v)&&we(d,R),v}}function $(S,m){function v(R,M){for(var me=[];R!==M;R=R.nextSibling)me.push(R);for(M=0;M<me.length;M++)Te(d,me[M])}S.insertAdjacentHTML=function(R,M){if(R=R.toLowerCase(),R==="beforebegin"){var me=this.previousSibling;m.call(this,R,M),v(me||this.parentNode.firstChild,this)}else if(R==="afterbegin")me=this.firstChild,m.call(this,R,M),v(this.firstChild,me);else if(R==="beforeend")me=this.lastChild,m.call(this,R,M),v(me||this.firstChild,null);else if(R==="afterend")me=this.nextSibling,m.call(this,R,M),v(this.nextSibling,me);else throw new SyntaxError("The value provided ("+String(R)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.")}}A&&(Element.prototype.attachShadow=function(S){if(S=A.call(this,S),d.j&&!S.__CE_patched){S.__CE_patched=!0;for(var m=0;m<d.m.length;m++)d.m[m](S)}return this.__CE_shadowRoot=S}),x&&x.get?b(Element.prototype,x):P&&P.get?b(HTMLElement.prototype,P):be(d,function(S){b(S,{enumerable:!0,configurable:!0,get:function(){return u.call(this,!0).innerHTML},set:function(m){var v=this.localName==="template",R=v?this.content:this,M=e.call(document,this.namespaceURI,this.localName);for(M.innerHTML=m;0<R.childNodes.length;)f.call(R,R.childNodes[0]);for(m=v?M.content:M;0<m.childNodes.length;)l.call(R,m.childNodes[0])}})}),Element.prototype.setAttribute=function(S,m){if(this.__CE_state!==1)return L.call(this,S,m);var v=I.call(this,S);L.call(this,S,m),m=I.call(this,S),d.attributeChangedCallback(this,S,v,m,null)},Element.prototype.setAttributeNS=function(S,m,v){if(this.__CE_state!==1)return i.call(this,S,m,v);var R=p.call(this,S,m);i.call(this,S,m,v),v=p.call(this,S,m),d.attributeChangedCallback(this,m,R,v,S)},Element.prototype.removeAttribute=function(S){if(this.__CE_state!==1)return E.call(this,S);var m=I.call(this,S);E.call(this,S),m!==null&&d.attributeChangedCallback(this,S,m,null,null)},_&&(Element.prototype.toggleAttribute=function(S,m){if(this.__CE_state!==1)return _.call(this,S,m);var v=I.call(this,S),R=v!==null;return m=_.call(this,S,m),R!==m&&d.attributeChangedCallback(this,S,v,m?"":null,null),m}),Element.prototype.removeAttributeNS=function(S,m){if(this.__CE_state!==1)return h.call(this,S,m);var v=p.call(this,S,m);h.call(this,S,m);var R=p.call(this,S,m);v!==R&&d.attributeChangedCallback(this,m,v,R,S)},W?C(HTMLElement.prototype,W):g&&C(Element.prototype,g),j?$(HTMLElement.prototype,j):G&&$(Element.prototype,G),Ke(d,Element.prototype,{prepend:H,append:te}),wt(d)}var De={};function Qe(d){function b(){var C=this.constructor,$=document.__CE_registry.C.get(C);if(!$)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var S=$.constructionStack;if(S.length===0)return S=t.call(document,$.localName),Object.setPrototypeOf(S,C.prototype),S.__CE_state=1,S.__CE_definition=$,ye(d,S),S;var m=S.length-1,v=S[m];if(v===De)throw Error("Failed to construct '"+$.localName+"': This element was already constructed.");return S[m]=De,Object.setPrototypeOf(v,C.prototype),ye(d,v),v}b.prototype=N.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:b}),window.HTMLElement=b}function ut(d){function b(C,$){Object.defineProperty(C,"textContent",{enumerable:$.enumerable,configurable:!0,get:$.get,set:function(S){if(this.nodeType===Node.TEXT_NODE)$.set.call(this,S);else{var m=void 0;if(this.firstChild){var v=this.childNodes,R=v.length;if(0<R&&Y(this)){m=Array(R);for(var M=0;M<R;M++)m[M]=v[M]}}if($.set.call(this,S),m)for(S=0;S<m.length;S++)Fe(d,m[S])}}})}Node.prototype.insertBefore=function(C,$){if(C instanceof DocumentFragment){var S=Se(C);if(C=c.call(this,C,$),Y(this))for($=0;$<S.length;$++)we(d,S[$]);return C}return S=C instanceof Element&&Y(C),$=c.call(this,C,$),S&&Fe(d,C),Y(this)&&we(d,C),$},Node.prototype.appendChild=function(C){if(C instanceof DocumentFragment){var $=Se(C);if(C=l.call(this,C),Y(this))for(var S=0;S<$.length;S++)we(d,$[S]);return C}return $=C instanceof Element&&Y(C),S=l.call(this,C),$&&Fe(d,C),Y(this)&&we(d,C),S},Node.prototype.cloneNode=function(C){return C=u.call(this,!!C),this.ownerDocument.__CE_registry?Te(d,C):_e(d,C),C},Node.prototype.removeChild=function(C){var $=C instanceof Element&&Y(C),S=f.call(this,C);return $&&Fe(d,C),S},Node.prototype.replaceChild=function(C,$){if(C instanceof DocumentFragment){var S=Se(C);if(C=w.call(this,C,$),Y(this))for(Fe(d,$),$=0;$<S.length;$++)we(d,S[$]);return C}S=C instanceof Element&&Y(C);var m=w.call(this,C,$),v=Y(this);return v&&Fe(d,$),S&&Fe(d,C),v&&we(d,C),m},T&&T.get?b(Node.prototype,T):J(d,function(C){b(C,{enumerable:!0,configurable:!0,get:function(){for(var $=[],S=this.firstChild;S;S=S.nextSibling)S.nodeType!==Node.COMMENT_NODE&&$.push(S.textContent);return $.join("")},set:function($){for(;this.firstChild;)f.call(this,this.firstChild);$!=null&&$!==""&&l.call(this,document.createTextNode($))}})})}var rt=window.customElements;function ie(){var d=new Q;Qe(d),kt(d),Ke(d,DocumentFragment.prototype,{prepend:s,append:o}),ut(d),ae(d),window.CustomElementRegistry=ce,d=new ce(d),document.__CE_registry=d,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:d})}rt&&!rt.forcePolyfill&&typeof rt.define=="function"&&typeof rt.get=="function"||ie(),window.__CE_installPolyfill=ie}).call(self);function Nr(t){const e=window.getComputedStyle(t);return e.display!=="none"&&e.visibility!=="hidden"&&e.opacity!=="0"}function To(t){const n=t.getBoundingClientRect();return n.top<=20&&n.width>=window.innerWidth/2}function wo(t){const n=t.getBoundingClientRect();return n.bottom>=window.innerHeight-20&&n.width>=window.innerWidth/2}function au(t){return t.getBoundingClientRect().top<=window.innerHeight/2}function su(t){return t.getBoundingClientRect().top>window.innerHeight/2}function ys(t){const a=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=s.left<=20||s.right>=window.innerWidth-20,u=s.width<=100&&s.height<=200,l=a.position==="fixed";return o&&u&&l}function ou(t){const e=[];return Array.from(t.querySelectorAll("*")).forEach(n=>{const r=window.getComputedStyle(n);(r.position==="fixed"&&Nr(n)||r.position==="sticky"&&Nr(n)&&(To(n)||wo(n)))&&e.push({el:n,originalStyle:{visibility:r.visibility,transition:r.transition}})}),e}function iu(){let t=[];return Array.from(document.querySelectorAll("*")).forEach(e=>{if(e instanceof Element&&e.shadowRoot){const r=ou(e.shadowRoot);t=t.concat(r);return}const n=window.getComputedStyle(e);(n.position==="fixed"&&Nr(e)||n.position==="sticky"&&Nr(e)&&(To(e)||wo(e)))&&t.push({el:e,originalStyle:{visibility:n.visibility,transition:n.transition,opacity:n.opacity}})}),t}function uu(){const t=document.createElement("style");t.setAttribute("data-disable-transitions","true"),t.innerHTML=`
    * {
      transition: none !important;
    }
  `,document.head.appendChild(t)}function lu(){const t=document.querySelector('style[data-disable-transitions="true"]');t&&t.remove()}function cu(t=!1,e=!1){const n=iu();return n.forEach(r=>{const{el:a}=r;a&&(t&&au(a)&&!ys(a)||e&&(su(a)||ys(a))||(a.style.transition="none",a.style.visibility="hidden",a.style.opacity="0"))}),n}function du(t){t.forEach(e=>{const{el:n,originalStyle:r}=e,{visibility:a,transition:s,opacity:o}=r;n.style.visibility=a,n.style.transition=s,o&&(n.style.opacity=o)})}function pu(){document.body.style.overflow="hidden"}function gu(t="auto"){document.body.style.overflow=t}function Ds(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}function fu(t){return window.getComputedStyle(t).direction==="rtl"}function hu(t){const e=window.getComputedStyle(t),n=e.direction==="rtl",r=`${e.fontWeight} ${e.fontSize} ${e.fontFamily}`,a=parseFloat(e.lineHeight)||parseFloat(e.fontSize)*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.paddingLeft),u=parseFloat(e.paddingRight),l=t.clientWidth-o-u,f=document.createElement("canvas").getContext("2d");if(!f)return{lines:[],lineRects:[]};f.font=r;const w=t.value.split(`
`),T=[],A=[];let x=s;const I=t.getBoundingClientRect(),L=t.scrollTop,E=_=>n?{left:I.right-_,right:I.right}:{left:I.left,right:I.left+_};for(const _ of w){if(_===""){T.push("");const h=I.top+x-L;A.push({top:h,bottom:h+a,...E(0),text:""}),x+=a;continue}const p=_.match(/(\S+\s*|\s+)/g)||[];let i="";for(let h=0;h<p.length;h++){const g=p[h];if(f.measureText(g).width>l){if(i){const ue=I.top+x-L;A.push({top:ue,bottom:ue+a,...E(f.measureText(i).width),text:i}),T.push(i),x+=a,i=""}let te="";for(let ue=0;ue<g.length;ue++){const X=te+g[ue];if(f.measureText(X).width>l&&te!==""){const Ee=I.top+x-L;A.push({top:Ee,bottom:Ee+a,...E(f.measureText(te).width),text:te}),T.push(te),x+=a,te=g[ue]}else te=X}if(te){const ue=I.top+x-L;A.push({top:ue,bottom:ue+a,...E(f.measureText(te).width),text:te}),T.push(te),x+=a}continue}const G=i+g;if(f.measureText(G).width>l&&i!==""){const te=I.top+x-L;A.push({top:te,bottom:te+a,...E(f.measureText(i).width),text:i}),T.push(i),x+=a,i=g}else i=G}if(i!==""||p.length===0){const h=I.top+x-L;A.push({top:h,bottom:h+a,...E(f.measureText(i).width),text:i}),T.push(i),x+=a}}return{lines:T,lineRects:A}}function mu(t){const e=[];function n(r){r.nodeType===Node.TEXT_NODE&&r.textContent&&r.parentElement?e.push(r):r.childNodes.forEach(n)}return n(t),e}function vu(t){if(!t.parentElement)return null;const e=document.createRange();return e.selectNodeContents(t),e.getBoundingClientRect()}const Eu=t=>{const e=[];let n=t.parentElement;for(;n;){const r=window.getComputedStyle(n).overflowY;(r==="scroll"||r==="auto")&&n.scrollHeight>n.clientHeight&&e.push(n),n=n.parentElement}return e};function bu(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),a=Math.max(r.top,n.top),s=Math.max(r.left,n.left),o=Math.min(r.bottom,n.bottom),u=Math.min(r.right,n.right),l=Math.max(0,u-s),c=Math.max(0,o-a);return{top:a,left:s,width:l,height:c}}const ia=(t,e,n=!1)=>{const r=typeof n=="boolean"?{selectAll:n}:n,{selectAll:a=!1,savedRange:s,savedSelectionStart:o,savedSelectionEnd:u}=r;if((e==null?void 0:e.tagName)==="TEXTAREA"){e.focus();const l=e;o!==void 0&&o!==-1?l.setSelectionRange(o,u||o):a&&l.setSelectionRange(0,l.value.length),document.execCommand("insertText",!1,t);return}if(e!=null&&e.isContentEditable){if(e.focus(),a){const l=document.createRange();l.selectNodeContents(e);const c=window.getSelection();c&&(c.removeAllRanges(),c.addRange(l))}else if(s){const l=window.getSelection();l&&(l.removeAllRanges(),l.addRange(s))}document.execCommand("insertText",!1,t);return}};function za(){return!!(location.pathname.toLowerCase().endsWith(".pdf")||document.contentType==="application/pdf")}function Tu(){return za()?[location.href]:[...Array.from(document.querySelectorAll('embed[type="application/pdf"]')).map(n=>n.src),...Array.from(document.querySelectorAll('object[type="application/pdf"]')).map(n=>n.data),...Array.from(document.querySelectorAll('iframe[src$=".pdf"]')).map(n=>n.src)].filter(n=>n&&!n.startsWith("data:")&&!n.startsWith("blob:")).map(n=>n.startsWith("//")?`https:${n}`:n)}function wu(){try{return typeof window>"u"?!1:window.self!==window.top}catch{return!1}}function Yt(){const t=document.documentElement.getAttribute("dir");if(t==="rtl")return!0;if(t==="ltr")return!1;const e=document.body.getAttribute("dir");if(e==="rtl")return!0;if(e==="ltr")return!1;const n=window.getComputedStyle(document.documentElement).direction;if(n==="rtl")return!0;if(n==="ltr")return!1;const r=window.getComputedStyle(document.body).direction;return r==="rtl"}var lr=(t=>(t.INSERT_BEFORE="insertBefore",t.APPEND_CHILD="appendChild",t.PREPEND_CHILD="prependChild",t.INSERT_AFTER="insertAfter",t.REPLACE_CHILD="replaceChild",t))(lr||{});function kr(t,e,n){var r,a,s,o;switch(n){case"insertBefore":(r=t.parentNode)==null||r.insertBefore(e,t);break;case"appendChild":t.appendChild(e);break;case"prependChild":t.insertBefore(e,t.firstChild);break;case"insertAfter":t.nextSibling?(a=t.parentNode)==null||a.insertBefore(e,t.nextSibling):(s=t.parentNode)==null||s.appendChild(e);break;case"replaceChild":(o=t.parentNode)==null||o.replaceChild(e,t);break}}function Au(t){for(;t.firstChild;)t.removeChild(t.firstChild)}const _u="__wps-translate-entry-content-css__";class Cu extends HTMLElement{constructor(){super(...arguments);Be(this,"shadow",null);Be(this,"vueApp",null);Be(this,"appComponent",null)}connectedCallback(){if(!this.shadow){this.shadow=this.attachShadow({mode:"open"});const n=window[_u];n&&n.forEach(r=>{var s;const a=document.createElement("style");a.appendChild(document.createTextNode(r)),(s=this.shadow)==null||s.appendChild(a)})}!this.vueApp&&this.appComponent&&(this.vueApp=this.createVueApp(this.shadow,this.appComponent))}disconnectedCallback(){this.vueApp&&this.vueApp.unmount(),this.vueApp=null,this.shadow=null}createVueApp(n,r){const a=Bi(r);return a.use(uo),a.mount(n),a}cleanup(){this.disconnectedCallback()}}function yu(t){customElements.get(t)||customElements.define(t,Cu)}function Xn(t,e,n=!0){if(n){let a=document.querySelectorAll(t);a&&(a.forEach(s=>s.remove()),a=null)}yu(t);const r=document.createElement(t);return r.appComponent=e,r}const{userSettings:Ao,settingRefreshedFlag:Du}=Xe(),{onlineParams:Su}=Cn(),Ss=D(!1);ve(Ao,async(t,e)=>{if(Du.value){if(!t.pageTranslation.continueTranslateEnable){jn(de.CONTINUE_TRANSLATE_FLAG);return}t.pageTranslation.continueTranslateTime!==e.pageTranslation.continueTranslateTime&&await Ge(de.CONTINUE_TRANSLATE_FLAG)&&dt(de.CONTINUE_TRANSLATE_FLAG,!0,t.pageTranslation.continueTranslateTime*60*1e3)}});function Yr(){return{checkDialogAndUpdateUsageInfo:async()=>{var u;let{continueTranslateEnable:n,continueTranslateTime:r}=Ao.value.pageTranslation;const a=await Ge(de.TEMP_CONFIGS);if(a&&a.continueTranslateEnable!==void 0&&(n=a.continueTranslateEnable,r=a.continueTranslateTime||15),n&&r>0){await Ge(de.CONTINUE_TRANSLATE_FLAG)||dt(de.CONTINUE_TRANSLATE_FLAG,!0,r*60*1e3);return}jn(de.CONTINUE_TRANSLATE_FLAG);const s=(u=Su.value)==null?void 0:u.continueTranslate;if(!s)return;const o=await Ge(de.CONTINUE_TRANSLATE_USE_INFO);if(!o){dt(de.CONTINUE_TRANSLATE_USE_INFO,{time:Date.now(),count:1});return}if(Date.now()-o.time<s.duration*60*1e3)if(o.count++,o.count>=s.count){jn(de.CONTINUE_TRANSLATE_USE_INFO);const l=await Ge(de.CONTINUE_TRANSLATE_DIALOG_SHOW_TIME);(!l||Date.now()-l>s.dialogGap*24*60*60*1e3)&&(Ss.value=!0,dt(de.CONTINUE_TRANSLATE_DIALOG_SHOW_TIME,Date.now()))}else dt(de.CONTINUE_TRANSLATE_USE_INFO,o);else dt(de.CONTINUE_TRANSLATE_USE_INFO,{time:Date.now(),count:1})},continueTranslateDialogShow:Ss,checkPageContinueTranslate:async n=>{const{userSettings:r}=Xe();let{continueTranslateEnable:a}=r.value.pageTranslation;const s=await Ge(de.CONTINUE_TRANSLATE_FLAG),o=await Ge(de.TEMP_CONFIGS);return o&&o.continueTranslateEnable!==void 0&&(a=o.continueTranslateEnable),n===r.value.targetLanguage?!1:!!(a&&s)}}}const xu={class:"continue-translate-dialog"},Lu={class:"dialog-header"},Ru=["src"],Iu={class:"dialog-content"},Bu={class:"description"},Nu={class:"duration-selector"},ku={style:{"font-size":"16px","font-weight":"600"}},Fu={class:"dialog-footer"},Ou=Pe({__name:"ContinueTranslateSetting",setup(t){const{locale:e,t:n}=pt(),{continueTranslateDialogShow:r}=Yr(),{notifyUserSettings:a,getSettingByKey:s}=Xe(),o=se(()=>nn(e.value)),u=()=>chrome.runtime.getURL("public/logo/icon-128.png"),l=[{value:0,label:n("common.off")},{value:15,label:n("continueTranslate.minutes",["15"])},{value:30,label:n("continueTranslate.minutes",["30"])},{value:60,label:n("continueTranslate.hour")},{value:180,label:n("continueTranslate.hours",["3"])}],c=D(15);ve(c,A=>{k.reportClickEvent("plugin_always_translate_popup","always_translate_duration_list_select",{selected_item:A})});const f=()=>{k.reportClickEvent("plugin_always_translate_popup","always_translate_duration")},w=()=>{r.value=!1,k.reportClickEvent("plugin_always_translate_popup","close")},T=async()=>{r.value=!1;const A=s("pageTranslation");c.value===0?A.continueTranslateEnable=!1:(A.continueTranslateEnable=!0,A.continueTranslateTime=c.value),a({pageTranslation:A}),k.reportClickEvent("plugin_always_translate_popup","confirm",{selected_item:c.value})};return(A,x)=>(F(),re("div",xu,[y("div",Lu,[y("div",{class:"header-logo",style:Ae({"flex-direction":o.value?"row-reverse":"row","justify-content":o.value?"flex-end":"flex-start"})},[y("img",{src:u(),class:"logo-icon"},null,8,Ru),x[1]||(x[1]=y("div",{class:"logo-name"}," AnyDoc Translator ",-1))],4),oe(Ut,{icon:"close",size:28,onClick:w})]),y("div",Iu,[y("p",Bu,pe(z(n)("continueTranslate.desc")),1),y("div",Nu,[oe(to,{onClick:f,modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=I=>c.value=I),options:l,size:"medium",class:"duration-select"},{labelDesc:Ze(()=>[y("span",ku,pe(z(n)("continueTranslate.durationLabel")),1)]),_:1},8,["modelValue"])])]),y("div",Fu,[oe(tn,{class:"confirm-btn",size:"large",block:"",type:"primary",onClick:T},{default:Ze(()=>[Gt(pe(z(n)("common.confirm")),1)]),_:1})])]))}}),Mu=Ve(Ou,[["__scopeId","data-v-96293be0"]]),Pu=D(!1);function _o(){return{onBoardingShow:Pu}}const{userInfo:Fr}=Tt(),Co=D(!1),yo=D(!1),Do=D(!1),So=D(!1),or={[jt.HOVER_BALL]:Co,[Vn.TEXTBOX]:yo,[Vn.SELECT_TEXT]:Do,[Vn.SUBTITLE]:So};let Ar={disable:!1,gap:3,times:2};ve(Fr,()=>{Fr.value&&Object.values(or).forEach(t=>{t.value=!1})});function hr(){const t=async()=>{if(Fr.value)return;const a=await Ge(de.NO_LOGIN_TRANSLATE_USE_TIME,0);await dt(de.NO_LOGIN_TRANSLATE_USE_TIME,a+1)},e=async a=>{await r()&&(or[a]&&(or[a].value=!0),await dt(de.LOGIN_TIPS_SHOW_TIME,Date.now()))},n=async a=>{or[a]&&(or[a].value=!1)},r=async()=>{var u;if(Fr.value)return!1;const{onlineParams:a}=Cn();if((u=a.value)!=null&&u.loginGuid&&(Ar=a.value.loginGuid),Ar.disable)return!1;const s=await Ge(de.NO_LOGIN_TRANSLATE_USE_TIME,0),o=await Ge(de.LOGIN_TIPS_SHOW_TIME);return!!(!o&&s>=Ar.times||o&&Date.now()-o>Ar.gap*24*60*60*1e3)};return{loginTipShow:Co,textBoxLoginTipShow:yo,selectTextLoginTipShow:Do,subtitleLoginTipShow:So,setNoLoginTranslateUseCount:t,showLoginTipGuid:e,checkLoginTipShow:r,closeLoginTipGuid:n}}class Sr{static debounce(e,n){let r=null;return function(){r&&clearTimeout(r),r=setTimeout(()=>{e.apply(this,arguments)},n)}}static throttle(e,n){let r=0;return function(){const a=Date.now();a-r>n&&(e.apply(this,arguments),r=a)}}static isBlockStyleElement(e){const n=window.getComputedStyle(e).getPropertyValue("display"),r=window.getComputedStyle(e,"::after").getPropertyValue("display"),a=["block","flex","grid","table","table-row-group","table-row","table-cell","table-column","table-column-group","table-header-group","table-footer-group","table-caption","inline-table","list-item","-webkit-box"];return a.includes(n)||a.includes(r)}}class $u{constructor(e,n,r){this.debug=!1,this.appName=e,this.siteRules=n,this.debug=r,this.loadStyles()}get TAG(){return{CONTAINER:`${this.appName}-translation`,LOADING:`${this.appName}-tanslation-loading`,ERROR:`${this.appName}-tanslation-error`,RESULT:`${this.appName}-tanslation-text`}}get CLASS(){return{INLINE:`${this.appName}-translation-inline`,BLOCK:`${this.appName}-translation-block`,THEME:`${this.appName}-translation-theme`,REPLACE:`${this.appName}-translation-replace`,CLEAR_LINE_CLAMP:`${this.appName}-translation-clear-line-clamp`}}get styles(){const e=this.siteRules.map(n=>n.styleHandler?n.styleHandler(this.TAG,this.CLASS):"").join(`
`);return`
      ${this.TAG.CONTAINER}.${this.CLASS.INLINE} {
        margin: 0 0 0 4px;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} {
        display: block;
        margin: 8px 0;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} + br {
        display: none;
      }
      ${this.TAG.CONTAINER} ${this.TAG.LOADING} {
        display: inline-block;
        width: 14px;
        height: 14px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-top: 2px solid transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        vertical-align: middle;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} ${this.TAG.RESULT} {
        display: inline-block;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT} {}
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.REPLACE} {
        display: initial;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-default {}
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-weakness {
        opacity: .6;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-primary,
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-primary * {
        color: #007bff;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-highlight {
        background-color: #117efe0f;
        padding: 0 5px;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} ${this.TAG.RESULT}.${this.CLASS.THEME}-highlight {
        padding: 12px;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-underline {
        display: inline;
        border-bottom: 1px dotted;
      }
      ${this.TAG.CONTAINER} ${this.TAG.ERROR} {
        display: inline-block;
        width: 14px;
        height: 14px;
        vertical-align: middle;
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUpJREFUOE+lkzFLA1EQhGdCigSxFCy0EDsFQSGgwU6ws7DQLk309uUHmEIQoiAWRrB9t4mN+APsbLWxENQiGLSzsPAX2HkrCRpiPEmOvHr2Y2dnHjHkY9x8oVAYyWQyMwBmSY6RfCLZ9N6/9ur/AIIgWCdZBfBpZvck3wEsAlgys5NarVbuhvwCiMgVgGWS5TAMfbfQObcC4AhAg+SlmeXCMKx0AM65HTM7BJBX1Yc4a8VicTSdTp8BWCN53AG0PGez2WcAF6q6+99dRaQCYBvABIADVd1vbxAEQY7kHYA5VW30C0ZEpqMomqzX69dtgHNuy8z2VHWq33BsCkMDkloolUrzURS9qOpH28KgR2xpRWQDwHkqlcp77x8TxfgNuAVw85PWwEUSkVUzq5Jsrb75c8wkVV4AcNrbk0E+0zjJNzNrxjU0FpCkC1+cAZgR0ELvzwAAAABJRU5ErkJggg==');
        background-repeat: no-repeat;
        background-size: 100%;
        background-position: center;
        cursor: pointer;
        opacity: .7;
      }
      ${this.TAG.CONTAINER} ${this.TAG.ERROR}:hover {
        opacity: 1;
      }
      .${this.CLASS.CLEAR_LINE_CLAMP} {
        -webkit-line-clamp: none !important;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      ${e}
    `}renderLoading(e){const n=this.findOrCreateContainerElement(e),r=n.querySelector(this.TAG.LOADING)||document.createElement(this.TAG.LOADING);n.contains(r)||(n.innerHTML="",n.appendChild(r))}renderResult(e,n,r=!1,a="default",s=!1,o=!1){const u=this.findOrCreateContainerElement(e);u.innerHTML="";const l=u.querySelector(this.TAG.RESULT)||document.createElement(this.TAG.RESULT);r?l.classList.add(this.CLASS.REPLACE):l.classList.add(`${this.CLASS.THEME}-${a}`),s?e.nodes.forEach((c,f)=>{if(c.nodeType===Node.TEXT_NODE)l.appendChild(document.createTextNode(n[f]));else{const w=A=>{var x,I;for(let L=0;L<A.children.length;L++){const E=A.children[L];if(((x=E.textContent)==null?void 0:x.trim())===((I=c.textContent)==null?void 0:I.trim()))return w(E)}return A},T=c.cloneNode(!0);w(T).textContent=n[f],l.appendChild(T)}}):l.textContent=n[0],o&&(l.style.direction="rtl",l.style.textAlign="right"),e.nodes.forEach(c=>{if(r)e.element.contains(c)&&e.element.removeChild(c);else if(!e.element.contains(c))try{e.element.insertBefore(c,u)}catch{}}),u.contains(l)||u.appendChild(l),window.getComputedStyle(e.element).getPropertyValue("-webkit-line-clamp")!=="none"&&e.element.classList.add(this.CLASS.CLEAR_LINE_CLAMP)}renderError(e,n){const r=this.findOrCreateContainerElement(e),a=r.querySelector(this.TAG.ERROR)||document.createElement(this.TAG.ERROR);a.onclick=s=>{s.preventDefault(),s.stopPropagation(),n()},r.contains(a)||(r.innerHTML="",r.appendChild(a))}restore(e){if(e.translationElement&&e.element.contains(e.translationElement)){let n=document.createDocumentFragment();e.nodes.forEach(r=>{e.element.contains(r)||n.appendChild(r)}),e.translationElement.replaceWith(n),e.translationElement=null,e.element.classList.contains(this.CLASS.CLEAR_LINE_CLAMP)&&e.element.classList.remove(this.CLASS.CLEAR_LINE_CLAMP)}}removeTranslationElements(e){const n=(e==null?void 0:e.excludeTargets)||[];((e==null?void 0:e.container)||document).querySelectorAll(this.TAG.CONTAINER).forEach(r=>{n.find(a=>a.translationElement===r)||r.remove()})}isTranslationElement(e){return e.tagName===this.TAG.CONTAINER.toUpperCase()||!!e.closest(this.TAG.CONTAINER)}loadStyles(e=document.head){const n=`${this.appName}-translation-styles`;if(e.querySelector(`#${n}`))return;const r=document.createElement("style");r.id=n,r.textContent=this.styles,e.appendChild(r)}findOrCreateContainerElement(e){let n=e.translationElement;if(n)return n;n=document.createElement(this.TAG.CONTAINER),e.translationElement=n,this.isTargetRenderAsBlock(e)?n.classList.add(this.CLASS.BLOCK):n.classList.add(this.CLASS.INLINE),this.debug&&n.addEventListener("click",()=>{console.log(e)});const r=e.nodes[e.nodes.length-1];return r.nextSibling&&e.element.contains(r.nextSibling)?e.element.insertBefore(n,r.nextSibling):e.element.appendChild(n),n}isTargetRenderAsBlock(e){if(e.element.closest("button"))return!1;const n=e.element.closest("a");if(n&&e.element.tagName!=="A"&&!Sr.isBlockStyleElement(n.firstElementChild))return!1;if(/[\u4e00-\u9fa5\u3040-\u30ff\uac00-\ud7af]/.test(e.text)){const a=parseInt(getComputedStyle(e.element).height,10),s=parseInt(getComputedStyle(e.element).fontSize,10),o=parseInt(getComputedStyle(e.element).lineHeight,10)||s;if(a>=o*2)return!0}const r=e.text.trim();return r.split(" ").length-1>=3||r.length>35}}class Uu{async translate(e=[],n="",r="",a){return e.length?(e=e.map(s=>s||`
`),(await(await fetch("https://translate-pa.googleapis.com/v1/translateHtml",{method:"POST",headers:{"Content-Type":"application/json+protobuf","X-Goog-Api-Key":"AIzaSyATBXajvzQLTDHEQbcpq0Ihe0vWDHmO520"},body:JSON.stringify([[e,n||"auto",r],"te_lib"]),signal:a})).json())[0]):[]}}class qu{constructor(){this.authorizationToken="",this.authorizationTokenExpires=0,this.authorizationTokenExpiresDuration=6e4}async translate(e=[],n="",r="",a){if(!e.length)return[];const s=await this.getAuthorizationToken(),o=e.map(u=>({Text:u}));return(await(await fetch(`https://api-edge.cognitive.microsofttranslator.com/translate?from=${n}&to=${r}&api-version=3.0&includeSentenceLength=true`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify(o),signal:a})).json()).map(u=>u.translations[0].text)}async getAuthorizationToken(e){if(Date.now()>this.authorizationTokenExpires){const n=await this.fetchAuthorizationToken(e);return this.authorizationTokenExpires=Date.now()+this.authorizationTokenExpiresDuration,n}return this.authorizationToken}async fetchAuthorizationToken(e){const n=await fetch("https://edge.microsoft.com/translate/auth",{signal:e});return this.authorizationToken=await n.text(),this.authorizationToken}}class Hu{async translate(e=[],n="",r="",a){if(!e.length)return[];if(!r)return e;n=n?n.includes("-")?n.split("-")[0]:n:"",r=r.includes("-")?r.split("-")[0]:r;const s=await this.getAccessToken(a),o=new URLSearchParams;o.append("srv","tr-url-widget"),o.append("id",`${s}-0-0`),o.append("format","text"),o.append("lang",`${n?n+"-":""}${r}`),e.forEach(l=>{o.append("text",l)});const u=o.toString();return(await(await fetch(`https://translate.yandex.net/api/v1/tr.json/translate?${u}`,{signal:a})).json()).text}async getAccessToken(e){const n=(await(await fetch("https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=es&widgetTheme=light&autoMode=false",{signal:e})).text()).match(/sid\:\s\'[0-9a-f\.]+/);return n&&n[0]&&n[0].length>7?n[0].substring(6):""}}class Gu{constructor(e="google",n=!0,r=100){this.services={google:new Uu,microsoft:new qu,yandex:new Hu},this.serviceName="google",this.abortController=new AbortController,this.mergeRequests=!0,this.maxTextCountPerRequest=100,this.delay=200,this.requests=[],this.timer=null,this.listeners={},this.serviceName=e,this.mergeRequests=n,this.maxTextCountPerRequest=r}register(e,n){if(this.services[e])throw new Error(`Service "${e}" already exists`);this.services[e]=n}setServiceName(e){if(!this.services[e])throw new Error(`Service "${e}" not found`);this.serviceName=e}async translate(e,n,r){const a=this.services[this.serviceName];if(!a)throw new Error(`Service "${this.serviceName}" not found`);if(!this.mergeRequests){const o=Date.now(),u=await a.translate(e,n,r,this.abortController.signal),l=Date.now()-o;return this.emit("request",{from:n,to:r,texts:e,results:u,duration:l}),u}const s=Math.random().toString(36).substring(2,10);return this.requests.push({id:s,from:n,to:r,texts:e}),this.maxTextCountPerRequest&&this.requests.length>=this.maxTextCountPerRequest?(this.processRquests(),this.requests=[]):this.timer||(this.timer=setTimeout(()=>{this.processRquests(),this.timer=null,this.requests=[]},this.delay)),new Promise((o,u)=>{this.on(s,l=>{if(this.off(s),l instanceof Error){u(l);return}o(l)})})}abort(){this.abortController.abort(),this.abortController=new AbortController}async processRquests(){const e={};for(let r=0;r<this.requests.length;r++){const a=this.requests[r],{from:s,to:o}=a,u=`${s}-${o}`;e[u]?e[u].push(a):e[u]=[a]}const n=this.services[this.serviceName];for(let r in e){const{from:a,to:s}=e[r][0],o=[],u=[];e[r].forEach(c=>{u.push(...c.texts),c.texts.forEach(()=>{o.push(c.id)})});const l=Date.now();n.translate(u,a,s,this.abortController.signal).then(c=>{const f=Date.now()-l;return this.emit("request",{from:a,to:s,texts:u,results:c,duration:f}),c}).then(c=>{const f={};c.forEach((w,T)=>{const A=o[T];f[A]?f[A].push(w):f[A]=[w]});for(let w in f)this.emit(w,f[w])}).catch(c=>{new Set(o).forEach(f=>{this.emit(f,c)})})}}on(e,n){if(this.listeners[e])throw new Error(`Event "${e}" already exists`);this.listeners[e]=n}emit(e,n){const r=this.listeners[e];r&&r(n)}off(e){delete this.listeners[e]}}const Vu=[{name:"GITHUB",urlRegex:/^(https?:\/\/)?(www\.)?github\.com\/.*$/,elementHandler:t=>!(t.tagName==="TABLE"&&t.getAttribute("aria-labelledby")==="folders-and-files")},{name:"REDDIT",urlRegex:/^(https?:\/\/)?(www\.)?reddit\.com\/.*$/,styleHandler:(t,e)=>`
        ${t.CONTAINER} {
          visibility: visible !important;
        }
        ${t.CONTAINER} * {
          visibility: visible !important;
        }
      `}],Wu="1.0.23";class xo{constructor(e={}){this.version=Wu,this.appName="wpstranslate",this.enabled=!1,this.sourceLanguage="",this.targetLanguage="en",this.serviceName="google",this.hoverMode=!1,this.onlyTranslateMainContent=!0,this.translateSameLanguage=!1,this.replaceMode=!1,this.maxTaskCount=60,this.keepStyles=!0,this.rangeOffset=300,this.theme="default",this.tasks=[],this.documentTitle="",this.documentTitleTranslation="",this.documentTitleTranslating=!1,this.mergeRequests=!0,this.maxTextCountPerRequest=100,this.debug=!1,this.watch=!0,this.ignoreElementSelector="",this.ignoreElementTags=["SCRIPT","NOSCRIPT","STYLE","CODE","PRE","SVG","IMG","VIDEO","AUDIO","CANVAS","CITE"],this.nonMainContentElementTags=["ASIDE","FOOTER","HEADER","NAV"],this.minimalTargetElementTags=["P","H1","H2","H3","H4","H5","H6","OPTION"],this.separateElementTags=["BUTTON","SELECT","LABEL","LI","TD","TH"],this.tempTarget=null,this.windowEventsHandler=Sr.debounce(()=>{this.watch&&this.translateDocument()},100).bind(this),this.mutaionHandler=Sr.debounce(n=>{if(!this.watch)return;let r=n.filter(a=>!this.renderer.isTranslationElement(a.target));r.length>0&&(this.renderer.removeTranslationElements({excludeTargets:this.tasks.map(a=>a.target)}),r.forEach(a=>{(this.replaceMode?this.tasks.filter(s=>s.target.element===a.target&&!Array.from(a.addedNodes).every(o=>o instanceof HTMLElement&&this.renderer.isTranslationElement(o))):this.tasks.filter(s=>s.target.element===a.target&&s.target.nodes.some(o=>!o.isConnected))).forEach(s=>{const o=s.target.element;this.removeTranslationTask(s),this.parseNode(o,u=>{this.addTranslationTask(u)})})}),this.translateDocument())},100).bind(this),this.mutationObserver=null,this.mousePosition={x:0,y:0},this.mousemoveHandler=this.handleMouseMove.bind(this),this.keydownHandler=this.handleKeyDown.bind(this),this.siteRules=Vu.filter(n=>n.urlRegex.test(window.location.href)),this.parseOptions(e),this.renderer=new $u(this.appName,this.siteRules,this.debug),this.service=new Gu(this.serviceName,this.mergeRequests,this.maxTextCountPerRequest),this.hoverMode&&this.enableHoverMode()}get isRTL(){const e=["ar","he","fa","ps","ur"],n=this.targetLanguage.split("-")[0];return e.includes(n)}enable(){this.enabled=!0,this.resetErrorTasks(),this.renderTasks(),this.translateDocument(),window.addEventListener("scroll",this.windowEventsHandler,{capture:!0}),window.addEventListener("resize",this.windowEventsHandler),this.observeMutation(document.body)}disable(){this.enabled=!1,this.restoreDocument(),this.clearUnfinishedTasks(),window.removeEventListener("scroll",this.windowEventsHandler,{capture:!0}),window.removeEventListener("resize",this.windowEventsHandler),this.disconnectMutation()}toggle(){this.enabled?this.disable():this.enable()}addService(e,n){this.service.register(e,n)}setService(e){this.serviceName!==e&&(this.documentTitleTranslation="",this.serviceName=e,this.service.setServiceName(e),this.enabled&&(this.disable(),this.enable()))}setSourceLanguage(e){this.sourceLanguage!==e&&(this.documentTitleTranslation="",this.sourceLanguage=e,this.enabled&&(this.disable(),this.enable()))}setTargetLanguage(e){this.targetLanguage!==e&&(this.documentTitleTranslation="",this.targetLanguage=e,this.enabled&&(this.disable(),this.enable()))}setTheme(e){this.theme!==e&&(this.theme=e,this.rerender())}setReplaceMode(e){this.replaceMode!==e&&(this.replaceMode=e,this.rerender())}setWatch(e){this.watch=e}setOnlyTranslateMainContent(e){this.onlyTranslateMainContent!==e&&(this.onlyTranslateMainContent=e,this.enabled&&(this.disable(),this.enable()))}setKeepStyles(e){this.keepStyles!==e&&(this.keepStyles=e,this.enabled&&(this.disable(),this.enable()))}enableHoverMode(){this.hoverMode||(this.hoverMode=!0,window.addEventListener("mousemove",this.mousemoveHandler),window.addEventListener("keydown",this.keydownHandler))}disableHoverMode(){this.hoverMode&&(this.hoverMode=!1,window.removeEventListener("mousemove",this.mousemoveHandler),window.removeEventListener("keydown",this.keydownHandler))}translateElement(e){const n=typeof e=="string"?document.querySelector(e):e;n&&this.parseNode(n,r=>{this.addTranslationTask(r,!0)},{checkInView:!1})}restoreElement(e){const n=typeof e=="string"?document.querySelector(e):e;n&&this.tasks.filter(r=>r.target.element===n||n.contains(r.target.element)).forEach(r=>{this.renderer.restore(r.target)})}parseOptions(e){["appName","serviceName","sourceLanguage","targetLanguage","hoverMode","onlyTranslateMainContent","translateSameLanguage","maxTaskCount","keepStyles","rangeOffset","theme","replaceMode","mergeRequests","maxTextCountPerRequest","debug","watch","ignoreElementSelector"].forEach(n=>{e[n]!==void 0&&(this[n]=e[n])})}async translateDocumentTitle(){if(this.documentTitle||(this.documentTitle=document.title),this.documentTitleTranslation)document.title=this.documentTitleTranslation;else if(this.isTextToBeTranslated(this.documentTitle)){if(this.documentTitleTranslating)return;this.documentTitleTranslating=!0;const e=await this.filterTextsAndTranslate([this.documentTitle],this.sourceLanguage,this.targetLanguage);this.documentTitleTranslation=e[0],this.enabled&&(document.title=this.documentTitleTranslation)}}restoreDocumentTitle(){document.title=this.documentTitle}translateDocument(){this.enabled&&(this.translateDocumentTitle(),this.parseDocument(e=>{this.addTranslationTask(e)}))}restoreDocument(){this.restoreDocumentTitle(),this.tasks.forEach(e=>{this.renderer.restore(e.target)})}parseDocument(e){this.parseNode(document.body,e),this.tempTarget&&(e(this.tempTarget),this.tempTarget=null)}parseNode(e,n,r){var u,l;let{checkVisible:a=!0,checkInView:s=!0,checkMainContent:o=!0}=r||{};if(e.nodeType===Node.TEXT_NODE){const c=e.textContent.trim(),f=e.parentElement;if(f){const w=e.nextSibling&&e.nextSibling.nodeName==="BR";this.processTarget(c,f,e,!!w,n)}}else if(e.nodeType===Node.ELEMENT_NODE){const c=e;if(this.ignoreElementSelector&&c.matches(this.ignoreElementSelector)){this.debugParseElement(c,"[SKIP ELEMENT] IGNORE_ELEMENT_SELECTOR_MATCH | SELECTOR: "+this.ignoreElementSelector);return}for(let f of this.siteRules)if(f.elementHandler&&!f.elementHandler(c)){this.debugParseElement(c,"[SKIP ELEMENT] SITE_RULE_MATCH | RULE: "+f.name);return}if(c.shadowRoot&&(this.renderer.loadStyles(c.shadowRoot),this.parseNode(c.shadowRoot,n,{checkVisible:a,checkInView:s}),this.observeMutation(c.shadowRoot)),this.renderer.isTranslationElement(c)){this.debugParseElement(c,"[SKIP ELEMENT] IS_TRANSLATION_ELEMENT");return}if(this.ignoreElementTags.includes(c.tagName)){this.debugParseElement(c,"[SKIP ELEMENT] IS_IGNORE_ELEMENT_TAG");return}if(o&&this.nonMainContentElementTags.includes(c.tagName))if(this.onlyTranslateMainContent){this.debugParseElement(c,"[SKIP ELEMENT] IS_NON_MAIN_CONTENT_ELEMENT");return}else{setTimeout(()=>{this.parseNode(c,n,{checkVisible:a,checkInView:s,checkMainContent:!1})},100);return}if(a&&this.isElementInvisible(c))if(this.isElementDropdown(c))a=!1;else{this.debugParseElement(c,"[SKIP ELEMENT] IS_INVISIBLE");return}if(this.isMinimalTargetElement(c)){let f=a?(u=c.innerText)==null?void 0:u.trim():(l=c.textContent)==null?void 0:l.trim();f=f||"";const w=this.rangeOffset,T=c.getBoundingClientRect(),A=T.top-w>window.innerHeight||T.bottom+w<0||T.left-w>window.innerWidth||T.right+w<0;!s||!A?(this.debugParseElement(c,"[PROCESS ELEMENT] MINIMAL_TARGET_ELEMENT"),this.processTarget(f,c,e,!0,n)):this.debugParseElement(c,"[SKIP ELEMENT] IS_OUT_OF_VIEW");return}this.debugParseElement(c,"[SKIP ELEMENT] RECURSIVE_CHILD_NODES"),this.getChildNodes(c).forEach(f=>{this.parseNode(f,n,{checkVisible:a,checkInView:s})})}else if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const c=e;this.getChildNodes(c).forEach(f=>{this.parseNode(f,n,{checkVisible:a,checkInView:s})})}}processTarget(e,n,r,a=!1,s){if(r.translatorParsed){const l=this.findTargetByNode(r);if(l){s(l);return}}r.translatorParsed=!0;const o=r.nodeType===Node.TEXT_NODE?[r]:this.getChildNodes(n).filter(l=>l.textContent),u={text:e,element:n,nodes:o};if(a){this.tempTarget&&s(this.tempTarget),s(u),this.tempTarget=null;return}if(!this.tempTarget){this.tempTarget=u;return}if(u.element===this.tempTarget.element){this.tempTarget.text+=" "+u.text,this.tempTarget.nodes.push(...u.nodes);return}s(this.tempTarget),this.tempTarget=u}isMinimalTargetElement(e){var r;const n=(r=e.textContent)==null?void 0:r.trim();return n&&this.hasElementChild(e,a=>{var s;return n===((s=a.textContent)==null?void 0:s.trim())})?!1:this.minimalTargetElementTags.includes(e.tagName)?!0:!this.hasElementChild(e,a=>!!(Sr.isBlockStyleElement(a)||this.minimalTargetElementTags.includes(a.tagName)||this.separateElementTags.includes(a.tagName)||a.shadowRoot||a.nodeName==="BR"),{})}addTranslationTask(e,n=!1){if(!this.isTextToBeTranslated(e.text))return null;let r={serviceName:this.serviceName,from:this.sourceLanguage,to:this.targetLanguage,pending:!0,done:!1,error:!1,target:e,text:e.text,result:"",results:[]};const a=this.tasks.find(s=>s.serviceName===r.serviceName&&s.from===r.from&&s.to===r.to&&s.text===r.text&&s.target.element===r.target.element&&s.target.nodes[0]===r.target.nodes[0]);return r=a||r,a||(this.tasks.push(r),(this.enabled||n)&&this.renderer.renderLoading(r.target)),n?this.executeTranslationTask(r,!0):this.processTranslationTaskQueue(),r}removeTranslationTask(e){this.tasks=this.tasks.filter(n=>n!==e),this.renderer.restore(e.target),this.tempTarget&&this.tempTarget.element===e.target.element&&(this.tempTarget=null)}async processTranslationTaskQueue(){if(!this.enabled)return;const e=this.tasks.filter(s=>s.serviceName===this.serviceName&&s.from===this.sourceLanguage&&s.to===this.targetLanguage),n=e.filter(s=>!s.done&&!s.pending),r=e.filter(s=>s.pending);if(r.length===0)return;const a=r[0];n.length<this.maxTaskCount&&(await this.executeTranslationTask(a),this.processTranslationTaskQueue())}async executeTranslationTask(e,n=!1){if(e.pending=!1,e.done){e.error||this.renderTaskResult(e);return}const r=this.tasks.find(a=>a.done&&a.result&&!a.error&&a.serviceName===e.serviceName&&a.from===e.from&&a.to===e.to&&a.text===e.text&&(!this.keepStyles||a.target.nodes.map(s=>s.textContent).join(",")===e.target.nodes.map(s=>s.textContent).join(",")));if(r){e.results=r.results,e.result=r.result,this.renderTaskResult(e),e.done=!0;return}this.renderer.renderLoading(e.target);try{const a=this.keepStyles?e.target.nodes.map(o=>(o==null?void 0:o.innerText)||o.textContent||""):[e.text],s=await this.filterTextsAndTranslate(a,e.from,e.to);e.results=s,e.result=s.join(""),(this.enabled||n)&&this.renderTaskResult(e)}catch(a){if(a.name==="AbortError"){e.pending=!0,e.done=!1;return}e.error=!0,(this.enabled||n)&&this.renderer.renderError(e.target,this.retryErrorTasks.bind(this))}finally{e.pending=!1,e.done=!0}}resetErrorTasks(e=()=>{}){this.tasks.forEach(n=>{n.error&&(n.error=!1,n.done=!1,n.pending=!0,e(n))})}retryErrorTasks(){this.enabled?(this.resetErrorTasks(),this.disable(),this.enable()):this.hoverMode&&this.resetErrorTasks(e=>{this.executeTranslationTask(e,!0)})}isTextToBeTranslated(e){return!(!e.trim()||/^[\d\s.,:;!?(){}[\]<>|@#$%^&*+=\-_`~\\\/]*$/.test(e)||/^[\uE000-\uF8FF]|[\uDB80-\uDBBF][\uDC00-\uDFFF]|[\uDBC0-\uDBFF][\uDC00-\uDFFF]*$/.test(e))}hasElementChild(e,n,r){const{recurse:a=!0}=r||{},s=this.getChildNodes(e);for(let o=0;o<s.length;o++){const u=s[o];if(u.nodeType===Node.ELEMENT_NODE){const l=u;if(n(l)||a&&this.hasElementChild(l,n,{recurse:a}))return!0}}return!1}findTargetByNode(e){const n=this.tasks.find(r=>r.target.nodes.includes(e)||r.target.element===e);return n?n.target:null}getChildNodes(e){return Array.from(e.childNodes).filter(n=>!(n.nodeType===Node.ELEMENT_NODE&&this.renderer.isTranslationElement(n)))}handleMouseMove(e){this.mousePosition={x:e.clientX,y:e.clientY}}handleKeyDown(e){this.enabled||e.key==="Shift"&&this.toggleTranslateElementAtMousePosition()}toggleTranslateElementAtMousePosition(){const e=document.elementFromPoint(this.mousePosition.x,this.mousePosition.y);if(!e)return;const n=this.getClosetMinimalTargetElement(e);n&&this.parseNode(n,r=>{r!=null&&r.translationElement?this.renderer.restore(r):this.addTranslationTask(r,!0)})}getClosetMinimalTargetElement(e){if(this.isMinimalTargetElement(e))return e;let n=e.parentElement;return n?this.getClosetMinimalTargetElement(n):null}rerender(){this.enabled&&this.tasks.forEach(e=>{e.done&&!e.error&&this.renderTaskResult(e)})}isElementInvisible(e){const n=window.getComputedStyle(e);return n.display==="none"||n.visibility==="hidden"||n.opacity==="0"}isElementDropdown(e){const n=[/dropdown/i,/select/i,/menu/i,/popup/i,/context-menu/i,/panel/i];for(const r of n)if(r.test(e.className))return!0;return!1}clearUnfinishedTasks(){this.tasks=this.tasks.filter(e=>e.done),this.service.abort()}renderTaskResult(e){if(!(e.serviceName!==this.serviceName||e.from!==this.sourceLanguage||e.to!==this.targetLanguage)){if(!this.translateSameLanguage&&e.text===e.result){this.renderer.restore(e.target);return}this.renderer.renderResult(e.target,e.results,this.replaceMode,this.theme,this.keepStyles,this.isRTL)}}renderTasks(){this.tasks.forEach(e=>{e.serviceName===this.serviceName&&e.from===this.sourceLanguage&&e.to===this.targetLanguage&&(e.done?e.error?this.renderer.renderError(e.target,this.retryErrorTasks.bind(this)):this.renderTaskResult(e):e.pending||this.renderer.renderLoading(e.target))})}debugParseElement(e,n){this.debug&&e===null&&console.log(n,e)}observeMutation(e){this.mutationObserver||(this.mutationObserver=new MutationObserver(this.mutaionHandler)),this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["class","style"],childList:!0,subtree:!0})}disconnectMutation(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}async filterTextsAndTranslate(e,n,r){const a=[],s=[];for(let u=0;u<e.length;u++){const l=e[u];this.isTextToBeTranslated(l)&&(a.push(l),s.push(u))}const o=await this.service.translate(a,n,r);for(let u=0;u<s.length;u++){const l=s[u];e[l]=o[u]}return e}}const ua=D(""),la=D(""),ca=D(!1),da=D(!1),pa=D(),ga=D(""),fa=D(""),ha=D(!1),ma=D(!1),va=D();function mr(){return{explainText:la,explainError:ca,explainDone:da,explainErrorCode:pa,improveWriteText:fa,improveWriteError:ha,improveWriteErrorCode:va,improveWriteDone:ma,addExplainImproveWriteText:(s,o)=>{s===q.EXPLAIN?la.value+=o:fa.value+=o},setExplainImproveWriteError:(s,o,u)=>{s===q.EXPLAIN?(ca.value=o,da.value=!0,pa.value=u):(ha.value=o,ma.value=!0,va.value=u)},resetExplainImproveWrite:()=>{la.value="",ca.value=!1,da.value=!1,pa.value=void 0,ua.value="",fa.value="",ha.value=!1,ma.value=!1,va.value=void 0,ga.value=""},getCurrentRequestId:s=>s===q.EXPLAIN?ua.value:ga.value,setCurrentRequestId:(s,o)=>{s===q.EXPLAIN?ua.value=o||ur():ga.value=o||ur()}}}async function Lo(t){const n={initial_service:await Ge(de.INITIAL_SERVICE),status:"processing",...t};t.feature==="plugin_translate_website"&&(n.current_page_no=window.scrollY||document.documentElement.scrollTop),k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,n)}async function Ro(t){const n={initial_service:await Ge(de.INITIAL_SERVICE),...t};t.feature==="plugin_translate_website"&&(n.current_page_no=window.scrollY||document.documentElement.scrollTop),k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,n)}function Io(t,e){return t===ke.SUCCESS?"success":t===ke.EXTEND_LIMIT?"failed_exceed_freetrial_aimodel_limit":t===ke.NOT_LOGIN?"failed_not_login":t===ke.PRIVILEGE_INSUFFICIENT?"failed_privilege_insufficient":t===ke.USER_STOP_GENERATE?"failed_user_stop_generate":t===ke.NO_SERVER?"failed_network_error":`failed_${e}`}async function Zn(t,e){const n=t.texts.reduce((f,w)=>f+w.text.length,0),r=Date.now(),a=ur();let s=fe.defaultSourceLanguage;if(!t.from&&e.feature==="plugin_translate_website")try{s=await nt(Ie.DETECT_PAGE_LANGUAGE)}catch{}Lo({position:e.position,text_num:n,source_language:`auto_detect_${t.from||s}`,target_language:t.to,service:t.service,feature:e.feature,request_id:a});const o={...t,requestId:a},l=_n(t.service)?await nt(Ie.TRANSLATE_TEXT,o):await ru(o),c=Date.now()-r;return Ro({position:e.position,request_id:a,text_num:n,source_language:`auto_detect_${t.from||s}`,target_language:t.to,service:t.service,feature:e.feature,loading_duration:c,status:Io(l==null?void 0:l.code,l==null?void 0:l.msg)}),l}async function Bo(t,e){var c;const{texts:n,from:r,to:a,service:s}=t,o=[];for(let f=0;f<n.length;f+=Ts)o.push(n.slice(f,f+Ts));const u=Ui,l=[];for(let f=0;f<o.length;f+=u){const T=o.slice(f,f+u).map(async x=>await Zn({service:s,texts:x.map(L=>({text:String(L)})),from:r,to:a,type:q.WEBSITE},e)),A=await Promise.all(T);for(const x of A)if(x.code===ke.SUCCESS&&x.data){const I=((c=x.data)==null?void 0:c.map(L=>L.text))||[];l.push(...I)}else throw x}return l}let Ba,Na=null;async function No(t,e){var s;const n=t.input.length;let r=fe.defaultSourceLanguage;try{r=await nt(Ie.DETECT_PAGE_LANGUAGE)}catch{}Ba={position:e.position,text_num:n,source_language:`auto_detect_${r}`,target_language:t.targetLanguage,service:((s=Ha.find(o=>o.engineCode===t.engineCode))==null?void 0:s.value)||"",feature:e.feature,request_id:t.requestId},Na=Date.now(),Lo(Ba);const a=t.translateType===q.EXPLAIN?bs.TRANSLATE_EXPLAIN:bs.TRANSLATE_IMPROVE_WRITE;nt(Ie.CHAT_COMPLETIONS,{...t,scene:a,reportParams:e})}function zu(t,e){const r=Date.now();let a=null;return{resultPromise:new Promise(async o=>{await No({...t},e),a=setInterval(()=>{if(Date.now()-r>6e4){a&&(clearInterval(a),a=null),o({code:ke.REQUEST_TIMEOUT});return}const{improveWriteDone:u,improveWriteText:l,improveWriteError:c,improveWriteErrorCode:f}=mr();if(c.value){a&&(clearInterval(a),a=null),o({code:f.value});return}else if(u.value&&!c.value){a&&(clearInterval(a),a=null),o({code:ke.SUCCESS,data:[{text:l.value}]});return}},300)}),abort:()=>{a&&clearInterval(a),a=null}}}async function Ea(t){if(!Na)return;const e={request_id:t.requestId};t.done?(e.loading_duration=Date.now()-Na,e.status=Io(t.code,t.msg)):e.status="processing",Ro({...Ba,...e})}let ja=null,St=null;const An=new Map;let ln;const Or={},{userSettings:xs}=Xe(),Ls={};let ju=class{constructor(e){Be(this,"service");this.service=e}async translate(e,n,r){var c,f,w;const a=ja,{targetLanguage:s,serviceName:o}=ln,u={targetLanguage:s,serviceName:o},l=e.map((T,A)=>T.trim()===""?{index:A,value:T}:null).filter(T=>T!==null);e=e.filter(T=>T.trim()!=="");try{const T=await Bo({texts:e,from:n,to:r,service:this.service},Or);return Me.info("translate result:",T),l.forEach(({index:A,value:x})=>{T.splice(A,0,x)}),(c=An.get(a))==null||c("success",u),T}catch(T){if(T.code===ke.EXTEND_LIMIT)(f=An.get(a))==null||f("limit",u);else throw Me.error(":",T.msg),(w=An.get(a))==null||w("error",u),new Error(T.msg)}}},Xu=class{constructor(e){Be(this,"service");this.service=e}async translate(e,n,r){var c,f,w;const a=ja,{targetLanguage:s,serviceName:o}=ln,u={targetLanguage:s,serviceName:o},l=await Zn({service:this.service,texts:e.map(T=>({text:String(T)})),from:n,to:r,type:q.WEBSITE},Or);if(l.code===ke.SUCCESS&&l.data)return(c=An.get(a))==null||c("success",u),((f=l.data)==null?void 0:f.map(A=>A.text))||[];throw(w=An.get(a))==null||w("error",u),Me.error(":",l.msg),new Error(l.msg)}};const Rs=t=>{if(!St)return;const e=Ir(t);ln.serviceName=t,ln.maxTaskCount=e,St.maxTaskCount=e,Ls[t]||(_n(t)?St.addService(t,new ju(t)):St.addService(t,new Xu(t)),Ls[t]=t),St.setService(t)};function ko(){return{translateElement:async(s,o)=>{if(!s)return;ja=s;const u=xs.value.translationService,l=xs.value.targetLanguage;St?(ln.serviceName!==u&&Rs(u),ln.targetLanguage!==l&&(ln.targetLanguage=l,St.setTargetLanguage(l))):(ln={translateSameLanguage:!0,onlyTranslateMainContent:!1,maxTaskCount:Ir(u),appName:fe.appName,targetLanguage:l,replaceMode:!0,theme:"default"},St=new xo(ln),Rs(u)),An.set(s,o),St==null||St.restoreElement(s),St==null||St.translateElement(s)},restoreElement:s=>{s&&St&&St.restoreElement(s)},setReportParams:(s,o)=>{Or.position=s,Or.feature=o},deleteElementResult:s=>{An.delete(s)},restoreAllElement:()=>{var s;if(St)try{for(const o of An.keys())(s=o.selfRestore)==null||s.call(o)}catch{}}}}const ba=D(!1);let Ta={disable:!1,closeGap:7,showGap:60,useGap:2,useTimes:3};function Yn(){return{pluginCommentGuidShow:ba,setPluginUseTime:async()=>{var A;const{onlineParams:n}=Cn();(A=n.value)!=null&&A.pluginComment&&(Ta=n.value.pluginComment);const r=await Ge(de.FIRST_USE_TIME),a=await Ge(de.USE_COUNT,0)+1;if(await dt(de.USE_COUNT,a),!r){await dt(de.FIRST_USE_TIME,Date.now());return}if(Ta.disable)return;const{useGap:s,showGap:o,closeGap:u,useTimes:l}=Ta,c=await Ge(de.PLUGIN_COMMENT_GUID_SHOW_TIME),w=await Ge(de.PLUGIN_COMMENT_GUID_GAP)==="go"?o:u,T=async()=>{ba.value=!0,await dt(de.PLUGIN_COMMENT_GUID_SHOW_TIME,Date.now()),await dt(de.PLUGIN_COMMENT_GUID_GAP,"close")};if(!c&&Date.now()-r>s*24*60*60*1e3&&a>=l){await T();return}if(c&&w&&Date.now()-c>w*24*60*60*1e3){await T();return}},closePluginCommentGuid:async n=>{ba.value=!1,await Ge(de.PLUGIN_COMMENT_GUID_GAP)!=="go"&&(n==="go"&&await dt(de.PLUGIN_COMMENT_GUID_GAP,"go"),n==="close"&&await dt(de.PLUGIN_COMMENT_GUID_GAP,"close"))}}}let xr,vt=null,Bt;const Fo=new Map,wa={},Aa={[ar.ORIGINAL]:"default",[ar.COLORED]:"primary",[ar.GHOSTED]:"weakness",[ar.HIGHLIGHT]:"highlight",[ar.UNDERLINED]:"underline"},Mr={},Ln=D(!1),{restoreAllElement:Yu}=ko();function Oo(){const e=Object.keys(Bt).sort().reduce((n,r)=>(n[r]=Bt[r],n),{});return JSON.stringify(e)}class Ku{constructor(e){Be(this,"service");this.service=e}async translate(e,n,r){const a=e.map((s,o)=>s.trim()===""?{index:o,value:s}:null).filter(s=>s!==null);e=e.filter(s=>s.trim()!=="");try{const s=await Bo({texts:e,from:n,to:r,service:this.service},Mr);return Me.info("translate result:",s),a.forEach(({index:o,value:u})=>{s.splice(o,0,u)}),s}catch(s){if(s.code===ke.EXTEND_LIMIT)Fo.set(Oo(),!0),Mo();else throw s}}}class Qu{constructor(e){Be(this,"service");this.service=e}async translate(e,n,r){var s;const a=await Zn({service:this.service,texts:e.map(o=>({text:String(o)})),from:n,to:r,type:q.WEBSITE},Mr);if(a.code===ke.SUCCESS&&a.data)return((s=a.data)==null?void 0:s.map(u=>u.text))||[];throw Me.error(":",a.msg),new Error(a.msg)}}function Mo(){const{hoverBallExceedLimitTipShow:t}=$a(),{exceedLimitDialogShow:e,showMask:n}=fn();xr===jt.DROPDOWN?nt(Ie.TRANSLATE_EXCEED_LIMIT):xr===jt.CONTEXT_MENU?(e.value=!0,n.value=!1):xr===jt.HOVER_BALL&&(t.value=!0)}async function Ju(){const{userSettings:t}=Xe(),e=await Ge(de.TEMP_CONFIGS);return e&&e.translationService?e.translationService:t.value.translationService}async function Zu(){const{userSettings:t}=Xe(),e=await Ge(de.TEMP_CONFIGS);return e&&e.targetLanguage?e.targetLanguage:t.value.targetLanguage}async function el(){const{userSettings:t}=Xe(),e=await Ge(de.TEMP_CONFIGS);return e&&e.displayTheme?e.displayTheme:t.value.pageTranslation.theme}async function tl(){const{userSettings:t}=Xe(),e=await Ge(de.TEMP_CONFIGS);return e&&e.displayMode?e.displayTheme:t.value.pageTranslation.displayMode}function kn(){const t=()=>{Ln.value=!Ln.value,nt(Ie.CHANGE_CONTEXT_MENU_BY_TRANSLATE_STATUS,Ln.value),Ln.value&&Fo.has(Oo())&&Mo()},e=c=>{if(!vt)return;const f=Ir(c),w=ws(c);Bt.serviceName=c,Bt.maxTaskCount=f,Bt.maxTextCountPerRequest=w,vt.maxTaskCount=f,vt.service&&(vt.service.maxTextCountPerRequest=w),wa[c]?vt.setService(wa[c]):(_n(c)?vt.addService(c,new Ku(c)):vt.addService(c,new Qu(c)),wa[c]=c,vt.setService(c))},n=async(c="")=>{const{setPluginUseTime:f}=Yn(),w=yr(location.href);let T="plugin_floatingball_translate_academia";c==="contextMenu"?T="plugin_rightclickmenu_translate_academia":c==="dropdown"?T="plugin_dropdown_translate_academia":c==="translateBar"?T="plugin_translate_pdf":c==="academia"&&(T="plugin_academia_translate_bar");const A=location.href;w?qe(`${fe.fileTranslateRedirectPage}?plugin=anydoc&academia_url=${encodeURIComponent(A)}&position=${T}`):qe(`${fe.fileTranslateRedirectPage}?plugin=anydoc&pdf_url=${encodeURIComponent(A)}&position=${T}`),f()},r=async c=>{var _;xr=c;const{setPluginUseTime:f}=Yn(),{setNoLoginTranslateUseCount:w}=hr();if(za()){n(c);return}const T=await tl(),A=await el(),x=await Ju(),I=await Zu(),L=T===un.REPLACE;vt?(Bt.serviceName!==x&&e(x),Bt.targetLanguage!==I&&(Bt.targetLanguage=I,vt.setTargetLanguage(I)),Bt.replaceMode!==L&&(Bt.replaceMode=L,s(L?un.REPLACE:un.SIDE_BY_SIDE,A))):(Bt={ignoreElementSelector:".anydoc-translate-ignore",rangeOffset:100,translateSameLanguage:!0,onlyTranslateMainContent:!1,maxTaskCount:Ir(x),maxTextCountPerRequest:ws(x),appName:fe.appName,targetLanguage:I,replaceMode:L,theme:Aa[A]},vt=new xo(Bt),e(x),dt(de.WEB_TRANSLATOR_SDK_VERSION,vt.version),(_=vt.ignoreElementTags)!=null&&_.push&&vt.ignoreElementTags.push("OPTION"));const{hideExceedLimitTip:E}=$a();E(),Ln.value||Yu(),vt.toggle(),t(),Ln.value&&(f(),w())},a=()=>{vt&&(vt.toggle(),t())},s=(c,f)=>{vt&&(c===un.REPLACE?(Bt.replaceMode=!0,vt.setReplaceMode(!0)):(vt.setReplaceMode(!1),vt.setTheme(Aa[f]),Bt.replaceMode=!1,Bt.theme=Aa[f]))},o=c=>{vt&&(c.sourceLanguage&&(Bt.sourceLanguage=c.sourceLanguage,vt.setSourceLanguage(c.sourceLanguage)),c.targetLanguage&&(Bt.targetLanguage=c.targetLanguage,vt.setTargetLanguage(c.targetLanguage)),c.service&&e(c.service))},u=c=>{vt&&vt.setWatch(c)},l=(c,f)=>{Mr.position=c,Mr.feature=f};return{isPageTranslated:qi(Ln),translatePage:r,translatePdfPage:n,showOriginPage:a,setTranslatePageStyle:s,changeTranslateOptions:o,setWatchTranslate:u,setReportParams:l}}const nl=D(!0),rl=D();function Xa(){return{isWindowActive:nl,currentWindowId:rl}}const al={class:"hover-ball-onboarding-container",style:{right:"calc(100% + 8px)"}},sl={class:"hover-ball-onboarding-content"},ol={class:"hover-ball-onboarding-title"},il={class:"hover-ball-onboarding-desc"},ul=Pe({__name:"HoverBallOnboarding",emits:["close"],setup(t,{emit:e}){const{t:n}=pt(),r=e,a=()=>{r("close"),k.reportClickEvent("plugin_floatingball_guide_page","close")},s=()=>{r("close"),k.reportClickEvent("plugin_floatingball_guide_page","got_it")},o=()=>chrome.runtime.getURL("/public/images/hoverball-onboarding.png");return(u,l)=>(F(),re("div",al,[oe(Ut,{icon:"close",size:28,class:"hover-ball-onboarding-close",onClick:a}),y("div",{class:"hover-ball-onboarding-image",style:Ae({backgroundImage:`url(${o()})`})},null,4),y("div",sl,[y("div",ol,pe(z(n)("hoverBall.onBoarding.title")),1),y("div",il,pe(z(n)("hoverBall.onBoarding.desc")),1),oe(tn,{size:"large",block:"",type:"primary",onClick:s,class:"hover-ball-onboarding-button"},{default:Ze(()=>[Gt(pe(z(n)("hoverBall.onBoarding.btn")),1)]),_:1})])]))}}),ll=Ve(ul,[["__scopeId","data-v-e0b307f8"]]),cl={class:"onetap-login-tip"},dl={class:"header-container",style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"8px"}},pl={class:"title"},gl={class:"brand-container"},fl=["src"],hl={class:"brand-text"},ml={key:1,class:"description"},vl={class:"description-text"},El=["src"],bl={class:"login-button-text"},Tl=["src"],wl={class:"login-button-text"},Al=Pe({__name:"OnetapLoginTip",props:{source:{}},emits:["close","googleLogin","otherLogin"],setup(t,{emit:e}){const{userSettings:n}=Xe(),{isRtl:r}=no(),a=e,s=t,o=se(()=>{const w=n.value.services.filter(x=>n.value.enabledServices.includes(x.value)),T={[Tn.CHATGPT]:"ChatGPT",[Tn.DEEP_SEEK]:"DeepSeek",[Tn.GEMINI]:"Gemini",[Tn.HAIKU]:"Claude"},A=w.find(x=>x.isAIService&&!x.isVipService);return A?{icon:chrome.runtime.getURL(`public/modelIcons/small/${A.icon}.svg`),name:T[A.value]}:null}),u=w=>chrome.runtime.getURL(`public/images/${w}.png`),l=()=>{a("close"),k.reportClickEvent(s.source,"close")},c=()=>{qe(`${fe.googleLoginPage}?feature=${s.source}`),k.reportClickEvent(s.source,"sign_in_with_google"),setTimeout(()=>{a("close")},200)},f=()=>{qe(`${fe.loginUrl}?feature=${s.source}`),a("otherLogin"),k.reportClickEvent(s.source,"sign_in_with_another_way"),setTimeout(()=>{a("close")},200)};return xt(()=>{k.reportShowEvent(s.source)}),(w,T)=>(F(),re("div",cl,[y("div",dl,[y("h3",pl,pe(w.$t("onetapLoginTips.title")),1),oe(Ut,{style:{"margin-top":"-4px"},icon:"close",size:24,onClick:l})]),o.value?(F(),Le(z(Br),{key:0,keypath:"onetapLoginTips.desc",class:"description description-text",tag:"div"},{default:Ze(()=>[y("div",gl,[y("img",{src:o.value.icon,class:"brand-icon"},null,8,fl),y("span",hl,pe(o.value.name),1)])]),_:1})):(F(),re("div",ml,[y("span",vl,pe(w.$t("hoverBall.loginTips.btn")),1)])),y("div",{class:"login-button google-login",onClick:c},[y("img",{src:u("google"),class:"login-button-icon"},null,8,El),y("span",bl,pe(w.$t("onetapLoginTips.googleLogin")),1),oe(it,{icon:"arrow-down",style:Ae(z(r)?{rotate:"90deg"}:{rotate:"-90deg"}),size:14},null,8,["style"])]),y("div",{class:"login-button",onClick:f},[y("img",{src:u("login-icon"),class:"login-button-icon"},null,8,Tl),y("span",wl,pe(w.$t("onetapLoginTips.otherLogin")),1)])]))}}),Kr=Ve(Al,[["__scopeId","data-v-2a3e1960"]]),_l={class:"confirm-container"},Cl={class:"confirm-header"},yl={class:"title"},Dl={class:"confirm-content"},Sl={class:"confirm-footer"},xl=Pe({__name:"SecondConfirm",props:{source:{},title:{},options:{}},emits:["close","confirm"],setup(t,{emit:e}){const{t:n}=pt(),{userInfo:r,contentScriptRefreshUserInfo:a}=Tt(),s=e,o=t,u=D(o.options[0].value),l=se(()=>o.source==="select_text"?"plugin_select_to_retention_page":o.source==="input_ball"?"plugin_textbox_retention_page":o.source==="image_ball"?"plugin_image_translate_retention_page":"plugin_floatingball_retention_page"),c=()=>{s("close"),k.reportClickEvent(l.value,"close")},f=()=>{s("confirm",u.value);const T=["this_time_closed_until_next_visit","disabled_for_current_page","disable_permanently"][Number(u.value)-1];k.reportClickEvent(l.value,"confirm_list_selected",{selected_item:T})},w=()=>{const T={hover_ball:fe.hoverBallSettingPage,select_text:fe.selectSettingPage,input_ball:fe.textBoxSettingPage,image_ball:fe.imageSettingPage}[o.source];let A;if(r.value)A=`${T}?source=plugin`;else{let x="plugin_textbox_translate_page";o.source==="select_text"&&(x="plugin_select_to_translate_page");const I=encodeURIComponent(`${T}?source=plugin&from=extensionLogin`);A=`${fe.loginUrl}?feature=${x}&cb=${I}`}qe(A),k.reportClickEvent(l.value,"jump_to_settings")};return xt(()=>{a()}),(T,A)=>(F(),re("div",_l,[y("div",Cl,[y("div",yl,pe(o.title),1),oe(Ut,{icon:"close",onClick:c})]),y("div",Dl,[oe(Ni,{modelValue:u.value,"onUpdate:modelValue":A[0]||(A[0]=x=>u.value=x),gap:12,options:T.options},null,8,["modelValue","options"]),oe(z(Br),{keypath:"settings.canBeReEnable",class:"settings-can-be-re-enable",tag:"div"},{default:Ze(()=>[y("span",{class:"settings-can-be-re-enable-link",onClick:w},pe(z(n)("common.setting")),1)]),_:1})]),y("div",Sl,[oe(tn,{onClick:f,class:"confirm-button",type:"primary"},{default:Ze(()=>[Gt(pe(z(n)("common.confirm")),1)]),_:1})])]))}}),Qr=Ve(xl,[["__scopeId","data-v-a3738775"]]),Ll={class:"actionContainer"},Rl={key:0,class:"red-hot",style:{right:"2px"}},Il=["src"],Bl=["src"],Nl=Pe({__name:"HoverBall",emits:["close"],setup(t,{emit:e}){const n=e,{t:r}=pt(),{contentScriptRefreshUserInfo:a,userInfo:s}=Tt(),{onlineParams:o}=Cn(),{isPageTranslated:u,setTranslatePageStyle:l}=kn(),{userSettings:c,notifyUserSettings:f,getSettingByKey:w}=Xe(),{onBoardingShow:T}=_o(),{isWindowActive:A}=Xa(),{hoverBallExceedLimitTipShow:x}=$a(),{loginTipShow:I,checkLoginTipShow:L,showLoginTipGuid:E}=hr(),{showLanguageSameTip:_,checkLanguageSameTip:p,closeLanguageSameTip:i}=Fi(),{giftText:h,giftType:g}=gr(),{checkDialogAndUpdateUsageInfo:G}=Yr(),H=Ue("containerRef"),te=Ue("giftBallContainerRef"),ue=Ue("translateIconRef"),X=Ue("secondConfirmRef"),Ee=Ue("loginTipRef"),B=D(!1),N=D(null),P=D(!1),W=D(c.value.pageTranslation.displayMode===un.SIDE_BY_SIDE),j=D(!1),K=D(!1),O=D(""),Z=D({top:"0px",right:"0px"}),Y=D(!1),Se=se(()=>[{value:"1",label:r("hoverBall.closeOneTime")},{value:"2",label:r("hoverBall.disableOnePage")},{value:"3",label:r("hoverBall.disable")}]),ne=D(0),{y:V,isDragging:Q}=ki(ue),he=se(()=>[{icon:W.value?"showOrigin":"hideOrigin",click:ce,tip:W.value?r("hoverBall.tips.replace"):r("hoverBall.tips.sidebyside")},{icon:"moreTools",click:gt,tip:r("common.translateFileAndMore")},{icon:"open-setting",click:ft,tip:r("common.setting")},{icon:"feedback-grey",click:Ke,tip:r("common.feedback")}]),J=se(()=>te.value?40:0),be=se(()=>{if(H.value&&X.value){const d=H.value.clientHeight,b=X.value.$el.clientHeight,C=window.innerHeight-ne.value-d;return C>b-16?{top:`${d-16}px`,right:`${H.value.clientWidth-4}px`}:{top:`${d-(b-C)-16}px`,right:`${H.value.clientWidth+4}px`}}return{}}),_e=se(()=>{if(H.value&&Ee.value){const ie=Ee.value.$el.getBoundingClientRect();if(ie.bottom>window.innerHeight)return{transform:`translateY(${window.innerHeight-ie.bottom-10}px)`}}return{}}),ye=se(()=>{const ie=c.value.targetLanguage,d=Zt(ie);return d?r(`language.${d.value}`)||d.label:r("language.en")}),we=se(()=>_.value||I.value||T.value||Q.value||B.value);ve(A,ie=>{ie===!0&&document.visibilityState==="visible"&&ut()}),ve(c,ie=>{W.value=ie.pageTranslation.displayMode===un.SIDE_BY_SIDE}),ve(Q,ie=>{K.value=!1,ie===!1&&dt(de.HOVER_BALL_POSITION,ne.value)}),ve(I,ie=>{ie===!1&&(B.value=!1)}),ve(V,ie=>{if(H.value){const b=window.innerHeight-H.value.clientHeight;ne.value=Math.min(Math.max(ie-2-J.value,0),b)}}),ve(x,ie=>{ie&&i()});let Fe=null;ve(B,ie=>{clearTimeout(Fe),ie===!1&&(P.value=!1),!T.value&&ie===!0&&(Fe=setTimeout(()=>{var d;k.reportShowEvent("plugin_floatingball_page"),(d=s.value)!=null&&d.isVip||k.fireEvent(Nt.PREMIUM_PROMOTION,{action:"show",item:"plugin_floatingball_page_get_trial",type:g.value==="1"?"1":"6"})},500))}),ve(u,ie=>{ie||i()}),ve(_,ie=>{ie&&k.reportShowEvent("plugin_floatingball_page_samelanguage_notice")}),Jt(X,()=>{P.value=!1,B.value=!1},{ignore:[H]});const Te=ie=>chrome.runtime.getURL(`public/images/${ie}.png`),Oe=async()=>{if(u.value){i(),nt(Ie.CONTENT_SCRIPT_TRANSLATE_PAGE,{scene:jt.HOVER_BALL,translate:!1});return}if(G(),I.value)return;await L()?(E(jt.HOVER_BALL),k.reportShowEvent("plugin_floatingball_login_guide_page")):(!x.value&&p(),nt(Ie.CONTENT_SCRIPT_TRANSLATE_PAGE,{scene:jt.HOVER_BALL,translate:!0}))},$e=ie=>{ie&&a(),!_.value&&!I.value&&!T.value&&!P.value&&(B.value=ie)};let je=0;const ze=()=>{je=Date.now()},Et=()=>{Date.now()-je<200&&(k.reportClickEvent("plugin_floatingball_page",u.value?"show_original":"translate"),Oe())},Re=(ie,d)=>{if(Q.value){K.value=!1;return}const b=ie.target.getBoundingClientRect();K.value=!0,Z.value={top:`${b.top+b.height/2}px`,right:"44px"},O.value=d},ce=()=>{W.value=!W.value;const ie=w("pageTranslation");ie.displayMode=W.value?un.SIDE_BY_SIDE:un.REPLACE,f({pageTranslation:ie}),l(ie.displayMode,ie.theme),nt(Ie.SET_IFRAME_TRANSLATE_PAGE_STYLE,{theme:ie.theme,displayMode:ie.displayMode}),nt(Ie.SET_OTHER_TABS_TRANSLATE_PAGE_STYLE,{theme:ie.theme,displayMode:ie.displayMode}),u.value||Oe(),k.reportClickEvent("plugin_floatingball_page",W.value?"open_show_billingual_translation":"close_show_billingual_translation")};function He(){var d;const ie=((d=o.value)==null?void 0:d.imageSites)||[];return Kt(location.href,ie)}const gt=async()=>{j.value=!1,dt(de.HOVER_BALL_MORE_TOOLS_CLICK,!0),K.value=!1,B.value=!1;let ie="",d="jumpto_translate_file";He()?(ie=`${fe.imagePage}?position=plugin_floatingball_jumpto_translate_image`,d="jumpto_translate_image"):ie=`${fe.fileTranslatePage}?position=plugin_floatingball_jumpto_translate_file`,qe(ie),k.reportClickEvent("plugin_floatingball_page",d)},et=()=>{qe(`${fe.priceUrl}?position=plugin_floatingball_page_get_trial`),k.fireEvent(Nt.PREMIUM_PROMOTION,{action:"click",item:"plugin_floatingball_page_get_trial",type:g.value==="1"?"1":"6"})},ft=()=>{K.value=!1,i(),nt(Ie.OPEN_POPUP),k.reportClickEvent("plugin_floatingball_page","settings")},Ke=()=>{K.value=!1,B.value=!1,qe(`${fe.feedBackPage}?source=plugin&entry=webpage_translate`),k.reportClickEvent("plugin_floatingball_page","feebback")},kt=()=>{T.value||(P.value=!0,k.reportShowEvent("plugin_floatingball_retention_page"),k.reportClickEvent("plugin_floatingball_page","close"))},wt=()=>{B.value=!1,P.value=!1},ae=ie=>{P.value=!1,B.value=!1,n("close",ie)},De=()=>{T.value=!1,nt(Ie.CLOSE_HOVER_BALL_ONBOARDING)},Qe=()=>{I.value=!1},ut=async()=>{await Ge(de.HOVER_BALL_BOARDING)===void 0&&document.visibilityState==="visible"&&A.value&&(dt(de.HOVER_BALL_BOARDING,!0),T.value=!0,k.reportShowEvent("plugin_floatingball_guide_page"))};function rt(ie,d){if(d==="local"&&ie[de.TEMP_CONFIGS]){const{newValue:b}=ie[de.TEMP_CONFIGS];b&&b.displayMode!==void 0&&(W.value=b.displayMode===un.SIDE_BY_SIDE)}d==="local"&&ie[de.HOVER_BALL_MORE_TOOLS_CLICK]&&(j.value=!1)}return xt(async()=>{ne.value=await Ge(de.HOVER_BALL_POSITION,window.innerHeight/3),Y.value=!0,await Ge(de.HOVER_BALL_MORE_TOOLS_CLICK)||(j.value=!0),ut(),await Ge(de.HOVER_BALL_BOARDING)===void 0&&document.addEventListener("visibilitychange",ut),chrome.storage.onChanged.addListener(rt)}),yn(()=>{document.removeEventListener("visibilitychange",ut),chrome.storage.onChanged.removeListener(rt)}),(ie,d)=>{var b;return F(),re(Ft,null,[Dt(y("div",{class:Je(["hover-ball-container",{hover:we.value}]),style:Ae({top:`${ne.value}px`,right:"1px"}),ref_key:"containerRef",ref:H,onMouseleave:d[5]||(d[5]=C=>$e(!1)),onMouseenter:d[6]||(d[6]=C=>$e(!0))},[(b=z(s))!=null&&b.isVip?ge("",!0):(F(),re("div",{key:0,onClick:et,class:"gift-ball-container",style:Ae({visibility:we.value?"visible":"hidden"}),onMouseenter:d[0]||(d[0]=C=>Re(C,z(h))),onMouseleave:d[1]||(d[1]=C=>K.value=!1),ref_key:"giftBallContainerRef",ref:te},[y("div",{class:"gift-image",style:Ae({backgroundImage:`url(${Te("gift")})`})},null,4)],36)),y("div",Ll,[y("div",{ref_key:"translateIconRef",ref:ue,onMouseenter:d[2]||(d[2]=C=>Re(C,z(u)?z(r)("translate.showOrigin"):z(r)("hoverBall.tips.translate",[ye.value]))),onMouseleave:d[3]||(d[3]=C=>K.value=!1),onMousedown:ze,onMouseup:Et,class:"translateIcon"},[oe(it,{style:Ae({rotate:we.value?"0deg":"90deg"}),icon:z(u)?"translated":"translate-text-white",size:20},null,8,["style","icon"])],544),y("div",{class:"otherIcons",ref_key:"otherIconsRef",ref:N},[(F(!0),re(Ft,null,hn(he.value,C=>(F(),re("div",{key:C.icon,style:{position:"relative"}},[oe(Ut,{size:26,icon:C.icon,onMouseenter:$=>Re($,C.tip),onMouseleave:d[4]||(d[4]=$=>K.value=!1),onClick:C.click},null,8,["icon","onMouseenter","onClick"]),C.icon==="moreTools"&&j.value?(F(),re("div",Rl)):ge("",!0)]))),128))],512)]),y("img",{class:"closeIcon",style:Ae({display:we.value?"block":"none"}),src:Te("close"),onClick:kt},null,12,Il),z(u)?(F(),re("img",{key:1,src:Te("translateSuccess"),class:"successIcon",style:Ae({top:`${24+J.value}px`,right:"2px"}),width:"10px",height:"10px"},null,12,Bl)):ge("",!0),P.value?(F(),Le(Qr,{key:2,source:"hover_ball",title:z(r)("hoverBall.close"),ref_key:"secondConfirmRef",ref:X,style:Ae(be.value),onClose:wt,onConfirm:ae,options:Se.value,class:"hover-ball-close-second-confirm"},null,8,["title","style","options"])):ge("",!0),z(T)?(F(),Le(ll,{key:3,onClose:De})):ge("",!0),z(I)&&!z(T)?(F(),Le(Kr,{key:4,source:"plugin_floatingball_login_guide_page",ref_key:"loginTipRef",ref:Ee,class:"login-tip-container",style:Ae([{right:"40px"},_e.value]),onClose:Qe},null,8,["style"])):ge("",!0)],38),[[yt,Y.value]]),K.value?(F(),re("div",{key:0,class:"hover-ball-tips",style:Ae([{transform:"translateY(-50%)"},Z.value])},pe(O.value),5)):ge("",!0),z(x)?(F(),Le(Jn,{key:1,class:"message-tip",scene:"plugin_floatingball_page_free_trial_limit",position:"right","report-page-name":"plugin_floatingball_page",style:Ae({top:`${ne.value+19+J.value}px`,position:"fixed",width:"300px",right:"43px",transform:"translateY(-50%)"}),onClose:d[7]||(d[7]=C=>x.value=!1)},null,8,["style"])):ge("",!0),z(_)?(F(),Le(Oi,{key:2,source:"plugin_floatingball_page_samelanguage_notice",position:"right",switchCanClick:!0,class:"message-tip",style:Ae({position:"fixed",width:"320px",top:`${ne.value+110+J.value}px`,right:"46px",transform:"translateY(-50%)"}),onSwitchLanguage:d[8]||(d[8]=()=>{ft(),$e(!1)}),onClose:d[9]||(d[9]=()=>{z(i)(),$e(!1)})},null,8,["style"])):ge("",!0)],64)}}}),kl=Ve(Nl,[["__scopeId","data-v-6a5bfcd4"]]),Fl={class:"translate-setting-container"},Ol={class:"setting-content"},Ml={class:"setting-section"},Pl={class:"setting-section-label"},$l={key:0,class:"setting-section"},Ul={class:"setting-section-label"},ql={class:"setting-footer"},Hl=Pe({__name:"TranslateSetting",props:{languageColumn:{default:1},source:{default:"textbox"}},emits:["close","settingChange"],setup(t,{emit:e}){const n=t,{t:r}=pt(),{userSettings:a,notifyUserSettings:s,getSettingByKey:o}=Xe(),{userInfo:u,contentScriptRefreshUserInfo:l}=Tt(),{useSelfTranslation:c,imageLanguageOptions:f}=ro(),w=e,T=D(""),A=D(),x=se(()=>n.source==="textbox"?r("translate.translateToTitle"):n.source==="image"?r("translate.imageTranslateToTitle"):r("translate.mailTranslateToTitle")),I=se(()=>n.source==="textbox"?"plugin_textbox_translate_page":n.source==="image"?"plugin_image_translate_page":"plugin_mail_translate_page"),L=se(()=>I.value),E=se(()=>n.source==="mail"?"plugin_mail_translate_setting":n.source==="image"?"plugin_image_translate_setting":"plugin_input_translate_setting"),_=se(()=>n.source==="image"?c.value:!0),p=()=>{w("close"),k.reportClickEvent(I.value,"settings_close")},i=()=>{let G;const H={textbox:fe.textBoxSettingPage,mail:fe.userCenterPage,image:fe.imageSettingPage}[n.source];if(u.value)G=`${H}?source=plugin`;else{const te=encodeURIComponent(`${H}?source=plugin&from=extensionLogin`);G=`${fe.loginUrl}?feature=${L.value}&cb=${te}`}qe(G),k.reportClickEvent(I.value,"more_settings")},h=(G,H=Hi)=>{const te=Zt(G,H);return te?te.value:fe.defaultLanguage},g=()=>{A.value=a.value.translationService,n.source==="textbox"?T.value=h(a.value.textboxTranslation.targetLanguage):n.source==="mail"?T.value=h(a.value.targetLanguage):n.source==="image"&&(T.value=h(a.value.imageTranslation.targetLanguage,f.value))};return xt(async()=>{g(),await l(),g(),ve(A,G=>{s({translationService:G}),w("settingChange")}),ve(T,G=>{if(n.source==="textbox"){const H=o("textboxTranslation");H.targetLanguage=G,s({textboxTranslation:H})}else if(n.source==="mail")s({targetLanguage:G});else if(n.source==="image"){const H=o("imageTranslation");H.targetLanguage=G,s({imageTranslation:H})}w("settingChange")})}),(G,H)=>(F(),re("div",Fl,[oe(Ut,{class:"close-button",icon:"close",size:24,onClick:p}),y("div",Ol,[y("div",Ml,[y("div",Pl,pe(x.value),1),oe(Ua,{source:L.value,nativeSelect:!1,"has-icon":!0,column:G.languageColumn,size:"small","is-narrower":!0,modelValue:T.value,"onUpdate:modelValue":H[0]||(H[0]=te=>T.value=te)},null,8,["source","column","modelValue"])]),_.value?(F(),re("div",$l,[y("div",Ul,pe(G.$t("translate.serviceLabel")),1),oe(ao,{"utm-source":E.value,large:!1,modelValue:A.value,"onUpdate:modelValue":H[1]||(H[1]=te=>A.value=te),"has-label":!1},null,8,["utm-source","modelValue"])])):ge("",!0)]),y("div",ql,[y("div",{class:"more-setting-link",onClick:i},pe(G.$t("common.moreSetting")),1)])]))}}),Ya=Ve(Hl,[["__scopeId","data-v-06196b44"]]),Gl={class:"toast-tip-wrapper"},Vl={class:"toast-tip"},Wl={class:"tip-content"},zl=Pe({__name:"ToastTip",props:{position:{default:"bottom"},arrowOffset:{default:"50%"}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,a=se(()=>{const o=n.arrowOffset;return n.position==="top"||n.position==="bottom"?{left:o,transform:"translateX(-50%)"}:{top:o,transform:"translateY(-50%)"}});function s(){r("close")}return(o,u)=>(F(),re("div",Gl,[y("div",Vl,[y("div",Wl,[fr(o.$slots,"default",{},void 0,!0)]),oe(it,{class:"icon-close",icon:"close",size:16,onClick:s}),y("div",{class:Je(["arrow",`arrow-${o.position}`]),style:Ae(a.value)},null,6)])]))}}),jl=Ve(zl,[["__scopeId","data-v-fa11d61e"]]);var _a={exports:{}},Is;function Xl(){return Is||(Is=1,function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(E,_){var p=E[0],i=E[1],h=E[2],g=E[3];p+=(i&h|~i&g)+_[0]-680876936|0,p=(p<<7|p>>>25)+i|0,g+=(p&i|~p&h)+_[1]-389564586|0,g=(g<<12|g>>>20)+p|0,h+=(g&p|~g&i)+_[2]+606105819|0,h=(h<<17|h>>>15)+g|0,i+=(h&g|~h&p)+_[3]-1044525330|0,i=(i<<22|i>>>10)+h|0,p+=(i&h|~i&g)+_[4]-176418897|0,p=(p<<7|p>>>25)+i|0,g+=(p&i|~p&h)+_[5]+1200080426|0,g=(g<<12|g>>>20)+p|0,h+=(g&p|~g&i)+_[6]-1473231341|0,h=(h<<17|h>>>15)+g|0,i+=(h&g|~h&p)+_[7]-45705983|0,i=(i<<22|i>>>10)+h|0,p+=(i&h|~i&g)+_[8]+1770035416|0,p=(p<<7|p>>>25)+i|0,g+=(p&i|~p&h)+_[9]-1958414417|0,g=(g<<12|g>>>20)+p|0,h+=(g&p|~g&i)+_[10]-42063|0,h=(h<<17|h>>>15)+g|0,i+=(h&g|~h&p)+_[11]-1990404162|0,i=(i<<22|i>>>10)+h|0,p+=(i&h|~i&g)+_[12]+1804603682|0,p=(p<<7|p>>>25)+i|0,g+=(p&i|~p&h)+_[13]-40341101|0,g=(g<<12|g>>>20)+p|0,h+=(g&p|~g&i)+_[14]-1502002290|0,h=(h<<17|h>>>15)+g|0,i+=(h&g|~h&p)+_[15]+1236535329|0,i=(i<<22|i>>>10)+h|0,p+=(i&g|h&~g)+_[1]-165796510|0,p=(p<<5|p>>>27)+i|0,g+=(p&h|i&~h)+_[6]-1069501632|0,g=(g<<9|g>>>23)+p|0,h+=(g&i|p&~i)+_[11]+643717713|0,h=(h<<14|h>>>18)+g|0,i+=(h&p|g&~p)+_[0]-373897302|0,i=(i<<20|i>>>12)+h|0,p+=(i&g|h&~g)+_[5]-701558691|0,p=(p<<5|p>>>27)+i|0,g+=(p&h|i&~h)+_[10]+38016083|0,g=(g<<9|g>>>23)+p|0,h+=(g&i|p&~i)+_[15]-660478335|0,h=(h<<14|h>>>18)+g|0,i+=(h&p|g&~p)+_[4]-405537848|0,i=(i<<20|i>>>12)+h|0,p+=(i&g|h&~g)+_[9]+568446438|0,p=(p<<5|p>>>27)+i|0,g+=(p&h|i&~h)+_[14]-1019803690|0,g=(g<<9|g>>>23)+p|0,h+=(g&i|p&~i)+_[3]-187363961|0,h=(h<<14|h>>>18)+g|0,i+=(h&p|g&~p)+_[8]+1163531501|0,i=(i<<20|i>>>12)+h|0,p+=(i&g|h&~g)+_[13]-1444681467|0,p=(p<<5|p>>>27)+i|0,g+=(p&h|i&~h)+_[2]-51403784|0,g=(g<<9|g>>>23)+p|0,h+=(g&i|p&~i)+_[7]+1735328473|0,h=(h<<14|h>>>18)+g|0,i+=(h&p|g&~p)+_[12]-1926607734|0,i=(i<<20|i>>>12)+h|0,p+=(i^h^g)+_[5]-378558|0,p=(p<<4|p>>>28)+i|0,g+=(p^i^h)+_[8]-2022574463|0,g=(g<<11|g>>>21)+p|0,h+=(g^p^i)+_[11]+1839030562|0,h=(h<<16|h>>>16)+g|0,i+=(h^g^p)+_[14]-35309556|0,i=(i<<23|i>>>9)+h|0,p+=(i^h^g)+_[1]-1530992060|0,p=(p<<4|p>>>28)+i|0,g+=(p^i^h)+_[4]+1272893353|0,g=(g<<11|g>>>21)+p|0,h+=(g^p^i)+_[7]-155497632|0,h=(h<<16|h>>>16)+g|0,i+=(h^g^p)+_[10]-1094730640|0,i=(i<<23|i>>>9)+h|0,p+=(i^h^g)+_[13]+681279174|0,p=(p<<4|p>>>28)+i|0,g+=(p^i^h)+_[0]-358537222|0,g=(g<<11|g>>>21)+p|0,h+=(g^p^i)+_[3]-722521979|0,h=(h<<16|h>>>16)+g|0,i+=(h^g^p)+_[6]+76029189|0,i=(i<<23|i>>>9)+h|0,p+=(i^h^g)+_[9]-640364487|0,p=(p<<4|p>>>28)+i|0,g+=(p^i^h)+_[12]-421815835|0,g=(g<<11|g>>>21)+p|0,h+=(g^p^i)+_[15]+530742520|0,h=(h<<16|h>>>16)+g|0,i+=(h^g^p)+_[2]-995338651|0,i=(i<<23|i>>>9)+h|0,p+=(h^(i|~g))+_[0]-198630844|0,p=(p<<6|p>>>26)+i|0,g+=(i^(p|~h))+_[7]+1126891415|0,g=(g<<10|g>>>22)+p|0,h+=(p^(g|~i))+_[14]-1416354905|0,h=(h<<15|h>>>17)+g|0,i+=(g^(h|~p))+_[5]-57434055|0,i=(i<<21|i>>>11)+h|0,p+=(h^(i|~g))+_[12]+1700485571|0,p=(p<<6|p>>>26)+i|0,g+=(i^(p|~h))+_[3]-1894986606|0,g=(g<<10|g>>>22)+p|0,h+=(p^(g|~i))+_[10]-1051523|0,h=(h<<15|h>>>17)+g|0,i+=(g^(h|~p))+_[1]-2054922799|0,i=(i<<21|i>>>11)+h|0,p+=(h^(i|~g))+_[8]+1873313359|0,p=(p<<6|p>>>26)+i|0,g+=(i^(p|~h))+_[15]-30611744|0,g=(g<<10|g>>>22)+p|0,h+=(p^(g|~i))+_[6]-1560198380|0,h=(h<<15|h>>>17)+g|0,i+=(g^(h|~p))+_[13]+1309151649|0,i=(i<<21|i>>>11)+h|0,p+=(h^(i|~g))+_[4]-145523070|0,p=(p<<6|p>>>26)+i|0,g+=(i^(p|~h))+_[11]-1120210379|0,g=(g<<10|g>>>22)+p|0,h+=(p^(g|~i))+_[2]+718787259|0,h=(h<<15|h>>>17)+g|0,i+=(g^(h|~p))+_[9]-343485551|0,i=(i<<21|i>>>11)+h|0,E[0]=p+E[0]|0,E[1]=i+E[1]|0,E[2]=h+E[2]|0,E[3]=g+E[3]|0}function s(E){var _=[],p;for(p=0;p<64;p+=4)_[p>>2]=E.charCodeAt(p)+(E.charCodeAt(p+1)<<8)+(E.charCodeAt(p+2)<<16)+(E.charCodeAt(p+3)<<24);return _}function o(E){var _=[],p;for(p=0;p<64;p+=4)_[p>>2]=E[p]+(E[p+1]<<8)+(E[p+2]<<16)+(E[p+3]<<24);return _}function u(E){var _=E.length,p=[1732584193,-271733879,-1732584194,271733878],i,h,g,G,H,te;for(i=64;i<=_;i+=64)a(p,s(E.substring(i-64,i)));for(E=E.substring(i-64),h=E.length,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<h;i+=1)g[i>>2]|=E.charCodeAt(i)<<(i%4<<3);if(g[i>>2]|=128<<(i%4<<3),i>55)for(a(p,g),i=0;i<16;i+=1)g[i]=0;return G=_*8,G=G.toString(16).match(/(.*?)(.{0,8})$/),H=parseInt(G[2],16),te=parseInt(G[1],16)||0,g[14]=H,g[15]=te,a(p,g),p}function l(E){var _=E.length,p=[1732584193,-271733879,-1732584194,271733878],i,h,g,G,H,te;for(i=64;i<=_;i+=64)a(p,o(E.subarray(i-64,i)));for(E=i-64<_?E.subarray(i-64):new Uint8Array(0),h=E.length,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<h;i+=1)g[i>>2]|=E[i]<<(i%4<<3);if(g[i>>2]|=128<<(i%4<<3),i>55)for(a(p,g),i=0;i<16;i+=1)g[i]=0;return G=_*8,G=G.toString(16).match(/(.*?)(.{0,8})$/),H=parseInt(G[2],16),te=parseInt(G[1],16)||0,g[14]=H,g[15]=te,a(p,g),p}function c(E){var _="",p;for(p=0;p<4;p+=1)_+=r[E>>p*8+4&15]+r[E>>p*8&15];return _}function f(E){var _;for(_=0;_<E.length;_+=1)E[_]=c(E[_]);return E.join("")}f(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function E(_,p){return _=_|0||0,_<0?Math.max(_+p,0):Math.min(_,p)}ArrayBuffer.prototype.slice=function(_,p){var i=this.byteLength,h=E(_,i),g=i,G,H,te,ue;return p!==n&&(g=E(p,i)),h>g?new ArrayBuffer(0):(G=g-h,H=new ArrayBuffer(G),te=new Uint8Array(H),ue=new Uint8Array(this,h,G),te.set(ue),H)}}();function w(E){return/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E))),E}function T(E,_){var p=E.length,i=new ArrayBuffer(p),h=new Uint8Array(i),g;for(g=0;g<p;g+=1)h[g]=E.charCodeAt(g);return _?h:i}function A(E){return String.fromCharCode.apply(null,new Uint8Array(E))}function x(E,_,p){var i=new Uint8Array(E.byteLength+_.byteLength);return i.set(new Uint8Array(E)),i.set(new Uint8Array(_),E.byteLength),i}function I(E){var _=[],p=E.length,i;for(i=0;i<p-1;i+=2)_.push(parseInt(E.substr(i,2),16));return String.fromCharCode.apply(String,_)}function L(){this.reset()}return L.prototype.append=function(E){return this.appendBinary(w(E)),this},L.prototype.appendBinary=function(E){this._buff+=E,this._length+=E.length;var _=this._buff.length,p;for(p=64;p<=_;p+=64)a(this._hash,s(this._buff.substring(p-64,p)));return this._buff=this._buff.substring(p-64),this},L.prototype.end=function(E){var _=this._buff,p=_.length,i,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g;for(i=0;i<p;i+=1)h[i>>2]|=_.charCodeAt(i)<<(i%4<<3);return this._finish(h,p),g=f(this._hash),E&&(g=I(g)),this.reset(),g},L.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},L.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},L.prototype.setState=function(E){return this._buff=E.buff,this._length=E.length,this._hash=E.hash,this},L.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},L.prototype._finish=function(E,_){var p=_,i,h,g;if(E[p>>2]|=128<<(p%4<<3),p>55)for(a(this._hash,E),p=0;p<16;p+=1)E[p]=0;i=this._length*8,i=i.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(i[2],16),g=parseInt(i[1],16)||0,E[14]=h,E[15]=g,a(this._hash,E)},L.hash=function(E,_){return L.hashBinary(w(E),_)},L.hashBinary=function(E,_){var p=u(E),i=f(p);return _?I(i):i},L.ArrayBuffer=function(){this.reset()},L.ArrayBuffer.prototype.append=function(E){var _=x(this._buff.buffer,E),p=_.length,i;for(this._length+=E.byteLength,i=64;i<=p;i+=64)a(this._hash,o(_.subarray(i-64,i)));return this._buff=i-64<p?new Uint8Array(_.buffer.slice(i-64)):new Uint8Array(0),this},L.ArrayBuffer.prototype.end=function(E){var _=this._buff,p=_.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h,g;for(h=0;h<p;h+=1)i[h>>2]|=_[h]<<(h%4<<3);return this._finish(i,p),g=f(this._hash),E&&(g=I(g)),this.reset(),g},L.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},L.ArrayBuffer.prototype.getState=function(){var E=L.prototype.getState.call(this);return E.buff=A(E.buff),E},L.ArrayBuffer.prototype.setState=function(E){return E.buff=T(E.buff,!0),L.prototype.setState.call(this,E)},L.ArrayBuffer.prototype.destroy=L.prototype.destroy,L.ArrayBuffer.prototype._finish=L.prototype._finish,L.ArrayBuffer.hash=function(E,_){var p=l(new Uint8Array(E)),i=f(p);return _?I(i):i},L})}(_a)),_a.exports}var Yl=Xl();const Kl=lo(Yl),Ql=["image/jpeg","image/png","image/bmp"],Po=3.7*1024*1024;function Jl(t){return Ql.includes(t)}function Zl(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(36)}function ec(t,e,n){let r="";if(e){const a=e.headers.get("Content-Disposition");if(a){const s=a.match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/i);s&&s[1]&&(r=decodeURIComponent(s[1]))}}if(!r)try{const o=new URL(t).pathname.split("/"),u=o[o.length-1];u&&/\.[a-zA-Z0-9]{2,4}$/.test(u)&&(r=decodeURIComponent(u))}catch{const s=t.match(/[^/]+\.[a-zA-Z]{2,4}(?=[?#]|$)/);s&&(r=s[0])}if(!r){const a=(n==null?void 0:n.type)||"image/png",o={"image/jpeg":"jpg","image/jpg":"jpg","image/png":"png","image/bmp":"bmp","image/gif":"gif","image/webp":"webp","image/svg+xml":"svg","image/avif":"avif","image/heic":"heic","image/heif":"heif","image/tiff":"tiff"}[a]||"jpg";r=`image_${Zl(t)}.${o}`}return r}function tc(t){const e=new Kl.ArrayBuffer,n=2097152,r=Math.ceil(t.byteLength/n);for(let s=0;s<r;s++){const o=s*n,u=Math.min(o+n,t.byteLength),l=t.slice(o,u);e.append(l)}const a=e.end();return e.destroy(),a}async function nc(t,e=.92){return new Promise((n,r)=>{const a=new Image,s=URL.createObjectURL(t);a.onload=function(){try{const o=document.createElement("canvas"),u=o.getContext("2d");if(!u){r(new Error("Failed to get canvas context"));return}o.width=a.width,o.height=a.height,u.fillStyle="#FFFFFF",u.fillRect(0,0,o.width,o.height),u.drawImage(a,0,0),o.toBlob(l=>{URL.revokeObjectURL(s),l?n(l):r(new Error("Failed to convert to JPG"))},"image/jpeg",e)}catch(o){URL.revokeObjectURL(s),r(o)}},a.onerror=function(){URL.revokeObjectURL(s),r(new Error(`Failed to load image (${t.type})`))},a.src=s})}async function rc(t,e=Po){return new Promise((n,r)=>{if(t.size<=e){n(t);return}const a=new Image,s=URL.createObjectURL(t);a.onload=function(){try{const o=document.createElement("canvas"),u=o.getContext("2d");if(!u){r(new Error("Failed to get canvas context"));return}let l=a.width,c=a.height,f=t.size>e?Math.sqrt(e/t.size):1,w=!1;const T=(A=.92)=>{o.width=l,o.height=c,u.fillStyle="#FFFFFF",u.fillRect(0,0,l,c),u.drawImage(a,0,0,l,c),o.toBlob(x=>{if(!x){URL.revokeObjectURL(s),r(new Error("Failed to compress image"));return}if(x.size<=e){URL.revokeObjectURL(s),n(x);return}if(l<20||c<20||w){if(A>.2){T(A-.1);return}URL.revokeObjectURL(s),r(new Error("Image size exceeds limit after maximum compression"));return}const L=x.size>e?Math.sqrt(e/x.size):1;if(L>=f?(f-=.1,w=!0):f=L,f<0){URL.revokeObjectURL(s),r(new Error("Image size exceeds limit after maximum compression"));return}l=Math.ceil(a.width*f),c=Math.ceil(a.height*f),T(A)},"image/jpeg",A)};T()}catch(o){URL.revokeObjectURL(s),r(o)}},a.onerror=function(){URL.revokeObjectURL(s),r(new Error("Failed to load image"))},a.src=s})}async function ac(t){const n=new Promise((a,s)=>{setTimeout(()=>{s(new Error("timeout"))},3e4)}),r=(async()=>{let a,s;try{if(s=await fetch(t),!s.ok)return{code:500,msg:`HTTP ${s.status}: ${s.statusText}`};a=await s.blob()}catch(o){return{code:ke.REQUEST_TIMEOUT,msg:(o==null?void 0:o.message)??"image_get_failed"}}try{if(a.type==="image/gif")return{code:100,msg:"not supported image type"};let o=ec(t,s,a);if(!Jl(a.type)){Me.info(` ${a.type} JPG...`);try{a=await nc(a),o=o.replace(/\.[^.]+$/,".jpg"),Me.info("")}catch(f){Me.error(":",f)}}if(a.size>Po){Me.info(` ${(a.size/1024/1024).toFixed(2)}MB ...`);try{const f=a.size;a=await rc(a),Me.info(`: ${(f/1024/1024).toFixed(2)}MB  ${(a.size/1024/1024).toFixed(2)}MB`)}catch(f){return Me.error(":",f),{code:500,msg:(f==null?void 0:f.message)??"network_error"}}}const u=await a.arrayBuffer(),l=tc(u);return{code:0,msg:"success",info:{blobUrl:URL.createObjectURL(a),md5:l,filename:o}}}catch(o){return{code:500,msg:(o==null?void 0:o.message)??"network_error"}}})();try{return await Promise.race([r,n])}catch(a){return(a==null?void 0:a.message)==="timeout"?{code:400,msg:"timeout"}:{code:500,msg:(a==null?void 0:a.message)??"network_error"}}}function sc(t){location.host==="x.com"&&(t.style.opacity="1")}function oc(t){location.host==="x.com"&&(t.style.opacity="0")}function Bs(t,e){const n={src:t.src,srcset:t.getAttribute("srcset"),sizes:t.getAttribute("sizes"),loading:t.getAttribute("loading"),dataSrc:t.getAttribute("data-src"),dataLazy:t.getAttribute("data-lazy"),dataSrcset:t.getAttribute("data-srcset"),pictureSourceElements:[]},r=t.closest("picture");return r&&r.querySelectorAll("source").forEach(s=>{n.pictureSourceElements.push({srcset:s.getAttribute("srcset")||"",media:s.getAttribute("media"),type:s.getAttribute("type"),sizes:s.getAttribute("sizes")}),s.remove()}),t.removeAttribute("srcset"),t.removeAttribute("sizes"),t.removeAttribute("data-src"),t.removeAttribute("data-lazy"),t.removeAttribute("data-srcset"),t.removeAttribute("loading"),t.offsetWidth,t.src=e,sc(t),n}function Ca(t,e){const n=t.closest("picture");n&&e.pictureSourceElements.length>0&&e.pictureSourceElements.forEach(r=>{const a=document.createElement("source");r.srcset&&a.setAttribute("srcset",r.srcset),r.media&&a.setAttribute("media",r.media),r.type&&a.setAttribute("type",r.type),r.sizes&&a.setAttribute("sizes",r.sizes),n.insertBefore(a,t)}),e.srcset&&t.setAttribute("srcset",e.srcset),e.sizes&&t.setAttribute("sizes",e.sizes),e.dataSrc&&t.setAttribute("data-src",e.dataSrc),e.dataLazy&&t.setAttribute("data-lazy",e.dataLazy),e.dataSrcset&&t.setAttribute("data-srcset",e.dataSrcset),e.loading&&t.setAttribute("loading",e.loading),t.src=e.src,oc(t)}function ic(t){try{const r=new URL(t.src,window.location.href).pathname.match(/\.([A-Za-z0-9]+)(?:$|\/)/);if(r)return r[1].toLowerCase()}catch{}if(t.src.startsWith("data:")){const e=t.src.match(/^data:(image\/([a-zA-Z0-9]+));/);if(e)return e[2].toLowerCase()}return""}function uc(t){const e=window.getComputedStyle(t),n=e.position,r=e.zIndex;let a=null;n!=="static"&&r!=="auto"&&(a=parseInt(r,10));let s=null,o=t.parentElement;for(;o&&o!==document.body;){const l=window.getComputedStyle(o),c=l.position,f=l.zIndex;if(c!=="static"&&f!=="auto"){s=parseInt(f,10);break}o=o.parentElement}return{own:a,inherited:s,effective:a!==null?a:s!==null?s:0}}const lc=["onMouseenter","onMouseleave"],cc=["dir"],dc=["onMouseenter","onMouseleave","onClick"],pc=["src"],gc=["onMouseenter","onMouseleave","onClick","title"],fc=["onClick","onMouseenter","onMouseleave"],Pn=100,hc=200,Ns=45,_r=5,mc=Pe({__name:"ImageTranslateBall",emits:["close"],setup(t,{emit:e}){const{userSettings:n}=Xe(),{userInfo:r,contentScriptRefreshUserInfo:a}=Tt(),{setImageTargetInitLanguage:s,imageLanguageOptions:o,useSelfTranslation:u,imageTranslationEngineName:l}=ro(),{refreshPaymentDialogShow:c}=fn(),{t:f}=pt(),w=e;let T=!1;const A=new Map;let x,I=null,L=null;const E=Ue("ballContentContainerRef"),_=Ue("secondConfirmRef"),p=Ue("imageTranslateSettingRef"),i=Ue("popupContainerRef"),h=Ue("tipRef"),g=D(null),G=D({}),H=D(new Map),te=[{value:"1",label:f("hoverBall.closeOneTime")},{value:"2",label:f("hoverBall.disableOnePage")},{value:"3",label:f("hoverBall.disable")}],ue=D(""),X=D({});function Ee(){return Yt()?{left:"0px"}:{right:"0px"}}function B(){return Yt()?"16px":"calc(100% - 16px)"}const N=se(()=>{var m;return n.value.imageTranslation.enable&&!Kt(location.href,n.value.imageTranslation.blockedSites)&&(!((m=r.value)!=null&&m.region)||As.includes(r.value.region))}),P=se(()=>Array.from(H.value.entries()).filter(([,m])=>N.value&&m.show&&!m.smallSize||m.status==="translating"||m.status==="fail").map(([m,v])=>({...v,imgEl:m}))),W=se(()=>g.value?H.value.get(g.value):null);function j(m){if(!g.value||!H.value.get(g.value))return null;const R=P.value.findIndex(M=>M.imgEl===g.value);return R!==-1&&m.value&&m.value.length>R?m.value[R]:null}const K=se(()=>j(E)),O=se(()=>j(_)),Z=se(()=>j(p)),Y=se(()=>j(i)),Se=se(()=>j(h)),ne=se(()=>{const m=n.value.imageTranslation.targetLanguage,v=Zt(m,o.value);return v?f(`language.${v.value}`)||v.label:f("language.en")});Jt(Y,m=>{g.value&&(m.target===g.value&&W.value?(W.value.expanded=!1,wt(W.value)):De(g.value))},{ignore:[K]});function V(){_t(()=>{var Vt,at;const m={};let v=0,R=0;if(!K.value)return;(Vt=W.value)!=null&&Vt.secondConfirmShow&&O.value&&(v=O.value.$el.getBoundingClientRect().height,R=O.value.$el.getBoundingClientRect().width),(at=W.value)!=null&&at.imageTranslateSettingShow&&Z.value&&(v=Z.value.$el.getBoundingClientRect().height,R=Z.value.$el.getBoundingClientRect().width);const{bottom:M,right:me,left:Ce}=K.value.getBoundingClientRect(),lt=6,Ot=40,Mt=10,tt=window.innerWidth;G.value={},M+lt+v>window.innerHeight?m.bottom=`${Ot}px`:m.top=`calc(100% + ${lt}px)`,Yt()?m.right=me<R?`${me-R-Mt}px`:"0px":m.left=me+R>tt?`${tt-Ce-R-Mt}px`:"0px",G.value=m})}function Q(m){const v=m.imgEl instanceof Element?uc(m.imgEl).effective:999,R=m.status==="translating"?v+1:2147483647;return Yt()?{left:`${m.x}px`,top:`${m.y}px`,zIndex:R}:{right:`${m.x}px`,top:`${m.y}px`,zIndex:R}}const he=(m,v,R)=>{if(!K.value)return;const M=H.value.get(v);if(!M||M.toastMessage||M.exceedLimitTipShow||M.status==="translating")return;const me=K.value.getBoundingClientRect(),Ce=m.target.getBoundingClientRect(),lt=me.right-Ce.right,Ot=Ce.left-me.left,Mt=Ce.top;X.value={},ue.value=R,M.showTips=!0,M.guidShow=!1,_t(()=>{if(!Se.value)return;const tt=Se.value.clientWidth,Vt=Se.value.clientHeight,at=10,bt=window.innerWidth;if(Yt()){const Lt=Ce.left-(tt-Ce.width)/2;if(Lt+tt>bt-at){const Rt=Lt+tt-(bt-at);X.value={left:`${Ot-(tt-Ce.width)/2-Rt}px`}}else if(Lt<at){const Rt=at-Lt;X.value={left:`${Ot-(tt-Ce.width)/2+Rt}px`}}else X.value={left:`${Ot-(tt-Ce.width)/2}px`}}else{const Lt=Ce.right+(tt-Ce.width)/2;if(Lt-tt<at){const Rt=at-(Lt-tt);X.value={right:`${lt-(tt-Ce.width)/2-Rt}px`}}else if(Lt>bt-at){const Rt=Lt-(bt-at);X.value={right:`${lt-(tt-Ce.width)/2+Rt}px`}}else X.value={right:`${lt-(tt-Ce.width)/2}px`}}Vt>Mt-at?X.value.top=`${me.height+at}px`:X.value.top=`-${me.height+at}px`})},J=m=>{const v=H.value.get(m);v&&(v.showTips=!1)},be=()=>{H.value.forEach(m=>{m.exceedLimitTipShow=!1,m.status="idle"})};function _e(){setTimeout(()=>{c.value=!0},1e3)}const ye=m=>{const v=H.value.get(m);v&&(v.status==="fail"&&k.reportClickEvent("plugin_image_translate_error_page","close"),v.toastMessage="",v.status="idle")};function we(m,v){const R=`${n.value.imageTranslation.targetLanguage}-${l.value}`,M=A.get(m);M?M.set(R,v):A.set(m,new Map([[R,v]]))}function Fe(m){const v=`${n.value.imageTranslation.targetLanguage}-${l.value}`,R=A.get(m);return R?R.get(v):null}function Te(m,v=f("imageBall.translateFail")){m.toastMessage=v,m.status="fail",k.reportShowEvent("plugin_image_translate_error_page")}const Oe=m=>{const v=H.value.get(m);v&&((v.status==="idle"||v.status==="fail")&&k.reportClickEvent("plugin_image_translate_page","translate"),v.status==="success"?$e(m):je(m))},$e=m=>{const v=H.value.get(m);v&&v.status==="success"&&(v.originalState&&Ca(m,v.originalState),v.status="idle")},je=async m=>{var vr,Er;const v=H.value.get(m);if(!v||v.status==="translating")return;if(a(),ae(v),wt(v),v.toastMessage="",!r.value){const na=encodeURIComponent(`${fe.pluginDescPage}?from=extensionLogin`);qe(`${fe.loginUrl}?feature=plugin_image_translate&position=plugin_floatingball_translate_image&cb=${na}`);return}if(v.expanded=!1,v.status="translating",r.value.region&&!As.includes(r.value.region)){v.toastMessage=f("imageBall.regionNotSupport"),v.status="fail",k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"check_region",status:"failed_region_not_support"});return}k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"check_region",status:"success"});const R=Date.now();k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"web_image_download",status:"processing"});const M=await ac(m.src),me=M.info;if(M.code!==0||!me){k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"web_image_download",status:`failed_${M.msg}`,duration:Date.now()-R}),M.code===100?Te(v,f("imageBall.notSupportedGif")):M.code===ke.REQUEST_TIMEOUT?Te(v,f("imageBall.imageGetFailed")):M.code===400?Te(v,f("imageBall.imageGetTimeout")):Te(v);return}k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"web_image_download",status:"success",duration:Date.now()-R});const{blobUrl:Ce,md5:lt,filename:Ot}=me,Mt=Fe(lt);if(Mt){v.originalState=Bs(m,Mt),v.status="success";return}const tt=await nt(Ie.GET_IMAGE_TRANSLATE_COUNT,r.value);if(tt==null){Te(v);return}if(tt===0){(vr=r.value)!=null&&vr.isVip?v.toastMessage=f("imageBall.vipLimitTip"):(v.exceedLimitTipShow=!0,k.reportShowEvent("plugin_image_translate_text_link")),v.status="fail";return}const Vt=Gi(n.value.imageTranslation.targetLanguage,o.value,u.value),at=ur(),bt=await nt(Ie.UPLOAD_IMAGE_REQUEST,{imageUrl:Ce,filename:Ot,md5:lt,requestId:at,userProperties:k.userProperties,reportParams:k.commonParams,to:Vt}),Lt=(Er=bt.data)==null?void 0:Er.fileUuid;if(bt.code!==ke.SUCCESS||!Lt){bt.code===ke.REQUEST_TIMEOUT?Te(v,f("imageBall.imageGetTimeout")):Te(v);return}const Rt=await nt(Ie.TRANSLATE_IMAGE_REQUEST,{translateEngine:u.value?"self_engine":"youdao",fileUuid:Lt,filename:Ot,md5:lt,to:Vt,engineName:l.value,requestId:at,isVip:r.value.isVip,region:r.value.region||"",userProperties:k.userProperties,reportParams:k.commonParams}),er=Rt.data;if(Rt.code!==ke.SUCCESS||!er){Rt.code===ke.REQUEST_TIMEOUT?Te(v,f("imageBall.imageGetTimeout")):Te(v);return}const Dn=()=>{m.removeEventListener("error",Dn),m.removeEventListener("load",Sn),v.status="fail",v.originalState&&Ca(m,v.originalState),Te(v)},Sn=()=>{m.removeEventListener("load",Sn),m.removeEventListener("error",Dn),we(lt,tr),v.status="success"};m.addEventListener("load",Sn),m.addEventListener("error",Dn);const tr=decodeURIComponent(er.resultFileUrl);v.originalState=Bs(m,tr),I!==m&&ze(m),m.isConnected||(Re(m),A.delete(lt))};function ze(m){const v=H.value.get(m);v&&(v.toastMessage||v.exceedLimitTipShow||v.status==="success"||v.status==="fail"?v.show=!1:v.status==="idle"&&Re(m))}function Et(m){const v=m[m.length-1];if(!v)return;const R=v.target,M=H.value.get(R);if(!M)return;M.show=!1;let me=0,Ce=0,lt=0;const Ot=2,Mt=50,tt=()=>{if(!R.isConnected||!H.value.has(R))return;const Vt=R.getBoundingClientRect(),at=Vt.width,bt=Vt.height;if(Math.abs(at-me)<1&&Math.abs(bt-Ce)<1?lt++:(lt=0,me=at,Ce=bt),lt>=Ot){const Lt=at<Pn||bt<Pn;M.smallSize=Lt,M.show=!0,He(M,Vt);return}setTimeout(tt,Mt)};setTimeout(tt,Mt)}function Re(m){var R;const v=H.value.get(m);v&&((R=v.imageSizeObserver)==null||R.disconnect(),v.imageSizeObserver=null,H.value.delete(m))}function ce(m){const v=m.getBoundingClientRect(),R=v.width<Pn||v.height<Pn,M=new ResizeObserver(Et);M.observe(m),H.value.set(m,{key:`${Date.now()}_${Math.random()}`,x:Yt()?v.left+_r:document.documentElement.clientWidth-v.right+_r,y:v.bottom-Ns,show:!0,expanded:!1,status:"idle",secondConfirmShow:!1,imageTranslateSettingShow:!1,hoverImg:!0,imgEl:m,popupCloseClick:!1,showTips:!1,exceedLimitTipShow:!1,guidShow:T&&!R,toastMessage:"",smallSize:R,imageSizeObserver:M}),!R&&N.value&&(T&&k.reportShowEvent("plugin_image_translate_first_time_guide"),dt(de.IMAGE_TRANSLATE_BALL_GUID_SHOW,!0),T=!1,k.reportShowEvent("plugin_image_translate_entry"))}function He(m,v){m.x=Yt()?v.left+_r:document.documentElement.clientWidth-v.right+_r,m.y=v.bottom-Ns}function gt(m){const v=m.target;if(x&&clearTimeout(x),ic(v)==="gif")return;I=v,g.value=v,H.value.forEach(M=>{M.status==="idle"&&M.imgEl!==v&&M.show&&Re(M.imgEl)});const R=H.value.get(v);R&&(R.hoverImg=!0),x=setTimeout(()=>{const M=v.getBoundingClientRect(),me=M.width<Pn||M.height<Pn;if(!R)ce(v);else{const Ce=R.show;R.show=!0,R.smallSize=me,He(R,M),!Ce&&!me&&k.reportShowEvent("plugin_image_translate_entry")}},hc)}function et(m){x&&(clearTimeout(x),x=void 0),I=null;const v=m.target,R=H.value.get(v);R&&(R.hoverImg=!1,setTimeout(()=>{!R.expanded&&ze(v)},10))}async function ft(m){L=m.target}function Ke(m){const v=H.value.get(m);v&&v.status!=="translating"&&N.value&&(v.expanded===!1&&k.reportShowEvent("plugin_image_translate_page"),v.expanded=!0)}function kt(m){const v=H.value.get(m);if(v&&!(v.imageTranslateSettingShow||v.secondConfirmShow)){if(v.expanded=!1,v.popupCloseClick){v.popupCloseClick=!1;return}setTimeout(()=>{!v.hoverImg&&ze(m)},10)}}const wt=m=>{m.secondConfirmShow=!1,m.imageTranslateSettingShow=!1},ae=m=>{m.exceedLimitTipShow=!1,m.guidShow=!1,m.showTips=!1},De=m=>{const v=H.value.get(m);v&&(v.popupCloseClick=!0,v.expanded=!1,wt(v),ze(m))};function Qe(m){const v=H.value.get(m);if(v){if(v.imageTranslateSettingShow){v.imageTranslateSettingShow=!1;return}wt(v),v.imageTranslateSettingShow=!0,V(),k.reportClickEvent("plugin_image_translate_page","settings"),k.reportShowEvent("plugin_image_translate_setting_page")}}function ut(m){H.value.get(m)&&($e(m),je(m))}function rt(m){const v=H.value.get(m);if(v){if(v.secondConfirmShow){v.secondConfirmShow=!1;return}wt(v),v.secondConfirmShow=!0,V(),k.reportClickEvent("plugin_image_translate_page","close"),k.reportShowEvent("plugin_image_translate_retention_page")}}function ie(m){w("close",m)}function d(){H.value.forEach((m,v)=>{const R=v.getBoundingClientRect();He(m,R)})}let b=null;function C(m){m.addEventListener("mouseenter",gt),m.addEventListener("mouseleave",et),m.addEventListener("contextmenu",ft)}function $(m){m.removeEventListener("mouseenter",gt),m.removeEventListener("mouseleave",et),m.removeEventListener("contextmenu",ft)}function S(m){if(m.type===Ie.TRANSLATE_IMAGE&&L){let v=H.value.get(L);v||(ce(L),v=H.value.get(L)),(v==null?void 0:v.status)==="idle"?k.reportClickEvent("Other","plugin_rightclickmenu_translate_image"):(v==null?void 0:v.status)==="success"&&k.reportClickEvent("Other","plugin_rightclickmenu_restore_image"),(v==null?void 0:v.status)==="success"?$e(L):je(L)}}return xt(async()=>{T=!await Ge(de.IMAGE_TRANSLATE_BALL_GUID_SHOW),s(),Array.from(document.querySelectorAll("img")).forEach(C),b=new MutationObserver(v=>{v.forEach(R=>{R.addedNodes.forEach(M=>{M instanceof HTMLImageElement?C(M):M instanceof HTMLElement&&M.querySelectorAll("img").forEach(C)}),R.removedNodes.forEach(M=>{if(M instanceof HTMLImageElement)$(M),Re(M);else if(M instanceof HTMLElement){const me=M.querySelectorAll("img");me.forEach(Ce=>{Re(Ce)}),me.forEach($)}})})}),b.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("scroll",d,!0),window.addEventListener("resize",d,!0),chrome.runtime.onMessage.addListener(S)}),yn(()=>{Array.from(document.querySelectorAll("img")).forEach($),window.removeEventListener("scroll",d,!0),window.removeEventListener("resize",d,!0),chrome.runtime.onMessage.removeListener(S),b&&(b.disconnect(),b=null),H.value.forEach((v,R)=>{var M;(M=v.imageSizeObserver)==null||M.disconnect(),v.imageSizeObserver=null,v.originalState&&Ca(R,v.originalState)}),L=null,I=null,A.clear(),H.value.clear()}),(m,v)=>(F(!0),re(Ft,null,hn(P.value,R=>(F(),re("div",{class:"image-translate-ball-container",style:Ae(Q(R)),key:R.key,onMouseenter:M=>Ke(R.imgEl),onMouseleave:M=>kt(R.imgEl),ref_for:!0,ref:"ballContentContainerRef",onClick:v[1]||(v[1]=cn(()=>{},["stop"]))},[y("div",{class:Je(["image-translate-icon-container",{hover:R.expanded}]),dir:z(Yt)()?"ltr":"rtl"},[y("div",{class:Je(["translateIcon",{translating:R.status==="translating"}]),onMouseenter:M=>he(M,R.imgEl,R.status==="success"?z(f)("translate.showOrigin"):z(f)("hoverBall.tips.translate",[ne.value])),onMouseleave:M=>J(R.imgEl),onClick:M=>Oe(R.imgEl)},[oe(it,{icon:R.status==="translating"?"loading":"translate-text-white",size:20},null,8,["icon"])],42,dc),R.status==="success"||R.status==="fail"?(F(),re("div",{key:0,class:"image-translate-status-icon",style:Ae(z(Yt)()?{left:"20px"}:{right:"20px"})},[y("img",{width:"12px",height:"12px",src:R.status==="success"?z(pn)("images/translateSuccess.png"):z(pn)("images/translateFail.png")},null,8,pc)],4)):ge("",!0),y("div",{class:"otherIcons",style:Ae(z(Yt)()?{marginLeft:"-4px"}:{marginRight:"-4px"})},[y("button",{class:Je(["icon-button",{active:R.imageTranslateSettingShow}]),onMouseenter:M=>he(M,R.imgEl,z(f)("common.setting")),onMouseleave:M=>J(R.imgEl),onClick:M=>Qe(R.imgEl),title:z(f)("common.setting")},[oe(it,{icon:"open-setting-white",size:20})],42,gc),y("button",{class:Je(["icon-button",{active:R.secondConfirmShow}]),onClick:M=>rt(R.imgEl),onMouseenter:M=>he(M,R.imgEl,z(f)("common.disable")),onMouseleave:M=>J(R.imgEl)},[oe(it,{icon:"always-close-white",size:20})],42,fc)],4),Dt(y("div",{ref_for:!0,ref:"tipRef",style:Ae(X.value),class:"common-tips"},pe(ue.value),5),[[yt,R.showTips]])],10,cc),y("div",{class:"image-translate-ball-colorful-tips-container",style:Ae(Ee())},[Dt(oe(Mi,{style:{"white-space":"nowrap"},noClose:"",position:"bottom",offset:B()},{default:Ze(()=>[Gt(pe(z(f)("imageBall.guid")),1)]),_:2},1032,["offset"]),[[yt,R.guidShow]]),Dt(oe(Jn,{style:{width:"320px"},offset:B(),scene:"plugin_image_translate_text_link","translate-type":z(q).IMAGE,position:"bottom",onUpgrade:_e,onClose:v[0]||(v[0]=M=>be())},null,8,["offset","translate-type"]),[[yt,R.exceedLimitTipShow]])],4),y("div",{class:"image-translate-ball-toast-container",style:Ae(Ee())},[Dt(oe(jl,{"arrow-offset":B(),onClose:M=>ye(R.imgEl),position:"bottom"},{default:Ze(()=>[Gt(pe(R.toastMessage),1)]),_:2},1032,["arrow-offset","onClose"]),[[yt,R.toastMessage]])],4),y("div",{style:Ae(G.value),ref_for:!0,ref:"popupContainerRef",class:"image-translate-ball-popup-container"},[Dt(oe(Ya,{source:"image",style:{position:"relative"},ref_for:!0,ref:"imageTranslateSettingRef",onClose:M=>De(R.imgEl),onSettingChange:M=>ut(R.imgEl)},null,8,["onClose","onSettingChange"]),[[yt,R.imageTranslateSettingShow]]),Dt(oe(Qr,{ref_for:!0,ref:"secondConfirmRef",source:"image_ball",title:z(f)("common.disableDesc",[z(f)("imageBall.name")]),onClose:M=>De(R.imgEl),onConfirm:ie,options:te},null,8,["title","onClose"]),[[yt,R.secondConfirmShow]])],4)],44,lc))),128))}}),vc=Ve(mc,[["__scopeId","data-v-2e124271"]]),cr=new Map,Ec=t=>{const{text:e,service:n,targetLanguage:r,translateType:a}=t,s=Ga(e).toString();return cr.has(`${n}-${r}-${a}-${s}`)?cr.get(`${n}-${r}-${a}-${s}`):""},bc=(t,e)=>{const{text:n,service:r,targetLanguage:a,translateType:s}=t,o=Ga(n).toString();cr.set(`${r}-${a}-${s}-${o}`,e)},Tc=t=>{const{text:e,service:n,targetLanguage:r,translateType:a}=t,s=Ga(e).toString();cr.delete(`${n}-${r}-${a}-${s}`)},wc=()=>{cr.clear()};function $o(){return{getTranslateResultCache:Ec,setTranslateResultCache:bc,deleteTranslateResultCache:Tc,clearTranslateResultCachedMap:wc}}const Ac=["title"],_c=Pe({__name:"GetFreeTrialButton",props:{reportItem:{},reportPremiumPromotionItem:{},reportPageName:{}},setup(t){const{userInfo:e}=Tt(),{giftText:n,giftType:r}=gr(),a=t,s=D(!0);ve(e,async()=>{var c;const l=await Ge(de.TRANSLATE_WINDOW_UPGRADE_PRO_CLOSE_TIME);if(l&&Date.now()-l<5*24*60*60*1e3){s.value=!1;return}e.value||(s.value=!0),s.value=!((c=e.value)!=null&&c.isVip)},{immediate:!0}),ve(s,l=>{l&&(k.reportShowEvent(a.reportItem),k.fireEvent(Nt.PREMIUM_PROMOTION,{action:"show",item:a.reportPremiumPromotionItem,type:r.value==="1"?"1":"5"}))},{immediate:!0});const o=()=>{k.reportClickEvent(a.reportPageName,"close_plugin_select_to_translate_page_get_free_trial"),s.value=!1,dt(de.TRANSLATE_WINDOW_UPGRADE_PRO_CLOSE_TIME,Date.now())},u=()=>{k.reportClickEvent(a.reportPageName,a.reportItem),k.fireEvent(Nt.PREMIUM_PROMOTION,{action:"click",item:a.reportPremiumPromotionItem,type:r.value==="1"?"1":"5"});const l=`${fe.priceUrl}?position=${a.reportPremiumPromotionItem}`;qe(l)};return(l,c)=>s.value?(F(),Le(tn,{key:0,class:"free-trial-btn",onClick:u},{default:Ze(()=>[oe(it,{icon:"gift",size:16}),y("span",{class:"free-trial-btn-text",title:z(n)},pe(z(n)),9,Ac),oe(it,{icon:"close",size:16,onClick:cn(o,["stop"])})]),_:1})):ge("",!0)}}),Cc=Ve(_c,[["__scopeId","data-v-8ec0e80b"]]),yc=Pe({__name:"TranslateWindowActionBarItem",props:{isActive:{type:Boolean},name:{},icon:{},activeIcon:{},label:{},isDisabled:{type:Boolean},visible:{type:Boolean},showArrowIcon:{type:Boolean}},setup(t){const e=t,n=D(!1);function r(){e.isDisabled&&(n.value=!n.value)}return(a,s)=>(F(),re("div",{key:a.name,class:Je(["translate-window-footer-explain",{active:a.isActive,disable:a.isDisabled}]),onMouseenter:r,onMouseleave:r},[oe(it,{icon:a.isActive?a.activeIcon:a.icon,size:20},null,8,["icon"]),y("span",null,pe(a.label),1),a.showArrowIcon?(F(),Le(it,{key:0,class:Je(["explain-arrow",{rotated:a.isActive}]),icon:a.isActive?"close-blue":"plus",size:12},null,8,["class","icon"])):ge("",!0)],34))}}),Uo=Ve(yc,[["__scopeId","data-v-c39678ae"]]),Dc={class:"translate-window-footer-action-wrapper"},Sc=Pe({__name:"TranslateWindowActionBar",props:gn({showExplain:{type:Boolean},showImproveWrite:{type:Boolean},showTranslate:{type:Boolean},reportPageName:{}},{translateType:{required:!0,default:q.NONE},translateTypeModifiers:{}}),emits:["update:translateType"],setup(t){const e=t,n=Nn(t,"translateType"),r=D(!1),a=D(!1),s=se(()=>[{name:q.EXPLAIN,icon:"explain",activeIcon:"explain-blue",labelKey:"explain.explain",isDisabled:r.value,visible:e.showExplain},{name:q.IMPROVE_WRITE,icon:"edit2",activeIcon:"edit2-blue",labelKey:"improveWrite.improveWrite",isDisabled:a.value,visible:e.showImproveWrite},{name:q.TRANSLATE,icon:"translate-no-arrow",activeIcon:"translate-no-arrow-blue",labelKey:"translate.translate",visible:e.showTranslate,isDisabled:!1}]);function o(u){let l="",c="";u===n.value?(n.value=q.NONE,l="deactive",c=u):(n.value=u,l="active",c=u),k.reportClickEvent(e.reportPageName,`switch_feature_tab_${l}_${c}_tab`)}return(u,l)=>(F(),re("div",Dc,[(F(!0),re(Ft,null,hn(s.value.filter(c=>c.visible),c=>(F(),Le(Uo,{key:c.name,class:"translate-window-footer-action-item","is-active":n.value===c.name,name:c.name,icon:c.icon,"active-icon":c.activeIcon,label:u.$t(c.labelKey),"is-disabled":c.isDisabled,visible:c.visible,"show-arrow-icon":!0,onClick:f=>o(c.name)},null,8,["is-active","name","icon","active-icon","label","is-disabled","visible","onClick"]))),128)),l[0]||(l[0]=y("div",{class:"empty-area"},null,-1)),oe(Cc,{class:"free-trial-btn","report-page-name":e.reportPageName,"report-item":"plugin_select_to_translate_page_get_trial_upgrade","report-premium-promotion-item":"plugin_select_to_translate_get_trial"},null,8,["report-page-name"])]))}}),xc=Ve(Sc,[["__scopeId","data-v-4c60f9ac"]]),Lc={class:"translate-window-header"},Rc={class:"header-left"},Ic={class:"function-label"},Bc={class:"window-action"},Nc={class:"window-action-more-list-content"},kc=["src"],Fc={class:"window-action-more-list-item-content"},Oc={class:"window-action-more-list-item-content"},Mc=["src"],Pc={class:"window-action-more-list-item-content"},$c={class:"window-action-icon"},Uc=["src"],qc=["title"],Hc=["src"],Gc=Pe({__name:"TranslateWindowHeader",props:gn({sourceText:{},showTargetLanguageInput:{type:Boolean},targetLanguageProp:{},translateReplaceType:{},reportPageName:{}},{translateType:{required:!0,default:q.TRANSLATE},translateTypeModifiers:{}}),emits:gn(["close","serviceChange","targetLanguageChange","alwayCloseConfirm","functionChange"],["update:translateType"]),setup(t,{expose:e,emit:n}){const r=t,{t:a,locale:s}=pt(),o=D(),u=Ue("moreActionsRef"),l=Ue("moreActionsContainerRef"),c=D(!1),f=D(),w=D({}),{userInfo:T}=Tt(),{userSettings:A,notifyUserSettings:x}=Xe(),I=D(r.targetLanguageProp),L=D(A.value.translationService),E=D(!1),_=D(void 0),p=Nn(t,"translateType"),i=se(()=>[{value:q.TRANSLATE,labelKey:"translate.translate",label:a("translate.translate"),icon:"translate-no-arrow"},{value:q.IMPROVE_WRITE,labelKey:"improveWrite.improveWrite",label:a("improveWrite.improveWrite"),icon:"edit2"}]),h=se(()=>i.value.find(ne=>ne.value===p.value)),g=n,G=se(()=>nn(s.value)),H=se(()=>({...G.value?{left:"-35%"}:{right:"-35%"},...w.value})),te=se(()=>r.translateReplaceType===Ye.OPEN_MODAL?{source:"input_ball",title:a("common.disableDesc",[a("inputBall.name")])}:{source:"select_text",title:a("translate.disableSelect")}),ue=se(()=>{if(r.translateReplaceType===Ye.OPEN_MODAL)return[{value:"1",label:a("hoverBall.closeOneTime")},{value:"2",label:a("hoverBall.disableOnePage")},{value:"3",label:a("hoverBall.disable")}];const ne=[{value:"1",label:a("hoverBall.closeOneTime")},{value:"2",label:a("hoverBall.disableOnePage")},{value:"3",label:a("hoverBall.disable")}];return A.value.targetLanguage===_.value&&ne.push({value:"4",label:a("hoverBall.languageDisable",[a(`language.${_.value}`)])}),ne}),X=se(()=>{const ne={};if(E.value&&u.value&&l.value){const{width:V}=u.value.getBoundingClientRect(),{left:Q,right:he}=l.value.getBoundingClientRect();G.value?he-V<0?ne.right=`${he-V-10}px`:ne.right="0px":window.innerWidth-Q-V<0?ne.left=`${window.innerWidth-Q-V-10}px`:ne.left="0px"}return ne}),Ee=se(()=>r.translateReplaceType===Ye.OPEN_MODAL?"plugin_input_translate_setting":"plugin_select_to_translate");ve(f,ne=>{ne&&(w.value={},_t(()=>{const V=ne.$el.getBoundingClientRect(),Q={};V.bottom>window.innerHeight&&(Q.top=`${-V.height-10}px`),G.value&&V.left<0?Q.left="0px":!G.value&&V.right>window.innerWidth&&(Q.right="0px"),Object.keys(Q).length>0&&(w.value=Q)}))}),ve(()=>r.targetLanguageProp,ne=>{ne&&(I.value=ne)}),ve(I,ne=>{g("targetLanguageChange",ne)}),ve(L,ne=>{g("serviceChange",ne),x({translationService:ne})}),Jt(f,()=>{c.value=!1});const B=ne=>chrome.runtime.getURL(`public/images/${ne}.png`),N=()=>{E.value=!1,qe(`${fe.feedBackPage}?source=plugin&entry=select_to_translate`),k.reportClickEvent(r.reportPageName,"more_feedback")},P=()=>{E.value=!1,c.value||(c.value=!0,k.reportShowEvent("plugin_select_to_retention_page"),k.reportClickEvent(r.reportPageName,"more_disable"))},W=()=>{E.value=!1;let ne=fe.selectSettingPage,V="plugin_select_to_translate";r.translateReplaceType===Ye.OPEN_MODAL&&(ne=fe.textBoxSettingPage,V="plugin_textbox_translate");let Q;if(T.value)Q=`${ne}?source=plugin`;else{const he=encodeURIComponent(`${ne}?source=plugin&from=extensionLogin`);Q=`${fe.loginUrl}?feature=${V}&cb=${he}`}qe(Q),k.reportClickEvent(r.reportPageName,"more_settings")},j=()=>{g("close"),k.reportClickEvent(r.reportPageName,"close")},K=ne=>{c.value=!1,g("alwayCloseConfirm",ne)},O=ne=>{g("functionChange",ne),k.reportClickEvent(r.reportPageName,"switch_feature_dropdown_list_list_select",{selected_item:ne})},Z=()=>{k.reportClickEvent(r.reportPageName,"switch_feature_dropdown_list")},Y=()=>{k.reportClickEvent(r.reportPageName,"more")},Se=async()=>{var ne;try{const V=await co(r.sourceText);_.value=(ne=Zt(V))==null?void 0:ne.value}catch{}};return e({openModelSelect:()=>{var ne;(ne=o.value)==null||ne.openOptions()},toggleService:ne=>{var V;(V=o.value)==null||V.toggleService(ne)},userInfoRefresh:()=>{I.value=r.translateReplaceType===Ye.OPEN_MODAL?A.value.textboxTranslation.targetLanguage:A.value.targetLanguage,L.value=A.value.translationService},secondConfirmShow:c}),xt(()=>{Se()}),(ne,V)=>(F(),re("div",Lc,[y("div",Rc,[oe(to,{class:"translate-type-select-container",modelValue:p.value,"onUpdate:modelValue":V[0]||(V[0]=Q=>p.value=Q),options:i.value,onClick:Z,onChange:O},{prefix:Ze(()=>{var Q;return[oe(it,{class:"function-icon",size:24,icon:(Q=h.value)==null?void 0:Q.icon},null,8,["icon"])]}),option:Ze(Q=>[oe(it,{class:"function-icon",size:24,icon:Q.option.icon},null,8,["icon"]),y("div",Ic,[y("div",null,pe(ne.$t(Q.option.labelKey)),1)]),Dt(oe(it,{class:"selected-icon",size:16,icon:"check"},null,512),[[yt,Q.option.value===p.value]])]),_:1},8,["modelValue","options"]),V[10]||(V[10]=y("div",{class:"empty-area"},null,-1)),Dt(oe(Ua,{source:ne.reportPageName,onMousedown:V[1]||(V[1]=cn(()=>{},["stop"])),class:"language-select",nativeSelect:!1,"has-icon":!1,"is-narrower":!0,column:1,size:"small",modelValue:I.value,"onUpdate:modelValue":V[2]||(V[2]=Q=>I.value=Q)},null,8,["source","modelValue"]),[[yt,ne.showTargetLanguageInput]]),oe(ao,{onMousedown:V[3]||(V[3]=cn(()=>{},["stop"])),ref_key:"modelServiceSelectRef",ref:o,"utm-source":Ee.value,"report-page-name":ne.reportPageName,large:!0,modelValue:L.value,"onUpdate:modelValue":V[4]||(V[4]=Q=>L.value=Q),"has-label":!1,class:"model-select"},null,8,["utm-source","report-page-name","modelValue"])]),y("div",{class:"header-right",onMousedown:V[7]||(V[7]=cn(()=>{},["stop"]))},[y("div",Bc,[y("div",{ref_key:"moreActionsContainerRef",ref:l,style:{position:"relative"},onClick:Y,onMouseenter:V[5]||(V[5]=Q=>E.value=!0),onMouseleave:V[6]||(V[6]=Q=>E.value=!1)},[E.value?(F(),re("div",{key:0,ref_key:"moreActionsRef",ref:u,style:Ae(X.value),class:"window-action-more-list-container"},[y("div",Nc,[y("div",{class:"window-action-more-list-item",onClick:N},[y("img",{src:B("feedback"),width:"16px",height:"16px"},null,8,kc),y("div",Fc,pe(z(a)("common.feedback")),1)]),y("div",{class:"window-action-more-list-item",onClick:W},[oe(it,{icon:"setting",size:16}),y("div",Oc,pe(z(a)("common.setting")),1)]),y("div",{class:"window-action-more-list-item",onClick:P},[y("img",{src:B("alwaysClose"),width:"16px",height:"16px"},null,8,Mc),y("div",Pc,pe(z(a)("common.disable")),1)])])],4)):ge("",!0),y("div",$c,[y("img",{src:B("more"),width:"16px",height:"16px"},null,8,Uc)])],544),y("div",null,[y("div",{title:z(a)("common.close"),class:"window-action-icon",onClick:j},[y("img",{src:B("windowClose"),width:"16px",height:"16px"},null,8,Hc)],8,qc)])])],32),c.value?(F(),Le(Qr,{key:0,onMousedown:V[8]||(V[8]=cn(()=>{},["stop"])),source:te.value.source,title:te.value.title,ref_key:"secondConfirmRef",ref:f,style:Ae(H.value),onClose:V[9]||(V[9]=()=>c.value=!1),onConfirm:K,options:ue.value,class:"select-text-close-second-confirm"},null,8,["source","title","style","options"])):ge("",!0)]))}}),Vc=Ve(Gc,[["__scopeId","data-v-35c0f386"]]),Wc={class:"explain-not-support-container"},zc={class:"explain-not-support-text"},jc=["src"],Xc=Pe({__name:"ExplainNotSupport",props:{translateType:{},meedReportSubType:{type:Boolean},reportPageName:{}},emits:["switchService"],setup(t,{emit:e}){const{t:n}=pt(),r=e,a=t,s=se(()=>{switch(a.translateType){case q.EXPLAIN:return n("common.pleaseSwitchAI",[n("explain.explain")]);case q.IMPROVE_WRITE:return n("common.pleaseSwitchAI",[n("improveWrite.improveWrite")]);case q.TRANSLATE:default:return n("common.pleaseSwitchAI",[n("translate.translate")])}}),o=()=>chrome.runtime.getURL("public/images/model.png"),u=()=>{r("switchService")};return(l,c)=>(F(),re("div",Wc,[y("div",zc,pe(s.value),1),y("div",{class:"explain-not-support-switch",onClick:u},[y("img",{src:o(),width:"16px",height:"16px"},null,8,jc),y("span",null,pe(z(n)("common.switch")),1)])]))}}),Yc=Ve(Xc,[["__scopeId","data-v-1d16d2d2"]]),Kc=Pe({__name:"RotateCircleLoading",props:{height:{default:null}},setup(t){const e=t,n=se(()=>e.height!==null&&e.height>0?{height:`${e.height}px`}:{});return(r,a)=>(F(),re("div",{class:"translate-window-bottom-loading",style:Ae(n.value)},[oe(it,{class:"translate-loading-icon",icon:"loading-gray",size:20})],4))}}),Qc=Ve(Kc,[["__scopeId","data-v-787900e9"]]),Jc={class:"translate-result-footer-icons"},Zc=["onClick","onMouseenter"],ed={key:0,class:"translate-result-icon-tip"},td={key:1,class:"red-hot"},nd={class:"tip-text"},rd=Pe({__name:"TranslateWindowResultFooter",props:{translateWindowResultType:{},translateType:{},translateReplaceType:{},translateResult:{},enableShowLabel:{type:Boolean},isWeakenedAndNarrower:{type:Boolean},isDragging:{type:Boolean},isNearBottom:{type:Boolean},showLanguageSelect:{type:Boolean},targetLanguageProp:{},reportPageName:{}},emits:["rewrite","replace","copy","targetLanguageChange"],setup(t,{emit:e}){const{t:n}=pt(),r=e,a=t,s={showRewriteExceedLimitTip:D(!1),updateShowRewriteExceedLimitTip:()=>{},moreToolsRedHotShow:D(!1),updateMoreToolsRedHotShow:()=>{},getReportClickItemName:(W,j,K)=>W},{showRewriteExceedLimitTip:o,updateShowRewriteExceedLimitTip:u,moreToolsRedHotShow:l,updateMoreToolsRedHotShow:c,getReportClickItemName:f}=po("translateWindowState",s),w=D(!1),T=D(!1),A=D(!1),x=D(""),I=D({}),L=D(null);let E=null;const{userSettings:_}=Xe(),p=D(a.translateReplaceType===Ye.OPEN_MODAL?_.value.textboxTranslation.targetLanguage:_.value.targetLanguage),i=D({}),h=Ue("footerRef"),g=Ue("rewriteButtonContainer"),G=Ue("exceedLimitTipWrapperRef"),H=Ue("exceedLimitTipRef"),te=se(()=>g.value&&(Array.isArray(g.value)?g.value:[g.value])[0]||null),ue=se(()=>[{value:"rewrite",icon:a.isWeakenedAndNarrower?"rewrite-gray":"rewrite",tip:n("improveWrite.rewrite"),onClick:()=>{u(!1),r("rewrite");const W=f("rewrite",a.translateWindowResultType,a.translateType);k.reportClickEvent(a.reportPageName,W)},visible:a.translateType===q.IMPROVE_WRITE,showLabel:a.enableShowLabel,showRedHot:!1,size:20,isActive:!1},{value:"replace",icon:a.isWeakenedAndNarrower?"reset-gray":"reset",tip:n("improveWrite.replace"),onClick:()=>{r("replace");const W=f("replace",a.translateWindowResultType,a.translateType);k.reportClickEvent(a.reportPageName,W)},visible:(a.translateType===q.IMPROVE_WRITE||a.translateType===q.TRANSLATE)&&a.translateReplaceType===Ye.OPEN_MODAL,showLabel:a.enableShowLabel,showRedHot:!1,size:20,isActive:!1},{value:"copy",icon:a.isWeakenedAndNarrower?"copy2-gray":"copy2",tip:w.value?n("common.copied"):n("common.copy"),onClick:W=>X(W),visible:!0,showLabel:!1,showRedHot:!1,size:22,isActive:!1},{value:"moreTools",icon:a.isWeakenedAndNarrower?"more-tools-gray":"moreTools",tip:n("common.translateFileAndMore"),onClick:()=>Ee(),visible:!0,showLabel:!1,showRedHot:l.value,size:20,isActive:!1}]),X=W=>{if(w.value)return;r("copy"),w.value=!0,W&&(A.value=!0,x.value=n("common.copied"),T.value=!0,_t(()=>{L.value&&(I.value=B(W.currentTarget,L.value,{position:"fixed",gap:4,margin:10,useRealSize:!0}))})),E&&clearTimeout(E),E=setTimeout(()=>{T.value=!1,A.value=!1,w.value=!1},1e3);const j=f("copy",a.translateWindowResultType,a.translateType);k.reportClickEvent(a.reportPageName,j)},Ee=()=>{c(!1),dt(de.TRANSLATE_WINDOW_RESULT_MORE_TOOLS_CLICK,!0);let W="plugin_select_to_translate_jump_to_more_tools";a.translateReplaceType===Ye.OPEN_MODAL&&(W="plugin_textbox_jump_to_more_tools"),qe(`${fe.fileTranslatePage}?position=${W}`);const j=f("more",a.translateWindowResultType,a.translateType);k.reportClickEvent(a.reportPageName,j==="more"?"more_tools":j)},B=(W,j,K={})=>{const{position:O="fixed",gap:Z=8,margin:Y=10,useRealSize:Se=!0,defaultWidth:ne=200,defaultHeight:V=60}=K,Q=W.getBoundingClientRect();let he=ne,J=V;if(j&&Se){const we=j.getBoundingClientRect();he=we.width,J=we.height}let _e=Q.left+Q.width/2-he/2,ye=Q.top-J-Z;if(O==="absolute"){const we=h.value;if(!we)return{};const Fe=we.getBoundingClientRect(),Te=Q.left-Fe.left,Oe=Q.top-Fe.top;return _e=Te+Q.width/2-he/2,ye=Oe-J-Z,{position:"absolute",left:`${_e}px`,top:`${ye}px`,zIndex:1e3}}else return _e<Y?_e=Y:_e+he>window.innerWidth-Y&&(_e=window.innerWidth-Y-he),ye<Y&&(ye=Q.bottom+Z),{position:O,left:`${_e}px`,top:`${ye}px`,zIndex:1e3}},N=()=>{const W=te.value;return W?B(W,G.value,{position:"fixed",gap:4,margin:10,defaultWidth:300,defaultHeight:80,useRealSize:!0}):{}},P=(W,j)=>{x.value=j,T.value=!0,_t(()=>{L.value&&(I.value=B(W.currentTarget,L.value,{position:"fixed",gap:4,margin:10,useRealSize:!0}))})};return ve([()=>a.translateType,()=>o.value&&!a.isDragging&&a.isNearBottom,()=>a.enableShowLabel],()=>{a.translateType===q.IMPROVE_WRITE&&_t(()=>{i.value=N()})},{immediate:!0}),ve(()=>o.value&&a.translateType===q.IMPROVE_WRITE,W=>{var j,K;W&&((K=(j=H.value)==null?void 0:j.reportShow)==null||K.call(j))}),ve(()=>a.targetLanguageProp,W=>{p.value=W}),ve(p,W=>{r("targetLanguageChange",W)}),ve(()=>a.isDragging,W=>{W&&T.value&&(T.value=!1,A.value=!1,w.value=!1,E&&(clearTimeout(E),E=null))}),(W,j)=>(F(),re("div",{class:Je(["translate-window-result-footer",{"weakened-and-narrower":W.isWeakenedAndNarrower}]),ref_key:"footerRef",ref:h},[W.showLanguageSelect?(F(),Le(Ua,{key:0,class:"translate-window-result-footer-language-select",source:W.reportPageName,"native-select":!1,"has-icon":!1,column:1,size:"small","is-narrower":!0,"report-item-prefix":"translate_tab_",modelValue:p.value,"onUpdate:modelValue":j[0]||(j[0]=K=>p.value=K)},{input:Ze(()=>[oe(Uo,{"is-active":!1,name:"world",icon:"world","active-icon":"world",label:z(n)(`language.${p.value}`)||p.value,"is-disabled":!1,visible:!0,"show-arrow-icon":!1},null,8,["label"])]),_:1},8,["source","modelValue"])):ge("",!0),j[3]||(j[3]=y("div",{class:"empty-area"},null,-1)),y("div",Jc,[(F(!0),re(Ft,null,hn(ue.value,K=>Dt((F(),re("div",{key:K.icon,class:Je(["translate-result-icon-container",`icon-container-${K.value}`]),ref_for:!0,ref:K.value==="rewrite"?"rewriteButtonContainer":void 0},[y("div",{class:Je(["translate-result-icon-wrapper",{active:K.isActive,"show-label":K.showLabel}]),onClick:cn(O=>K.onClick(O),["prevent"]),onMouseenter:O=>!K.showLabel&&!w.value&&P(O,K.tip),onMouseleave:j[1]||(j[1]=O=>!w.value&&(T.value=!1))},[oe(it,{icon:K.icon,size:K.size||20},null,8,["icon","size"]),K.showLabel?(F(),re("div",ed,pe(K.tip),1)):ge("",!0),K.showRedHot?(F(),re("div",td)):ge("",!0)],42,Zc)],2)),[[yt,K.visible]])),128))]),Dt(y("div",{ref_key:"exceedLimitTipWrapperRef",ref:G,style:Ae([{width:"300px","pointer-events":"all"},i.value])},[oe(Jn,{ref_key:"exceedLimitTipRef",ref:H,"translate-type":z(q).IMPROVE_WRITE,"need-report-sub-type":!0,"auto-report-show-event":!1,"report-page-name":a.reportPageName,scene:"plugin_select_to_translate_page_free_trial_limit_upgrade_popup",position:"bottom",onClose:j[2]||(j[2]=K=>o.value=!1)},null,8,["translate-type","report-page-name"])],4),[[yt,z(o)&&!W.isDragging&&W.isNearBottom&&a.translateType===z(q).IMPROVE_WRITE]]),oe(zn,{name:"slow-fade-in"},{default:Ze(()=>[T.value?(F(),re("div",{key:0,ref_key:"tipRef",ref:L,style:Ae(I.value),class:Je(["translate-result-hover-tip",{"with-icon":A.value}])},[A.value?(F(),Le(it,{key:0,icon:"check-white",size:16,class:"tip-icon"})):ge("",!0),y("span",nd,pe(x.value),1)],6)):ge("",!0)]),_:1})],2))}}),qo=Ve(rd,[["__scopeId","data-v-6e0e4445"]]),ad={key:2,class:"upgrade-now-wrapper"},sd={key:0,class:"explain-disable-tips"},od=Pe({__name:"TranslateWindowResult",props:gn({translateWindowResultType:{},isAnotherResultShow:{type:Boolean},dependentServiceStatus:{},dependentServiceErrorCode:{default:ke.SUCCESS},translateType:{},sourceText:{},userInfoRefreshed:{type:Boolean},targetLanguage:{},service:{},translateReplaceType:{},collapseBottom:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!0},isDragging:{type:Boolean},preventAutoSwitch:{type:Boolean,default:!1},isNearBottom:{type:Boolean,default:!1},reportPageName:{},showActionBar:{type:Boolean,default:!0}},{outputText:{required:!1,default:""},outputTextModifiers:{},resultAreaHeight:{required:!1,default:107},resultAreaHeightModifiers:{}}),emits:gn(["replace","switchService","openModelSelect","resultStatusChanged","targetLanguageChange"],["update:outputText","update:resultAreaHeight"]),setup(t,{expose:e,emit:n}){const{explainText:r,explainDone:a,explainError:s,explainErrorCode:o,improveWriteText:u,improveWriteDone:l,improveWriteError:c,improveWriteErrorCode:f,getCurrentRequestId:w,setCurrentRequestId:T}=mr(),{t:A}=pt(),{userSettings:x}=Xe(),{getTranslateResultCache:I,setTranslateResultCache:L,deleteTranslateResultCache:E}=$o(),{userInfo:_}=Tt(),p=n,i=t,h=Nn(t,"outputText"),g={showRewriteExceedLimitTip:D(!1),updateShowRewriteExceedLimitTip:()=>{},moreToolsRedHotShow:D(!1),updateMoreToolsRedHotShow:()=>{},getReportClickItemName:(ae,De,Qe)=>ae},{updateShowRewriteExceedLimitTip:G,getReportClickItemName:H}=po("translateWindowState",g),te=Nn(t,"resultAreaHeight"),ue=D(),X=D(),Ee=D();let B=!1;const N=D(!1),P=D(""),W=D(!1),j=D(ke.SUCCESS),K=D(!1),O=D(!1),Z=D(""),Y=D(107),Se=se(()=>we.value||!i.userInfoRefreshed),ne=se(()=>nn(i.targetLanguage)?{direction:"rtl",textAlign:"right"}:{direction:"ltr",textAlign:"left"}),V=se(()=>{const ae=[q.EXPLAIN,q.IMPROVE_WRITE].includes(i.translateType),De=!_n(i.service);return ae?De:i.dependentServiceStatus==="notSupport"}),Q=se(()=>{switch(i.translateType){case q.EXPLAIN:return r.value;case q.IMPROVE_WRITE:return u.value;case q.TRANSLATE:return P.value;default:return""}}),he=se(()=>{switch(i.translateType){case q.EXPLAIN:return s.value;case q.IMPROVE_WRITE:return c.value;case q.TRANSLATE:return W.value;default:return W.value}}),J=se(()=>i.isAnotherResultShow===!1&&i.translateWindowResultType==="up"),be=se(()=>i.translateType===q.TRANSLATE&&j.value===ke.EXTEND_LIMIT),_e=se(()=>{const ae=A("common.upgradePro");return ae.charAt(0).toLocaleLowerCase()+ae.slice(1)}),ye=se(()=>{switch(i.translateType){case q.EXPLAIN:return o.value===ke.EXTEND_LIMIT?{code:ke.EXTEND_LIMIT,i18nKey:"translate.limitFail",type:"limitFail"}:{code:o.value,i18nKey:"common.loadingFailedPlease",type:"fail"};case q.IMPROVE_WRITE:return f.value===ke.EXTEND_LIMIT?{code:f.value,i18nKey:"translate.limitFail",type:"limitFail"}:{code:f.value,i18nKey:"common.loadingFailedPlease",type:"fail"};case q.TRANSLATE:default:return{code:W.value?ke.EXTEND_LIMIT:ke.SUCCESS,i18nKey:j.value===ke.EXTEND_LIMIT?"translate.limitTip":"translate.fail",type:j.value===ke.EXTEND_LIMIT?"limitFail":"fail"}}}),we=se(()=>{switch(i.translateType){case q.EXPLAIN:return!a.value;case q.IMPROVE_WRITE:return!l.value;case q.TRANSLATE:return N.value;default:return!0}}),Fe=()=>{if(i.dependentServiceStatus==="error"||i.dependentServiceStatus==="notSupport")return;switch(i.translateType){case q.EXPLAIN:case q.IMPROVE_WRITE:gt(i.translateType);break;case q.TRANSLATE:Oe();break}const ae=H("retry",i.translateWindowResultType,i.translateType);k.reportClickEvent(i.reportPageName,ae)};let Te=0;async function Oe(){if(!i.userInfoRefreshed)return;N.value=!0,P.value="",W.value=!1;let ae=i.sourceText;i.sourceText.length>Dr&&(ae=ae.substring(0,Dr));const De=i.targetLanguage,Qe=x.value.translationService,ut=I({text:ae,service:Qe,targetLanguage:De,translateType:i.translateType});if(ut){N.value=!1,P.value=ut,W.value=!1,j.value=ke.SUCCESS;return}let rt="";try{rt=await nt(Ie.DETECT_TEXT_LANGUAGE,i.sourceText)}catch{rt=fe.defaultSourceLanguage}const ie=++Te,d=await Zn({texts:[{text:ae}],from:rt,to:De,service:Qe,type:q.SELECT_TEXT},He(q.TRANSLATE));if(!B&&i.translateType===q.TRANSLATE)if(d.code===0){const b=d.data&&d.data[0].text||"";ie===Te&&(N.value=!1,P.value=b),L({text:ae,service:Qe,targetLanguage:De,translateType:i.translateType},b)}else{if(ie!==Te)return;if(j.value=d.code,d.code,ke.EXTEND_LIMIT,d.code===ke.NOT_LOGIN){const b=encodeURIComponent(`${fe.pluginDescPage}?from=extensionLogin`);qe(`${fe.loginUrl}?feature=plugin_select_to_translate&cb=${b}`)}d.code===ke.PRIVILEGE_INSUFFICIENT&&qe(`${fe.priceUrl}?source=plugin_select_to_translate`),N.value=!1,W.value=!0}}const $e=()=>{let ae;return i.translateType===q.TRANSLATE?ae="ai_model_free_trial_limit":i.translateType===q.IMPROVE_WRITE?ae="plugin_rewrite_ai_model_free_trial_limit":i.translateType===q.EXPLAIN?ae="plugin_explain_ai_model_free_trial_limit":ae="ai_model_free_trial_limit",ae},je=()=>{const ae=$e();qe(`${fe.priceUrl}?source=plugin_select_to_translate&position=${ae}`),k.fireEvent("premium_promotion_popup",{action:"click",page_name:i.reportPageName,item:ae})},ze=()=>Q.value,Et=()=>{p("replace",ze())},Re=()=>{ho(ze())};async function ce(ae){if(V.value){const ut=!!_.value,rt=ae===q.EXPLAIN?a.value:l.value;if(i.translateWindowResultType==="bottom"&&ut&&!rt){if(i.preventAutoSwitch)return;const ie=x.value.services.find(d=>d.isAIService&&!d.isVipService);ie&&p("switchService",ie);return}if(i.translateWindowResultType==="up"&&ut&&!rt){const ie=x.value.services.find(d=>d.isAIService&&!d.isVipService);ie&&p("switchService",ie);return}}const De=I({text:i.sourceText,service:i.service,targetLanguage:i.targetLanguage,translateType:ae});if(De){ae===q.EXPLAIN?(r.value=De,a.value=!0,s.value=!1,o.value=ke.SUCCESS):(u.value=De,l.value=!0,c.value=!1,f.value=ke.SUCCESS);return}if(ae===q.EXPLAIN?(s.value=!1,a.value=!1,r.value=""):(c.value=!1,l.value=!1,u.value=""),V.value)return;T(ae);const Qe=i.sourceText.substring(0,Dr);No({translateType:ae,input:Qe,engineCode:fo(i.service),targetLanguage:i.targetLanguage,component:go[q.SELECT_TEXT],requestId:w(ae)},He(ae))}function He(ae){let De;switch(ae){case q.IMPROVE_WRITE:i.translateReplaceType===Ye.OPEN_MODAL?De={position:"plugin_textbox_translate_improve_writing",feature:"plugin_textbox_improve_writing"}:De={position:"plugin_select_to_translate_improve_writing",feature:"plugin_select_to_improve_writing"};break;case q.EXPLAIN:De={position:"plugin_select_to_translate_explain",feature:"plugin_select_to_translate_explain"};break;case q.TRANSLATE:default:i.translateReplaceType===Ye.OPEN_MODAL?De={position:"plugin_textbox_translate",feature:"plugin_textbox_translate"}:De={position:"plugin_select_to_translate",feature:"plugin_select_to_translate"};break}return De}function gt(ae){Z.value=u.value,E({text:i.sourceText,service:i.service,targetLanguage:i.targetLanguage,translateType:i.translateType}),ce(ae)}function et(){O.value=!O.value,G(!1),k.reportClickEvent(i.reportPageName,O.value?"expand":"fold")}function ft(){p("openModelSelect");const ae=H("switch_to_ai_model",i.translateWindowResultType,i.translateType);k.reportClickEvent(i.reportPageName,ae)}function Ke(ae,De,Qe,ut,rt,ie,d,b,C,$,S,m){if(i.translateWindowResultType==="bottom"){const lt=ae&&ae!==De,Ot=Qe!==ut,Mt=d!==b,tt=S!==m;return!!(lt||Ot&&i.sourceText&&Qe&&Qe!==q.NONE||i.translateType===q.TRANSLATE&&Mt&&i.sourceText||tt&&m==="loading"&&S==="done"&&i.sourceText)}return Qe!==ut||rt!==ie||d!==b||C!==$||S!==m}ve(()=>i.translateType,()=>{i.collapseBottom&&(O.value=!1)}),ve([a,l],()=>{i.dependentServiceStatus==="done"&&(a.value&&i.translateType===q.EXPLAIN&&L({text:i.sourceText,service:i.service,targetLanguage:i.targetLanguage,translateType:q.EXPLAIN},r.value),l.value&&i.translateType===q.IMPROVE_WRITE&&L({text:i.sourceText,service:i.service,targetLanguage:i.targetLanguage,translateType:q.IMPROVE_WRITE},u.value))}),ve(Q,ae=>{h.value=ae}),ve([we,V,he,()=>i.translateType],()=>{if(V.value){p("resultStatusChanged","notSupport");return}if(he.value){const ae=ye.value.code;p("resultStatusChanged","error",ae);return}if(we.value){p("resultStatusChanged","loading");return}p("resultStatusChanged","done")}),ve([()=>i.sourceText,()=>i.translateType,()=>i.service,()=>i.targetLanguage,()=>i.userInfoRefreshed,()=>i.dependentServiceStatus],async([ae,De,Qe,ut,rt,ie],[d,b,C,$,S,m])=>{if(!(De===b&&Qe===C&&ut!==$&&rt===S&&ie===m&&ae===d&&De===q.IMPROVE_WRITE||(i.dependentServiceStatus!=="done"&&(i.dependentServiceStatus==="error"?(i.translateType===q.EXPLAIN&&(s.value=!0,a.value=!0,o.value=i.dependentServiceErrorCode),i.translateType===q.IMPROVE_WRITE&&(c.value=!0,l.value=!0,f.value=i.dependentServiceErrorCode),i.translateType===q.TRANSLATE&&(W.value=!0,N.value=!1,j.value=i.dependentServiceErrorCode)):i.dependentServiceStatus==="loading"?(i.translateType===q.EXPLAIN&&(s.value=!1,a.value=!1),i.translateType===q.IMPROVE_WRITE&&(c.value=!1,l.value=!1),i.translateType===q.TRANSLATE&&(W.value=!1,N.value=!0)):i.dependentServiceStatus),!Ke(ae,d,De,b,Qe,C,ut,$,rt,S,ie,m)))&&i.userInfoRefreshed&&i.dependentServiceStatus==="done")switch(i.translateType){case q.EXPLAIN:case q.IMPROVE_WRITE:ce(i.translateType);break;case q.TRANSLATE:Oe();break}},{immediate:!0});const kt=()=>{!Se.value&&X.value&&!he.value&&_t(()=>{if(X.value&&!Se.value){let ae=0;const De=X.value.offsetHeight;De>0&&(ae+=De),!he.value&&(O.value||!i.collapseBottom)&&!we.value&&!V.value?ae+=40:ae+=0,ae>0&&(te.value=ae-24)}})};ve(()=>c.value&&f.value===ke.EXTEND_LIMIT,ae=>{ae&&Z.value&&(G(!0),l.value=!0,c.value=!1,f.value=ke.SUCCESS,u.value=Z.value,Z.value="")}),ve([()=>ye.value,()=>V.value],()=>{if(!V.value&&he.value&&ye.value.type==="limitFail"){k.reportShowEvent("plugin_select_to_translate_page_get_trial_upgrade",{sub_type:i.translateType});const ae=$e();k.fireEvent("premium_promotion_popup",{action:"show",page_name:i.reportPageName,item:ae})}}),ve([Se,()=>i.translateWindowResultType,()=>i.isAnotherResultShow,()=>i.showActionBar],()=>{i.translateWindowResultType==="up"&&i.isAnotherResultShow===!1&&!i.showActionBar?Y.value=te.value+51:Y.value=te.value},{immediate:!0}),ve(Se,ae=>{ae||kt()});let wt=null;return ve(X,ae=>{wt&&(wt.disconnect(),wt=null),ae&&(wt=new ResizeObserver(()=>{Se.value||kt()}),wt.observe(ae))},{immediate:!0}),ve([Q,he,V,O,()=>i.collapseBottom],()=>{kt()},{flush:"post"}),yn(()=>{B=!0,wt&&(wt.disconnect(),wt=null)}),e({resultError:he,resultLoading:we,translateTypeNotSupport:V,showMoreThanTwoLines:O,onReImproveWriteClick:gt,getPureTranslateResult:ze}),(ae,De)=>(F(),re(Ft,null,[y("div",{ref_key:"containerRef",ref:X,class:Je(["translate-window-result-container",{"translate-error":he.value,"fixed-min-height":J.value}]),style:Ae(he.value?{}:ne.value)},[V.value?(F(),Le(Yc,{key:0,style:Ae({height:`${Math.max(Y.value,50)}px`}),"translate-type":ae.translateType,"report-page-name":ae.reportPageName,"meed-report-sub-type":!0,onSwitchService:ft},null,8,["style","translate-type","report-page-name"])):we.value||!ae.userInfoRefreshed?(F(),Le(Qc,{key:1,ref_key:"loadingRef",ref:Ee,class:"translate-window-result-loading",height:Y.value},null,8,["height"])):he.value?(F(),re("div",{key:2,class:"translate-window-result-error-container",style:Ae({height:`${Math.max(Y.value,100)}px`})},[be.value?(F(),Le(z(Br),{key:0,keypath:ye.value.i18nKey,class:"translate-window-result-error",style:{display:"block"},tag:"div"},{default:Ze(()=>[y("span",null,pe(_e.value),1)]),_:1},8,["keypath"])):(F(),Le(z(Br),{key:1,keypath:ye.value.i18nKey,class:"translate-window-result-error",style:{display:"inline-flex"},tag:"div"},{default:Ze(()=>[ye.value.type==="fail"?(F(),re("div",{key:0,class:"translate-result-error-retry",onClick:Fe},[oe(it,{style:{cursor:"pointer"},icon:"retry",size:16}),y("span",null,pe(z(A)("common.retry")),1)])):ge("",!0)]),_:1},8,["keypath"])),ye.value.type==="limitFail"?(F(),re("div",ad,[y("span",{class:"upgrade-now-btn",onClick:je},pe(z(A)("common.upgradeNow")),1)])):ge("",!0)],4)):(F(),re("div",{key:3,ref_key:"textWrapperRef",ref:ue,class:Je(["translate-window-result-text-wrapper",{"text-can-be-collapsed":i.collapseBottom}])},[y("div",{class:Je(["translate-window-result-text",{"collapsed-in-two-lines":!O.value}])},pe(Q.value),3),ae.collapseBottom?(F(),Le(it,{key:0,class:"collapse-bottom-icon",icon:O.value?"arrow-up":"arrow-down",size:16,onClick:et},null,8,["icon"])):ge("",!0)],2))],6),i.showFooter!==!1?Dt((F(),Le(qo,{key:0,"translate-window-result-type":ae.translateWindowResultType,"translate-type":ae.translateType,"translate-replace-type":ae.translateReplaceType,"translate-result":Q.value,"enable-show-label":!ae.collapseBottom,"is-weakened-color":ae.collapseBottom,"is-dragging":ae.isDragging,"target-language-prop":i.targetLanguage,"is-near-bottom":ae.isNearBottom,"report-page-name":ae.reportPageName,onRewrite:De[0]||(De[0]=Qe=>gt(z(q).IMPROVE_WRITE)),onReplace:Et,onTargetLanguageChange:De[1]||(De[1]=Qe=>p("targetLanguageChange",Qe)),onCopy:Re},null,8,["translate-window-result-type","translate-type","translate-replace-type","translate-result","enable-show-label","is-weakened-color","is-dragging","target-language-prop","is-near-bottom","report-page-name"])),[[yt,!he.value&&(O.value||!ae.collapseBottom)&&!we.value&&!V.value&&ae.userInfoRefreshed]]):ge("",!0),oe(zn,{name:"fade-in"},{default:Ze(()=>[K.value?(F(),re("div",sd,pe(z(A)("explain.disableTip")),1)):ge("",!0)]),_:1})],64))}}),ks=Ve(od,[["__scopeId","data-v-591e2f14"]]),id={class:"translate-window-up-bottom-result-wrapper"},ud={class:"translate-window-bottom-result-wrapper"},ld=Pe({__name:"TranslateWindowTwoResults",props:gn({upTranslateType:{},bottomTranslateType:{},sourceText:{},service:{},targetLanguage:{},isUpResultCollapsed:{type:Boolean},translateReplaceType:{},userInfoRefreshed:{type:Boolean},isDragging:{type:Boolean},reportPageName:{}},{upOutputText:{required:!1,default:""},upOutputTextModifiers:{},showActionBar:{type:Boolean,required:!1,default:!1},showActionBarModifiers:{}}),emits:gn(["replace","openModelSelect","switchService","targetLanguageChange"],["update:upOutputText","update:showActionBar"]),setup(t,{emit:e}){const n=e,r=t,a=Nn(t,"upOutputText"),s=D(""),o=D(),u=D(),l=D(),c=D(),f=D("done"),w=D(ke.SUCCESS),T=D(!1),A=D(!1),x=D(!1),I=D(!1),L=Nn(t,"showActionBar"),E=D(107),_=D(50);let p=null;const i=se(()=>{if(r.bottomTranslateType===q.NONE)return!1;const B=u.value;if(!B)return!1;const N=B.resultError,P=B.resultLoading,W=B.translateTypeNotSupport;return!N&&!P&&!W}),h=()=>{var B;(B=u.value)==null||B.onReImproveWriteClick(r.bottomTranslateType)},g=()=>{var N;const B=(N=u.value)==null?void 0:N.getPureTranslateResult();B&&n("replace",B)},G=()=>{var N;const B=(N=u.value)==null?void 0:N.getPureTranslateResult();B&&ho(B)},H=(B,N=ke.SUCCESS)=>{f.value=B,w.value=N};ve([f,()=>r.upTranslateType,()=>r.bottomTranslateType,()=>r.userInfoRefreshed],()=>{if(!r.userInfoRefreshed)return!1;r.upTranslateType!==q.NONE&&r.bottomTranslateType===q.NONE&&f.value!=="done"?L.value=!1:L.value=!0},{immediate:!0}),ve([()=>r.bottomTranslateType,()=>r.upTranslateType],([B,N],[P])=>{if(!l.value||!o.value)return;const W=l.value.clientHeight;P===q.NONE&&B!==q.NONE&&_t(()=>{setTimeout(()=>{_.value=W+20-(E.value+24)-24},0)}),P!==q.NONE&&B===q.NONE&&N!==q.NONE&&(E.value=W,_.value=50)});const te=()=>{!c.value||!l.value||(p=new IntersectionObserver(B=>{B.forEach(N=>{x.value=N.isIntersecting})},{root:l.value,rootMargin:"20px 0px 0px 0px",threshold:0}),p.observe(c.value))},ue=()=>{p&&(p.disconnect(),p=null)};let X=null;return ve(()=>r.service,B=>{if(X===null){X=B;return}if(r.bottomTranslateType===q.NONE){X=B;return}_n(X)&&!_n(B)&&(T.value=!0),X=B},{immediate:!0}),ve(()=>r.bottomTranslateType,(B,N)=>{N===q.NONE&&(B===q.EXPLAIN||B===q.IMPROVE_WRITE)&&(T.value=!1)}),ve([()=>r.upTranslateType,()=>r.bottomTranslateType,()=>r.targetLanguage,()=>r.service],()=>{I.value=!1}),xt(async()=>{await Ge(de.TRANSLATE_WINDOW_RESULT_MORE_TOOLS_CLICK)||(A.value=!0),te()}),Va(()=>{ue()}),Vi("translateWindowState",{showRewriteExceedLimitTip:I,updateShowRewriteExceedLimitTip:B=>{I.value=B},moreToolsRedHotShow:A,updateMoreToolsRedHotShow:B=>{A.value=B},getReportClickItemName:(B,N,P)=>N==="up"?B:P===q.EXPLAIN?`explain_tab_${B}`:P===q.IMPROVE_WRITE?`improve_writing_tab_${B}`:P===q.TRANSLATE?`translate_tab_${B}`:B}),(B,N)=>(F(),re("div",id,[y("div",{class:"translate-window-up-bottom-result-scroll-content",ref_key:"scrollContainerRef",ref:l},[oe(ks,{ref_key:"translateWindowResultRef",ref:o,"translate-type":B.upTranslateType,"translate-window-result-type":"up","dependent-service-status":"done","source-text":B.sourceText,"output-text":a.value,"onUpdate:outputText":N[0]||(N[0]=P=>a.value=P),service:B.service,"target-language":B.targetLanguage,"collapse-bottom":B.isUpResultCollapsed,"translate-replace-type":B.translateReplaceType,"user-info-refreshed":B.userInfoRefreshed,"is-dragging":B.isDragging,"is-near-bottom":x.value,"is-another-result-show":B.bottomTranslateType!==z(q).NONE,"report-page-name":B.reportPageName,"show-action-bar":L.value,"result-area-height":E.value,"onUpdate:resultAreaHeight":N[1]||(N[1]=P=>E.value=P),onReplace:N[2]||(N[2]=P=>n("replace",P)),onOpenModelSelect:N[3]||(N[3]=P=>n("openModelSelect")),onResultStatusChanged:H,onSwitchService:N[4]||(N[4]=P=>n("switchService",P))},null,8,["translate-type","source-text","output-text","service","target-language","collapse-bottom","translate-replace-type","user-info-refreshed","is-dragging","is-near-bottom","is-another-result-show","report-page-name","show-action-bar","result-area-height"]),Dt(y("div",ud,[oe(ks,{ref_key:"translateWindowExplainRef",ref:u,"translate-type":B.bottomTranslateType,"translate-window-result-type":"bottom","dependent-service-status":f.value,"dependent-service-error-code":w.value,"source-text":a.value,"result-area-height":_.value,"onUpdate:resultAreaHeight":N[5]||(N[5]=P=>_.value=P),"output-text":s.value,"onUpdate:outputText":N[6]||(N[6]=P=>s.value=P),service:B.service,"target-language":B.targetLanguage,"translate-replace-type":B.translateReplaceType,"user-info-refreshed":B.userInfoRefreshed,"show-footer":!1,"is-dragging":B.isDragging,"prevent-auto-switch":T.value,"is-another-result-show":B.upTranslateType!==z(q).NONE,"report-page-name":B.reportPageName,onTargetLanguageChange:N[7]||(N[7]=P=>n("targetLanguageChange",P)),onReplace:N[8]||(N[8]=P=>n("replace",P)),onOpenModelSelect:N[9]||(N[9]=P=>n("openModelSelect")),onSwitchService:N[10]||(N[10]=P=>n("switchService",P))},null,8,["translate-type","dependent-service-status","dependent-service-error-code","source-text","result-area-height","output-text","service","target-language","translate-replace-type","user-info-refreshed","is-dragging","prevent-auto-switch","is-another-result-show","report-page-name"])],512),[[yt,B.bottomTranslateType!==z(q).NONE]]),y("div",{ref_key:"bottomSentinelRef",ref:c,class:"bottom-sentinel"},null,512)],512),Dt(oe(qo,{"translate-window-result-type":"bottom","translate-type":B.bottomTranslateType,"translate-replace-type":B.translateReplaceType,"translate-result":s.value,"enable-show-label":!0,"is-weakened-and-narrower":!1,"is-dragging":B.isDragging,"is-near-bottom":x.value,"target-language-prop":B.targetLanguage,"show-language-select":B.bottomTranslateType===z(q).TRANSLATE,"report-page-name":B.reportPageName,onRewrite:h,onReplace:g,onCopy:G,onTargetLanguageChange:N[11]||(N[11]=P=>n("targetLanguageChange",P))},null,8,["translate-type","translate-replace-type","translate-result","is-dragging","is-near-bottom","target-language-prop","show-language-select","report-page-name"]),[[yt,i.value]])]))}}),cd=Ve(ld,[["__scopeId","data-v-b30cd8d1"]]),It=8;function dd(t){const{locale:e}=pt(),{initialX:n,initialY:r,containerRef:a,dragZoneRef:s,headerWrapperRef:o,onDragStart:u,onDragEnd:l}=t,{width:c,height:f}=so(),{width:w,height:T}=Pi(a),A=D({x:n,y:r}),x=D(!1),I=D(null),L=D(0),E=se(()=>nn(e.value)),_=te=>{te.preventDefault(),x.value=!0,u==null||u();const ue=te.clientX-A.value.x,X=te.clientY-A.value.y,Ee=N=>{var j;if(!x.value)return;let P=N.clientX-ue,W=N.clientY-X;if(a.value){const K=a.value,{innerWidth:O,innerHeight:Z}=window,Y=K.getBoundingClientRect();if(E.value){const V=((j=s==null?void 0:s.value)==null?void 0:j.clientWidth)||0,Q=It+V,he=O-Y.width-It+V;P=Math.max(Q,Math.min(he,P))}else{const V=It,Q=O-Y.width-It;P=Math.max(V,Math.min(Q,P))}const Se=It,ne=Z-Y.height-It;W=Math.max(Se,Math.min(ne,W))}A.value.x=P,A.value.y=W},B=()=>{var N;if(x.value=!1,a.value){const{innerHeight:P}=window,W=a.value.getBoundingClientRect(),j=A.value.y,K=P-W.height-It,O=j>=K-1;I.value={x:A.value.x,top:j,topBeforeBottomed:O&&((N=I.value)==null?void 0:N.topBeforeBottomed)||null,wasManuallyDragged:!0}}l==null||l(),document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",B)},p=()=>{s!=null&&s.value&&s.value.addEventListener("mousedown",_),o!=null&&o.value&&o.value.addEventListener("mousedown",_)},i=se(()=>{if(E.value&&a.value&&(s!=null&&s.value)){const te=s.value.clientWidth;return A.value.x-te}return A.value.x}),h=se(()=>A.value.y),g=()=>{var K;if(!a.value)return;const te=a.value,{innerWidth:ue,innerHeight:X}=window,Ee=te.getBoundingClientRect(),B=Ee.height,N=!I.value;N&&(I.value={x:A.value.x,top:A.value.y,topBeforeBottomed:null,wasManuallyDragged:!1},L.value=B);const P=!N&&L.value!==B,W=!N&&B>L.value,j=!N&&B<L.value;if(N||!P){const O=It,Z=X-B-It;A.value.y=Math.max(O,Math.min(Z,A.value.y))}else if(W&&I.value){const O=A.value.y,Z=X-B-It;if(O+B>X-It){const Y=O;A.value.y=Z,I.value.topBeforeBottomed===null&&(I.value.topBeforeBottomed=Y)}}else if(j&&I.value){const O=I.value;if(O.topBeforeBottomed!==null){const Z=O.topBeforeBottomed,Y=It,Se=X-B-It;A.value.y=Math.max(Y,Math.min(Se,Z)),Math.abs(A.value.y-Z)<1&&(O.topBeforeBottomed=null)}}if(I.value&&(I.value.top=A.value.y),E.value){const O=((K=s==null?void 0:s.value)==null?void 0:K.clientWidth)||0,Z=It+O,Y=ue-Ee.width-It+O;A.value.x=Math.max(Z,Math.min(Y,A.value.x))}else{const O=It,Z=ue-Ee.width-It;A.value.x=Math.max(O,Math.min(Z,A.value.x))}L.value=B},G=()=>{var te;if(a.value){const ue=a.value.getBoundingClientRect();I.value={x:A.value.x,top:A.value.y,topBeforeBottomed:null,wasManuallyDragged:((te=I.value)==null?void 0:te.wasManuallyDragged)||!1},L.value=ue.height}};return ve([c,f,w,T],()=>_t(()=>g())),{isDragging:x,dragState:A,windowX:i,windowY:h,setupDragListeners:p,initDragListeners:()=>{_t(()=>{p()})},calculatePosition:g,resetIntentPosition:G,handleDragStart:_}}const pd={class:"translate-window-content-zone"},gd=Pe({__name:"TranslateWindow",props:gn({sourceText:{},top:{},left:{},showLeftDragZone:{type:Boolean},translateReplaceType:{}},{upTranslateType:{required:!1,default:q.TRANSLATE},upTranslateTypeModifiers:{}}),emits:gn(["close","alwayCloseConfirm","replace"],["update:upTranslateType"]),setup(t,{emit:e}){const{contentScriptRefreshUserInfo:n}=Tt(),r=e,{userSettings:a,notifyUserSettings:s}=Xe(),{setNoLoginTranslateUseCount:o,showLoginTipGuid:u,selectTextLoginTipShow:l}=hr(),{checkBoundary:c}=oo({margin:2}),{clearTranslateResultCachedMap:f}=$o(),{resetExplainImproveWrite:w}=mr(),T=D(),A=D(),x=D(),I=D(),L=D(a.value.translationService),E=Ue("loginTipRef"),_=D({position:"absolute",top:"calc(100% + 8px)"}),p=D(!1),i=D(!1),h=D(""),g=D("plugin_select_to_translate_page||translate"),G=D(!1),H=t,te=D(),ue=D(H.translateReplaceType===Ye.OPEN_MODAL?a.value.textboxTranslation.targetLanguage:a.value.targetLanguage),X=Nn(t,"upTranslateType"),Ee=D(q.NONE),{windowX:B,windowY:N,isDragging:P,initDragListeners:W}=dd({initialX:H.left,initialY:H.top,containerRef:te,dragZoneRef:x,headerWrapperRef:I});ve(l,V=>{V?_t(()=>{E.value&&c(E.value.$el,Q=>{Q&&(_.value.bottom="calc(100% + 8px)",_.value.top="")})}):(_.value.bottom="",_.value.top="calc(100% + 8px)")}),Jt(te,()=>{var V;(V=T.value)!=null&&V.secondConfirmShow||r("close")});const j=V=>{if(ue.value=V,H.translateReplaceType===Ye.OPEN_MODAL){const Q=a.value.textboxTranslation;Q.targetLanguage=V,s({textboxTranslation:Q})}else s({targetLanguage:V})},K=V=>{L.value=V},O=V=>{V!==q.NONE&&V===X.value||(X.value=V,i.value=!1,Ee.value=q.NONE,w())};ve(Ee,(V,Q)=>{switch(V){case q.EXPLAIN:case q.IMPROVE_WRITE:case q.TRANSLATE:i.value=!0;break;case q.NONE:i.value=!1,q.NONE;break}}),ve([X,Ee],()=>{let V="",Q="",he="";switch(H.translateReplaceType){case Ye.OPEN_MODAL:V="plugin_textbox_page";break;default:V="plugin_select_to_translate_page";break}switch(X.value){case q.TRANSLATE:Q="||translate";break;case q.IMPROVE_WRITE:Q="||improve_writing";break}switch(Ee.value){case q.NONE:he="";break;case q.EXPLAIN:he="||explain_tab";break;case q.IMPROVE_WRITE:he="||improve_writing_tab";break;case q.TRANSLATE:he="||translate_tab";break}const J=`${V}${Q}${he}`;k.reportShowEvent(J),g.value=`${V}${Q}`},{immediate:!0});const Z=V=>{var Q;(Q=T.value)==null||Q.toggleService(V)},Y=()=>{var V;(V=T.value)==null||V.openModelSelect()},Se=V=>{r("replace",V)},ne=()=>{r("close")};return xt(async()=>{var V;w(),W(),await o(),u(Vn.SELECT_TEXT),await n(),(V=T.value)==null||V.userInfoRefresh(),await _t(),p.value=!0}),Va(()=>{l.value=!1,f(),w()}),(V,Q)=>(F(),re("div",{class:"translate-window-container",style:Ae({top:`${z(N)}px`,left:`${z(B)}px`}),ref_key:"containerRef",ref:te},[V.showLeftDragZone?(F(),re("div",{key:0,class:"translate-window-drag-zone",onMousedown:Q[0]||(Q[0]=cn(()=>{},["prevent"])),ref_key:"dragZoneRef",ref:x},[oe(it,{style:{width:"12px"},icon:"drag",size:20})],544)):ge("",!0),y("div",pd,[y("div",{class:"translate-window-header-wrapper",style:Ae({cursor:z(P)?"grabbing":"grab"}),onMousedown:Q[2]||(Q[2]=cn(()=>{},["prevent"])),ref_key:"headerWrapperRef",ref:I},[oe(Vc,{ref_key:"translateWindowHeaderRef",ref:T,"translate-type":X.value,"show-target-language-input":X.value===z(q).TRANSLATE,"target-language-prop":ue.value,"source-text":V.sourceText,"user-info-refreshed":p.value,"report-page-name":g.value,"translate-replace-type":V.translateReplaceType,onClose:ne,onAlwayCloseConfirm:Q[1]||(Q[1]=he=>r("alwayCloseConfirm",he)),onTargetLanguageChange:j,onServiceChange:K,onFunctionChange:O},null,8,["translate-type","show-target-language-input","target-language-prop","source-text","user-info-refreshed","report-page-name","translate-replace-type"])],36),oe(cd,{ref_key:"upBottomResultRef",ref:A,"up-translate-type":X.value,"bottom-translate-type":Ee.value,"source-text":V.sourceText,service:L.value,"target-language":ue.value,"is-up-result-collapsed":i.value,"translate-replace-type":V.translateReplaceType,"user-info-refreshed":p.value,"is-dragging":z(P),"up-output-text":h.value,"onUpdate:upOutputText":Q[3]||(Q[3]=he=>h.value=he),"show-action-bar":G.value,"onUpdate:showActionBar":Q[4]||(Q[4]=he=>G.value=he),"report-page-name":g.value,onReplace:Se,onOpenModelSelect:Y,onSwitchService:Z,onTargetLanguageChange:j},null,8,["up-translate-type","bottom-translate-type","source-text","service","target-language","is-up-result-collapsed","translate-replace-type","user-info-refreshed","is-dragging","up-output-text","show-action-bar","report-page-name"]),Dt(oe(xc,{"translate-type":Ee.value,"onUpdate:translateType":Q[5]||(Q[5]=he=>Ee.value=he),"show-explain":!0,"show-improve-write":X.value!==z(q).IMPROVE_WRITE,"show-translate":X.value!==z(q).TRANSLATE,"report-page-name":g.value},null,8,["translate-type","show-improve-write","show-translate","report-page-name"]),[[yt,G.value]])]),z(l)?(F(),Le(Kr,{key:1,source:"plugin_select_to_translate_login_guide_page",ref_key:"loginTipRef",ref:E,onClose:Q[6]||(Q[6]=he=>l.value=!1),style:Ae(_.value)},null,8,["style"])):ge("",!0)],4))}}),Ho=Ve(gd,[["__scopeId","data-v-b2b705f8"]]),fd={class:"input-translate-ball-tips-content"},hd={class:"input-translate-ball-tips-icon-wrapper"},md=["src"],Fs=80,vd=Pe({__name:"InputTranslateBall",emits:["close"],setup(t,{emit:e}){const{improveWriteDone:n,improveWriteText:r,improveWriteError:a,improveWriteErrorCode:s,getCurrentRequestId:o,setCurrentRequestId:u}=mr(),{userInfo:l,contentScriptRefreshUserInfo:c}=Tt(),{userSettings:f,notifyUserSettings:w}=Xe(),{onlineParams:T}=Cn(),{setNoLoginTranslateUseCount:A,textBoxLoginTipShow:x,showLoginTipGuid:I,checkLoginTipShow:L}=hr(),{t:E}=pt(),{setPluginUseTime:_}=Yn(),p=e;let i=null,h=[],g=null,G=null,H=!1,te=!1,ue=!1,X="",Ee="",B=null,N=!1,P="",W=!1,j=null,K=-1,O=-1;const Z=Ue("containerRef"),Y=Ue("ballContentContainer"),Se=Ue("popupContainerRef"),ne=Ue("secondConfirmRef"),V=Ue("inputTranslateSettingRef"),Q=Ue("loginTipRef"),he=Ue("tipRef"),J=Ue("exceedLimitTipRef"),be=Ue("translateIconRef"),_e=Ue("improveWritingButtonRef"),ye=Ue("smallIconRef"),we=D(!1),Fe=D(),Te=D(!1),Oe=D(!1),$e=D(!1),je=D(""),ze=D(!1),Et=D(Tn.CHATGPT),Re=D("pure_text"),ce=D({}),He=D(!1),gt=se(()=>[{value:"1",label:E("hoverBall.closeOneTime")},{value:"2",label:E("hoverBall.disableOnePage")},{value:"3",label:E("hoverBall.disable")}]),et=D(!1),ft=D(!1),Ke=D(!1),kt=D(q.TRANSLATE),wt=D(0),ae=D(!1),De=D(!1),Qe=D({}),ut=D(q.IMPROVE_WRITE),rt=D(""),ie=se(()=>ae.value||He.value||x.value||De.value),d=D(Ye.OPEN_MODAL),b=D(0),C=D(0),$=D("horizontal"),S=se(()=>{var U;return Te.value||Oe.value?!1:!!(ft.value||(U=T.value)!=null&&U.smallTextboxShowTranslate&&wt.value<Fs)}),m=se(()=>{const U=f.value.textboxTranslation.targetLanguage,ee=Zt(U);return ee?E(`language.${ee.value}`)||ee.label:E("language.en")}),v=se(()=>{let U=Et.value;if(!_n(U)){const Ne=f.value.services.find(le=>le.isAIService&&!le.isVipService);U=(Ne==null?void 0:Ne.value)||Tn.CHATGPT}return Ha.find(Ne=>Ne.value===U)}),R=se(()=>$.value==="vertical"?{right:"0px",direction:"ltr"}:et.value?{left:"0px",direction:"ltr"}:{right:"0px",direction:"rtl"}),M=D({bottom:"40px",transform:"translateX(50%)"}),me=D(0),Ce=()=>{!Ke.value||!Z.value||!Y.value||_t(()=>{var vn;if(!J.value)return;const U=((vn=J.value)==null?void 0:vn.$el)||J.value;if(!U||!Z.value||!Y.value)return;const ee=Z.value.getBoundingClientRect(),Ne=Y.value.getBoundingClientRect(),le=U.getBoundingClientRect(),xe=10,st=window.innerWidth,Ct=window.innerHeight,We=300,ct=40,Wt=ee.bottom,rn=Wt-le.height-ct,ht=Wt-ct;let mt=ct;if(rn<xe){const zt=xe-rn;mt=ct-zt}else if(ht>Ct-xe){const zt=ht-(Ct-xe);mt=ct+zt}const qt=Ne.left+Ne.width/2,en={};if(et.value){const zt=qt,rr=zt-We/2,Tr=zt+We/2;let Xt=zt-ee.left;rr<xe?Xt=xe+We/2-ee.left:Tr>st-xe&&(Xt=st-xe-We/2-ee.left),en.left=`${Xt}px`}else{const zt=qt,rr=zt-We/2,Tr=zt+We/2,Xt=ee.right;let xn=Xt-zt;Tr>st-xe?xn=Xt-(st-xe-We/2):rr<xe&&(xn=Xt-(xe+We/2)),en.right=`${xn}px`}M.value={bottom:`${mt}px`,transform:"translateX(50%)",...en},_t(()=>{lt()})})},lt=()=>{if(!Ke.value||!Z.value||!Y.value){me.value=0;return}_t(()=>{var We,Pt;if(S.value&&ye.value){const ct=ye.value,Wt=((We=J.value)==null?void 0:We.$el)||J.value;if(!Wt){me.value=0;return}const rn=ct.getBoundingClientRect(),ht=Wt.getBoundingClientRect(),mt=rn.left+rn.width/2,qt=ht.left,en=mt-qt;me.value=en;return}let U=null;if(kt.value===q.TRANSLATE)be.value&&(U=be.value);else if(kt.value===q.IMPROVE_WRITE&&_e.value){const ct=Array.isArray(_e.value)?_e.value[0]:_e.value;U=(ct==null?void 0:ct.$el)||ct}if(!U||!J.value){me.value=0;return}const ee=((Pt=J.value)==null?void 0:Pt.$el)||J.value;if(!ee){me.value=0;return}const Ne=U.getBoundingClientRect(),le=ee.getBoundingClientRect(),xe=Ne.left+Ne.width/2,st=le.left,Ct=xe-st;me.value=Ct})};ve(Ke,U=>{U&&Ce()}),ve([kt,et,S],()=>{Ke.value&&Ce()});const Ot=()=>{Ke.value&&Ce()};window.addEventListener("resize",Ot),ve([we,Fe],()=>{Ke.value&&Ce()}),ve(ie,U=>{U&&_t(()=>{const ee={};let Ne=0,le=0;if(!Z.value||!Y.value)return;ne.value&&(Ne=ne.value.$el.getBoundingClientRect().height,le=ne.value.$el.getBoundingClientRect().width),V.value&&(Ne=V.value.$el.getBoundingClientRect().height,le=V.value.$el.getBoundingClientRect().width),Q.value&&(Ne=Q.value.$el.getBoundingClientRect().height,le=Q.value.$el.getBoundingClientRect().width);const xe=Z.value.getBoundingClientRect(),{bottom:st,right:Ct,left:We,top:Pt}=xe,ct=40,Wt=6,rn=8,ht=10,mt=Y.value.getBoundingClientRect(),qt=window.innerWidth,en=window.innerHeight,vn=mt.right-qt>0?mt.right-qt:0,zt=mt.left<0?-mt.left:0;if(Qe.value={},$.value==="vertical"){const rr=xe.right-mt.right;ee.right=`${rr+mt.width+rn}px`;const Xt=mt.top-xe.top+(mt.height-Ne)/2,xn=Pt+Xt,Es=xn+Ne;if(Es>en-ht){const aa=Es-(en-ht);ee.top=`${Xt-aa}px`}else if(xn<ht){const aa=ht-xn;ee.top=`${Xt+aa}px`}else ee.top=`${Xt}px`}else st+Wt+Ne>en?ee.bottom=`${ct}px`:ee.top=`calc(100% + ${Wt}px)`,et.value?ee.left=We+le>qt?`${qt-We-le-ht}px`:`${zt+ht}px`:ee.right=Ct<le?`${Ct-le-ht}px`:`${vn+ht}px`;Qe.value=ee})}),ve(x,U=>{U&&(Oe.value=!0)}),ve(we,U=>{U===!0&&k.reportShowEvent("plugin_textbox_translate_entry",{position:mn()})});let Mt=null;ve(Oe,U=>{clearTimeout(Mt),U===!0&&(Mt=setTimeout(()=>{k.reportShowEvent("plugin_textbox_translate_page",{position:mn()})},500))});const tt=()=>{He.value=!1,ae.value=!1,x.value=!1},Vt=()=>{H=!1};Jt(Y,()=>{!Te.value&&!te&&(H=!0)},{ignore:[Se]});const at=io(()=>{var st;if(!i)return;let{left:U,top:ee,width:Ne,height:le}=i.getBoundingClientRect();const xe=h[0];if(xe){const{width:Ct,height:We}=xe.getBoundingClientRect();(Ne>Ct||le>We)&&({top:ee,left:U,width:Ne,height:le}=bu(xe,i))}if(ee+le<0||ee>window.innerHeight){we.value=!1;return}((st=T.value)!=null&&st.smallTextboxShowTranslate||we.value===!1&&i.clientHeight>=Fs)&&(we.value=!0),wt.value=le,Fe.value={left:`${U}px`,top:`${ee}px`,width:`${Ne}px`,height:`${le}px`,backgroundColor:"transparent"}},50,!0),bt=qa(()=>{if(!(!Y.value||!we.value||ie.value||Te.value)){if(i!=null&&i.isContentEditable){const U=Y.value.getBoundingClientRect(),ee=mu(i);for(const Ne of ee){const le=vu(Ne);if(le&&le.left<U.right&&le.right>U.left&&le.top<U.bottom&&le.bottom>U.top){ft.value=!0;return}}ft.value=!1}if((i==null?void 0:i.tagName)==="TEXTAREA"){const{lineRects:U}=hu(i),ee=Y.value.getBoundingClientRect(),Ne=10;for(const le of U)if(le.left<ee.right+Ne&&le.right>ee.left-Ne&&le.top<ee.bottom&&le.bottom>ee.top){ft.value=!0;return}ft.value=!1}return!1}},100),Lt=U=>{U.key==="Backspace"&&bt(),(U.ctrlKey||U.metaKey)&&(U.key==="z"||U.key==="y")&&bt()},Rt=()=>!ji.includes(location.hostname),er=U=>{U&&(Dn(i),clearTimeout(G),G=null,i=U,ft.value=!1,Oe.value=!1,$e.value=!1,H=!0,tt(),et.value=fu(U),h=Eu(U),at(),bt(),U.addEventListener("input",bt),U.addEventListener("paste",bt),U.addEventListener("cut",bt),U.addEventListener("keydown",Lt),Rt()&&(U.addEventListener("input",on),U.addEventListener("keydown",on),U.addEventListener("paste",on),U.addEventListener("cut",on)),U.addEventListener("scroll",bt),g=new ResizeObserver(()=>{at(),bt()}),g.observe(U),h.forEach(ee=>{ee.addEventListener("scroll",at)}),window.addEventListener("scroll",at),window.addEventListener("resize",at),U.addEventListener("blur",tr))},Dn=(U=i)=>{U&&(U.removeEventListener("blur",tr),U.removeEventListener("input",bt),U.removeEventListener("paste",bt),U.removeEventListener("cut",bt),U.removeEventListener("keydown",Lt),U.removeEventListener("scroll",bt),Rt()&&(U.removeEventListener("input",on),U.removeEventListener("keydown",on),U.removeEventListener("paste",on),U.removeEventListener("cut",on)),g==null||g.disconnect(),g=null,h.forEach(ee=>{ee.removeEventListener("scroll",at)}),window.removeEventListener("scroll",at),window.removeEventListener("resize",at),we.value=!1,Fe.value={},i=null,h=[],Ke.value=!1)},Sn=()=>{i&&i!==document.activeElement&&(ue=!0,i.focus())},tr=()=>{te=!1,!Te.value&&(De.value||(G=setTimeout(()=>{G=null,H&&!De.value&&Dn()},500)))},vr=()=>{Ke.value=!1},Er=()=>{!Te.value&&!ie.value&&(Oe.value=!0)},na=()=>{!Te.value&&!ie.value&&(Oe.value=!1)},br=()=>{if((i==null?void 0:i.tagName)==="TEXTAREA"){const U=i,{selectionStart:ee,selectionEnd:Ne,value:le}=U;return ee!==Ne?(N=!1,le.substring(ee,Ne)):(N=!0,le)}if(i!=null&&i.isContentEditable){const U=window.getSelection(),ee=(U==null?void 0:U.toString())||"";if(ee&&(U!=null&&U.rangeCount)&&U.rangeCount>0){const Ne=U.getRangeAt(0);if(i.contains(Ne.commonAncestorContainer))return N=!1,ee}return N=!0,i.innerText}return""},ls=async(U,ee)=>{if(Sn(),U.code===0){const le=U.data&&U.data[0].text||"";ia(le,i,N),ee===q.TRANSLATE&&(Ee=le)}else if(U.code===ke.EXTEND_LIMIT)kt.value=ee,Ke.value=!0;else{if($e.value=!0,je.value=E("common.loadingFailedPlease",[E("common.retry")]),U.code===ke.NOT_LOGIN){const le=encodeURIComponent(`${fe.pluginDescPage}?from=extensionLogin`);qe(`${fe.loginUrl}?feature=plugin_input_translate_error&cb=${le}`)}U.code===ke.PRIVILEGE_INSUFFICIENT&&qe(`${fe.priceUrl}?source=plugin_input_translate_error`),setTimeout(()=>{$e.value=!1,je.value=""},2e3)}Te.value=!1,await L()?(i==null||i.blur(),I(Vn.TEXTBOX)):(H=!0,clearTimeout(G),G=null),_()},Ti=U=>{d.value===Ye.REPLACE&&(U.preventDefault(),ra())},wi=()=>{d.value===Ye.OPEN_MODAL&&ra()},ra=async()=>{if(Te.value)return;Ke.value=!1,await c();let U=d.value===Ye.OPEN_MODAL?P:br();if(d.value===Ye.OPEN_MODAL&&(N=W),U.trim()===Ee.trim()&&(U=X),Ee="",X="",!U.trim())return;if(k.reportClickEvent("plugin_textbox_translate_page","translate",{position:mn()}),d.value===Ye.OPEN_MODAL){ut.value=q.TRANSLATE,await _t(),De.value=!0;return}Te.value=!0,Oe.value=!1,ze.value=!1,tt();const ee=f.value.textboxTranslation.targetLanguage,Ne=f.value.translationService;let le="";try{le=await nt(Ie.DETECT_TEXT_LANGUAGE,U)}catch{le=fe.defaultSourceLanguage}X=U,await A();const xe=await Zn({texts:[{text:U}],from:le,to:ee,service:Ne,type:q.SELECT_TEXT},{position:"plugin_textbox_translate",feature:"plugin_textbox_translate"});ls(xe,q.TRANSLATE)},Ai=U=>chrome.runtime.getURL(`public/modelIcons/${U}.png`),cs=(U,ee,Ne)=>{if(De.value)return;const le=br();if(P=le,W=N,i!=null&&i.isContentEditable){const st=window.getSelection();st&&st.rangeCount>0?j=st.getRangeAt(0).cloneRange():j=null}else if((i==null?void 0:i.tagName)==="TEXTAREA"){const st=i;K=st.selectionStart,O=st.selectionEnd}le.trim().length>0?nr(U,ee,Ne):nr(U,"pure_text",E("common.enterTextToContinue"))},nr=(U,ee,Ne)=>{if(!Z.value)return;if(Te.value||ie.value||$e.value){ze.value=!1;return}const le=Z.value.getBoundingClientRect(),xe=U.target.getBoundingClientRect(),st=le.right-xe.right,Ct=xe.left-le.left;ce.value={},Et.value=Ne,Re.value=ee,ze.value=!0,_t(()=>{if(!he.value)return;const We=he.value.clientWidth,Pt=he.value.clientHeight,ct=10,Wt=window.innerWidth,rn=window.innerHeight;if($.value==="vertical"){if(!Y.value)return;const ht=Y.value.getBoundingClientRect(),mt=xe.top-le.top,qt=xe.top-(Pt-xe.height)/2;if(qt+Pt>rn-ct){const vn=qt+Pt-(rn-ct);ce.value={top:`${mt-(Pt-xe.height)/2-vn}px`}}else if(qt<ct){const vn=ct-qt;ce.value={top:`${mt-(Pt-xe.height)/2+vn}px`}}else ce.value={top:`${mt-(Pt-xe.height)/2}px`};const en=le.right-ht.right;ce.value.right=`${en+ht.width+8}px`,ce.value.bottom="auto"}else if(et.value){const ht=xe.left-(We-xe.width)/2;if(ht+We>Wt-ct){const mt=ht+We-(Wt-ct);ce.value={left:`${Ct-(We-xe.width)/2-mt}px`}}else if(ht<ct){const mt=ct-ht;ce.value={left:`${Ct-(We-xe.width)/2+mt}px`}}else ce.value={left:`${Ct-(We-xe.width)/2}px`}}else{const ht=xe.right+(We-xe.width)/2;if(ht-We<ct){const mt=ct-(ht-We);ce.value={right:`${st-(We-xe.width)/2-mt}px`}}else if(ht>Wt-ct){const mt=ht-(Wt-ct);ce.value={right:`${st-(We-xe.width)/2+mt}px`}}else ce.value={right:`${st-(We-xe.width)/2}px`}}})},Fn=()=>{Oe.value=!1,H=!0,tt(),Sn()},ds=U=>{He.value=!1,Oe.value=!1,p("close",U)},_i=()=>{if(He.value){Fn();return}tt(),ze.value=!1,He.value=!0,k.reportShowEvent("plugin_textbox_retention_page",{position:mn()}),k.reportClickEvent("plugin_textbox_translate_page","close",{position:mn()})},Ci=()=>{if(ae.value){Fn();return}tt(),ze.value=!1,ae.value=!0,k.reportClickEvent("plugin_textbox_translate_page","settings",{position:mn()})},yi=U=>{d.value===Ye.REPLACE&&(U.preventDefault(),ps())},Di=()=>{d.value===Ye.OPEN_MODAL&&ps()},ps=async()=>{if(Te.value)return;Ke.value=!1,await c();let U=d.value===Ye.OPEN_MODAL?P:br();if(d.value===Ye.OPEN_MODAL&&(N=W),!U.trim())return;if(k.reportClickEvent("plugin_textbox_translate_page","improve_writing",{position:mn()}),U=U.substring(0,Dr),d.value===Ye.OPEN_MODAL){ut.value=q.IMPROVE_WRITE,await _t(),De.value=!0;return}if(!l.value){const We=encodeURIComponent(`${fe.pluginDescPage}?from=extensionLogin`);qe(`${fe.loginUrl}?feature=plugin_input_translate_error&cb=${We}`);return}B&&(B&&B(),B=null);let ee=f.value.translationService;if(!_n(ee)){const We=f.value.services.find(Pt=>Pt.isAIService&&!Pt.isVipService);ee=(We==null?void 0:We.value)||Tn.CHATGPT,w({translationService:ee})}Te.value=!0,Oe.value=!1,ze.value=!1,tt();const le=f.value.textboxTranslation.targetLanguage;u(q.IMPROVE_WRITE),n.value=!1,r.value="",a.value=!1,s.value=void 0;const{resultPromise:xe,abort:st}=zu({translateType:q.IMPROVE_WRITE,input:U,engineCode:fo(ee),targetLanguage:le,component:go[q.SELECT_TEXT],requestId:o(q.IMPROVE_WRITE)},{position:"plugin_textbox_translate_improve_writing",feature:"plugin_textbox_improve_writing"});B=st;const Ct=await xe;ls(Ct,q.IMPROVE_WRITE)},gs=D(0),fs=se(()=>!Rt()||(gs.value,!i)||document.activeElement!==i?!1:document.queryCommandEnabled("undo")),on=()=>{Rt()&&gs.value++},Si=()=>{if(fs.value&&i){k.reportClickEvent("plugin_textbox_translate_page","undo",{position:mn()}),document.activeElement!==i&&i.focus();try{document.execCommand("undo")}catch{}Rt()&&_t(()=>{on()}),Oe.value=!0}},xi=()=>{Fn(),d.value===Ye.REPLACE&&ra()},hs=U=>U.tagName==="TEXTAREA"||U.isContentEditable,ms=U=>{const ee=getComputedStyle(U),Ne=ee.getPropertyValue("opacity"),le=ee.getPropertyValue("display");return!(Ne==="0"||le==="none")},vs=U=>{const ee=U.target;if(hs(ee)&&ms(ee)){if(te=!0,ue){ue=!1;return}Te.value||er(ee)}};function Li(U){d.value===Ye.OPEN_MODAL?(ia(U,i,{selectAll:N,savedRange:j,savedSelectionStart:K,savedSelectionEnd:O}),j=null,K=-1,O=-1,De.value=!1):ia(U,i,N)}function mn(){return d.value===Ye.REPLACE?"plugin_textbox_translate_page_replace":"plugin_textbox_translate_page_noreplace"}return Wa(async()=>{Wi.includes(location.hostname)?d.value=Ye.OPEN_MODAL:d.value=Ye.REPLACE,$.value="horizontal",await nt(Ie.DETECT_SYSTEM_LANGUAGE),await nt(Ie.DETECT_PAGE_LANGUAGE);const{textboxTranslateBlackList:U=[]}=T.value||{};Kt(window.location.href,U)||(document.activeElement&&hs(document.activeElement)&&ms(document.activeElement)&&(te=!0,er(document.activeElement)),document.addEventListener("focus",vs,!0))}),ve(De,U=>{if(U){if(rt.value=d.value===Ye.OPEN_MODAL?P:br(),N=d.value===Ye.OPEN_MODAL?W:N,!Z.value||!Y.value)return;const ee=Z.value.getBoundingClientRect(),Ne=Y.value.getBoundingClientRect();if($.value==="vertical"){const{top:le}=ee,xe=400,st=10,Ct=Ne.left-xe;Ct>=st?C.value=Ct:C.value=st;const We=Ne.top-ee.top;b.value=le+We}else{const{top:le,left:xe,height:st,width:Ct}=ee;b.value=le+st+10,C.value=xe+Ct-30}}else Sn(),j=null,K=-1,O=-1}),yn(()=>{Dn(),document.removeEventListener("focus",vs,!0),window.removeEventListener("resize",Ot)}),(U,ee)=>{const Ne=zi("i18n-t");return F(),re(Ft,null,[oe(zn,{name:"slow-fade-in"},{default:Ze(()=>[we.value?(F(),re("div",{key:0,ref_key:"containerRef",ref:Z,class:Je(["input-translate-ball-container",{vertical:$.value==="vertical"}]),style:Ae(Fe.value)},[y("div",{ref:"ballContentContainer",onClick:Vt,style:Ae(R.value),class:Je(["input-translate-ball-content",{hover:Oe.value,"ball-content-small":S.value,translating:Te.value}]),onMouseleave:na,onMouseenter:Er},[S.value?(F(),re("div",{key:0,ref_key:"smallIconRef",ref:ye,class:"input-translate-ball-small-icon",style:Ae(et.value?{left:"11px"}:{right:"11px"})},null,4)):ge("",!0),S.value?ge("",!0):(F(),re("div",{key:1,ref_key:"translateIconRef",ref:be,class:Je([{translating:Te.value},"translateIcon"])},[Te.value?(F(),Le(it,{key:1,class:"translate-loading-icon",icon:"loading",size:14})):(F(),Le(it,{key:0,onMousedown:Ti,onClick:wi,icon:"translate-text-white",onMouseenter:ee[0]||(ee[0]=le=>cs(le,"pure_text",z(E)("hoverBall.tips.translate",[m.value]))),onMouseleave:ee[1]||(ee[1]=le=>ze.value=!1),size:20}))],2)),S.value?ge("",!0):(F(),re("div",{key:2,style:Ae(et.value?{marginLeft:"0"}:{marginRight:"0"}),class:"otherIcons"},[oe(Ut,{ref_key:"improveWritingButtonRef",ref:_e,size:28,onMouseenter:ee[2]||(ee[2]=le=>cs(le,"use_model",z(f).translationService)),onMouseleave:ee[3]||(ee[3]=le=>ze.value=!1),onMousedown:yi,onClick:Di,active:De.value,icon:"edit"},null,8,["active"]),oe(Ut,{onMouseenter:ee[4]||(ee[4]=le=>nr(le,"pure_text",z(E)("common.switchLanguage"))),onMouseleave:ee[5]||(ee[5]=le=>ze.value=!1),onClick:Ci,active:ae.value,size:28,icon:"open-setting"},null,8,["active"]),oe(Ut,{size:28,onMouseenter:ee[6]||(ee[6]=le=>nr(le,"pure_text",z(E)("common.undo"))),onMouseleave:ee[7]||(ee[7]=le=>ze.value=!1),onClick:Si,active:!1,disabled:!fs.value,icon:"undo"},null,8,["disabled"]),oe(Ut,{class:"always-close-icon-button",size:28,onMouseenter:ee[8]||(ee[8]=le=>nr(le,"pure_text",z(E)("common.disable"))),onMouseleave:ee[9]||(ee[9]=le=>ze.value=!1),onClick:_i,active:He.value,icon:"alway-close"},null,8,["active"])],4))],38),oe(zn,{name:"slow-fade-in"},{default:Ze(()=>[ze.value?(F(),re("div",{key:0,ref_key:"tipRef",ref:he,style:Ae(ce.value),class:Je(["input-translate-ball-tips",{"model-tip-label":Re.value==="use_model"}])},[Re.value==="use_model"?(F(),Le(Ne,{key:0,keypath:"improveWrite.writeBetterWith"},{default:Ze(()=>{var le,xe;return[y("span",fd,[y("span",hd,[y("img",{class:"input-translate-ball-tips-icon",src:Ai((le=v.value)==null?void 0:le.icon)},null,8,md)]),Gt(" "+pe((xe=v.value)==null?void 0:xe.label),1)])]}),_:1})):(F(),re(Ft,{key:1},[Gt(pe(Et.value),1)],64))],6)):ge("",!0)]),_:1}),$e.value?(F(),re("div",{key:0,style:Ae(et.value?{left:"0px"}:{right:"0px"}),class:"input-translate-ball-tips error-tips"},pe(je.value),5)):ge("",!0),Ke.value?(F(),Le(Jn,{key:1,ref_key:"exceedLimitTipRef",ref:J,"translate-type":kt.value,"need-report-sub-type":!0,scene:"plugin_textbox_translate_page_free_trial_limit","report-page-name":"plugin_textbox_translate_page",position:"bottom",offset:`${me.value}px`,style:Ae([{position:"absolute",width:"300px","pointer-events":"all"},M.value]),onClose:vr},null,8,["translate-type","offset","style"])):ge("",!0),y("div",{ref_key:"popupContainerRef",ref:Se,class:"input-translate-ball-popup-container"},[He.value?(F(),Le(Qr,{key:0,ref_key:"secondConfirmRef",ref:ne,source:"input_ball",style:Ae(Qe.value),title:z(E)("common.disableDesc",[z(E)("inputBall.name")]),onClose:Fn,onConfirm:ds,options:gt.value,class:"input-translate-ball-popup"},null,8,["style","title","options"])):ge("",!0),ae.value?(F(),Le(Ya,{key:1,ref_key:"inputTranslateSettingRef",ref:V,style:Ae(Qe.value),onClose:Fn,onSettingChange:xi},null,8,["style"])):ge("",!0),z(x)?(F(),Le(Kr,{key:2,source:"plugin_textbox_translate_login_guide_page",ref_key:"loginTipRef",ref:Q,onClose:Fn,class:"input-translate-ball-popup",style:Ae(Qe.value)},null,8,["style"])):ge("",!0)],512)],6)):ge("",!0)]),_:1}),De.value?(F(),Le(Ho,{key:0,top:b.value,left:C.value,"source-text":rt.value,"translate-replace-type":z(Ye).OPEN_MODAL,"up-translate-type":ut.value,"onUpdate:upTranslateType":ee[10]||(ee[10]=le=>ut.value=le),onClose:ee[11]||(ee[11]=le=>De.value=!1),onReplace:Li,onAlwayCloseConfirm:ds},null,8,["top","left","source-text","translate-replace-type","up-translate-type"])):ge("",!0)],64)}}}),Ed=Ve(vd,[["__scopeId","data-v-29c9e78e"]]),bd={key:0,class:"pdf-banner-container"},Td={class:"pdf-banner-desc"},wd={class:"pdf-translate-close"},ya=50,Ad=Pe({__name:"PdfBanner",setup(t){const{t:e}=pt(),{userSettings:n}=Xe(),{translatePdfPage:r}=kn(),{width:a}=so(),s=D(!1),o=D(!1),u=D(!1),l=D(!1),c=se(()=>Ra.en.language[n.value.targetLanguage]),f=se(()=>u.value?` Translate Research Paper to ${c.value}  Supporting arXiv, CORE and more`:e("banner.desc")),w=se(()=>u.value?"plugin_academia_translate_bar":"plugin_translate_pdf_bar"),T=se(()=>u.value?"Translate Now":e("translate.translateNow")),A=se(()=>u.value?de.ACADEMIC_CLOSE_TIME:de.PDF_BANNER_CLOSE_TIME),x=se(()=>{const i="fit-content";let h="flex",g="136px";return Wn()?(g=a.value>1024?"210px":a.value>800?"150px":a.value<630?"90px":"120px",h=a.value>630&&a.value<750||a.value<600?"none":"flex"):h=a.value>780||a.value<500?"flex":"none",Wn()?{right:g,top:"4px",width:i,display:h}:{right:g,top:"12px",width:i,display:h}}),I=()=>{r(u.value?"academia":"translateBar"),k.reportClickEvent(w.value,"translate",{link:location.href})},L=()=>{s.value=!1,dt(A.value,Date.now()),k.reportClickEvent(w.value,"close")};ve(()=>s.value,i=>{i?(E(),k.reportShowEvent(w.value)):_()});function E(){const i=yr(location.href);if(i&&[On.ARXIV,On.MDPI].includes(i))document.body.style.transform=`translateY(${ya}px)`;else if(i&&[On.CORE].includes(i))document.body.style.marginTop=`${ya}px`;else if(l.value){const h=document.querySelector('embed[type="application/pdf"]');h&&h instanceof HTMLElement?h.style.top=`${ya}px`:(s.value=!1,o.value=!0)}}function _(){const i=yr(location.href);if(i&&[On.ARXIV,On.MDPI].includes(i))document.body.style.transform="";else if(i&&[On.CORE].includes(i))document.body.style.marginTop="";else if(l.value){const h=document.querySelector('embed[type="application/pdf"]');h&&h instanceof HTMLElement&&(h.style.top="0px")}}async function p(){const i=Tu()[0];try{const h=await fetch(i,{method:"HEAD"}),g=h.headers.get("Content-Length")||h.headers.get("content-length"),G=h.headers.get("Content-Type")||h.headers.get("content-type");return G&&!G.toLowerCase().includes("application/pdf")?(Me.warn(`${i} is not a PDF file, content type: ${G}`),k.reportCustomEvent("pdf_get_error",{type:"notPdf",contentType:G,pdfUrl:i}),!0):Number(g)>Xi?(Me.warn(`PDF size exceeds limit: ${g} bytes`),k.reportCustomEvent("pdf_get_error",{type:"overSize",size:g,pdfUrl:i}),!0):!1}catch{return!1}}return xt(async()=>{if(u.value=!!yr(location.href),l.value=za(),!u.value&&!l.value||l.value&&!u.value&&await p())return;const i=await Ge(A.value);i&&Date.now()-i<7*24*60*60*1e3||setTimeout(()=>{s.value=!0},1e3)}),(i,h)=>(F(),re(Ft,null,[s.value?(F(),re("div",bd,[oe(it,{icon:"tip",size:18}),y("div",Td,pe(f.value),1),oe(tn,{class:"pdf-translate-button",type:"primary",onClick:I},{default:Ze(()=>[Gt(pe(T.value),1)]),_:1}),y("div",wd,[oe(Ut,{icon:"close",onClick:L})])])):ge("",!0),o.value?(F(),re("div",{key:1,style:Ae(x.value),class:"pdf-only-translate-button-container"},[oe(tn,{style:{height:"32px"},type:"primary",onClick:I},{default:Ze(()=>[Gt(pe(T.value),1)]),_:1})],4)):ge("",!0)],64))}}),_d=Ve(Ad,[["__scopeId","data-v-c3f257c8"]]),Cd={class:"plugin-comment-guid-container"},yd={class:"plugin-comment-guid-header"},Dd=["src"],Sd={key:0,class:"plugin-comment-five-star"},xd=["src"],Ld={class:"plugin-comment-dec-container"},Rd={class:"plugin-comment-dec"},Id={class:"plugin-comment-btn-container"},Bd=Pe({__name:"PluginCommentGuid",setup(t){const{locale:e}=pt(),{t:n}=pt(),{onlineParams:r}=Cn(),{closePluginCommentGuid:a}=Yn(),s=se(()=>nn(e.value)),o=()=>chrome.runtime.getURL("public/logo/icon-128.png"),u=()=>chrome.runtime.getURL("public/images/comment.png"),l=se(()=>{var T,A,x,I;return((A=(T=r.value)==null?void 0:T.pluginComment)==null?void 0:A.type)==="5star"?n("comment.desc",[Wn()?"edge":"chrome"]):((I=(x=r.value)==null?void 0:x.pluginComment)==null?void 0:I.npsLinkContent)||"How likely are you to recommend AnyDoc Translator to your friends or colleagues?"}),c=se(()=>{var T,A,x,I;return((A=(T=r.value)==null?void 0:T.pluginComment)==null?void 0:A.type)==="5star"?n("comment.btn",[Wn()?"edge":"chrome"]):((I=(x=r.value)==null?void 0:x.pluginComment)==null?void 0:I.npsLinkTitle)||"Share Feedback Now"}),f=()=>{a("close"),k.reportClickEvent("plugin_fivestar_guide_popup","close")},w=()=>{var A;k.reportClickEvent("plugin_fivestar_guide_popup","go_to_store"),a("go");const T=(A=r.value)==null?void 0:A.pluginComment;if(T&&T.type==="link_nps"&&T.npsLink){window.open(T.npsLink);return}Wn()?window.open("https://microsoftedge.microsoft.com/addons/detail/pajdgpfjcgcdfkccnbinpalbihedpkfm"):window.open("https://chrome.google.com/webstore/detail/aopddeflghjljihihabdclejbojaomaf/reviews")};return(T,A)=>{var x,I;return F(),re("div",Cd,[y("div",yd,[y("div",{class:"plugin-comment-guid-header-logo",style:Ae({"flex-direction":s.value?"row-reverse":"row","justify-content":s.value?"flex-end":"flex-start"})},[y("img",{src:o(),style:{height:"24px",width:"24px"}},null,8,Dd),A[0]||(A[0]=y("div",{class:"plugin-comment-logo-name"}," AnyDoc Translator ",-1))],4),oe(Ut,{icon:"close",size:28,onClick:f})]),((I=(x=z(r))==null?void 0:x.pluginComment)==null?void 0:I.type)==="5star"?(F(),re("div",Sd,[y("img",{src:u(),style:{height:"40px"}},null,8,xd)])):ge("",!0),y("div",Ld,[y("div",Rd,pe(l.value),1)]),y("div",Id,[oe(tn,{class:"plugin-comment-btn",size:"large",block:"",type:"primary",onClick:w},{default:Ze(()=>[Gt(pe(c.value),1)]),_:1})])])}}}),Nd=Ve(Bd,[["__scopeId","data-v-fef91c63"]]),kd={key:0,class:"dialog-mask"},Fd={class:"dialog-header"},Od={class:"dialog-title"},Md={class:"dialog-content"},Pd={class:"dialog-body"},$d={key:0},Ud={class:"dialog-actions"},qd=Pe({__name:"ConfirmDialog",props:{width:{default:360},title:{default:""},content:{default:""},confirmText:{default:""},cancelText:{default:""},showCancel:{type:Boolean,default:!1},showMask:{type:Boolean,default:!1},colorfulConfirmBtn:{type:Boolean,default:!1}},emits:["confirm","cancel","update:visible"],setup(t,{emit:e}){const n=e;function r(){n("cancel"),n("update:visible",!1)}function a(){n("confirm"),n("update:visible",!1)}return(s,o)=>(F(),re(Ft,null,[s.showMask?(F(),re("div",kd)):ge("",!0),y("div",{class:"confirm-dialog",style:Ae({width:`${s.width}px`})},[y("div",Fd,[y("h3",Od,pe(s.title||s.$t("common.tips")),1),oe(Ut,{icon:"close",size:28,onClick:r})]),y("div",Md,[y("div",Pd,[fr(s.$slots,"default",{},()=>[s.content?(F(),re("p",$d,pe(s.content),1)):ge("",!0)],!0)]),y("div",Ud,[s.showCancel?(F(),Le(tn,{key:0,onClick:r},{default:Ze(()=>[Gt(pe(s.cancelText||s.$t("common.cancel")),1)]),_:1})):ge("",!0),oe(tn,{type:"primary",class:Je({"colorful-confirm-btn":s.colorfulConfirmBtn}),onClick:a},{default:Ze(()=>[Gt(pe(s.confirmText||s.$t("common.confirm")),1)]),_:1},8,["class"])])])],4)],64))}}),Go=Ve(qd,[["__scopeId","data-v-eca39056"]]),Hd=Pe({__name:"PrivilegeDialog",setup(t){const{exceedLimitDialogShow:e,showMask:n}=fn(),{t:r}=pt();function a(){e.value=!1,n.value=!0,k.reportClickEvent("plugin_free_trial_limit_upgrade_popup","close")}function s(){qe(`${fe.priceUrl}?source=plugin_translate_website&position=ai_model_free_trial_limit`),k.reportClickEvent("plugin_free_trial_limit_upgrade_popup","upgrade_now")}return xt(()=>{k.reportShowEvent("plugin_free_trial_limit_upgrade_popup")}),(o,u)=>(F(),Le(Go,{"colorful-confirm-btn":!0,content:z(r)("translate.limitTip",[z(r)("common.upgradeNow").toLowerCase()]),"confirm-text":z(r)("common.upgradeNow"),"show-mask":z(n),onConfirm:s,onCancel:a},null,8,["content","confirm-text","show-mask"]))}}),Gd=Pe({__name:"RefreshPaymentDialog",setup(t){const{refreshPaymentDialogShow:e,showMask:n}=fn(),{t:r}=pt(),{refreshUserInfo:a}=Tt();function s(){e.value=!1}function o(){e.value=!1,a()}return xt(()=>{k.fireEvent("premium_promotion_popup",{action:"show",item:"payment_refresh_popup_page"})}),(u,l)=>(F(),Le(Go,{content:z(r)("common.refreshPaymentDesc"),"confirm-text":z(r)("common.refreshPage"),"show-mask":z(n),onConfirm:o,onCancel:s},null,8,["content","confirm-text","show-mask"]))}}),Vd={class:"upgrade-dialog"},Wd={class:"dialog-content"},zd={class:"content-left"},jd={class:"dialog-title"},Xd={class:"features-list"},Yd={class:"content-right"},Kd=Pe({__name:"upgradeDialog",emits:["close"],setup(t){const{t:e}=pt(),{showMask:n,closePageDialog:r,upgradeDialogType:a,refreshPaymentDialogShow:s,upgradeDialogScene:o}=fn(),u=se(()=>o.value==="subtitle"?"web_translate_subtitle":"web_translate_image"),l=se(()=>o.value==="subtitle"?"web_subtitle_translate_payment_popup":"web_image_translate_payment_popup"),c=se(()=>[{highlight:a.value==="subtitle",text:e("upgradeDialog.subtitleFeature")},{highlight:!1,text:e("upgradeDialog.imageFeature")},{highlight:!1,text:e("upgradeDialog.textFeature")},{highlight:!1,text:e("upgradeDialog.exportFeature")},{highlight:!1,text:e("upgradeDialog.noWatermarkFeature")}]),f=()=>chrome.runtime.getURL("public/images/subtitleUpgrade.png"),w=()=>chrome.runtime.getURL("public/images/dialog-close.png"),T=()=>{r(),k.fireEvent("premium_promotion_popup",{action:"click",page_name:l.value,item:"close"})},A=()=>{const x=`${fe.priceUrl}?source=${u.value}&position=${l.value}`;qe(x),setTimeout(()=>{r(),s.value=!0},1e3),k.fireEvent("premium_promotion_popup",{action:"click",page_name:l.value,item:"upgrade_now"})};return xt(()=>{k.fireEvent("premium_promotion_popup",{action:"show",item:l.value})}),(x,I)=>(F(),re("div",{class:Je(["upgrade-dialog-overlay",{"with-mask":z(n)}])},[y("div",Vd,[y("div",{class:"dialog-close",onClick:T,style:Ae({backgroundImage:`url(${w()})`})},null,4),y("div",Wd,[y("div",zd,[y("h2",jd,pe(x.$t("upgradeDialog.title")),1),y("div",Xd,[(F(!0),re(Ft,null,hn(c.value,(L,E)=>(F(),re("div",{key:E,class:"feature-item"},[oe(it,{icon:"check",size:20,class:"check-icon"}),y("span",{class:Je(["feature-text",{highlight:L.highlight}])},pe(L.text),3)]))),128))]),y("div",{class:"upgrade-button",onClick:A},pe(x.$t("common.upgradeNow")),1)]),y("div",Yd,[y("div",{class:"upgrade-image",style:Ae({backgroundImage:`url(${f()})`})},null,4)])])])],2))}}),Qd=Ve(Kd,[["__scopeId","data-v-73213492"]]),Ht={DOCUMENT:"document",WINDOW:"window"},Ka=[{eventName:"click",instance:Ht.DOCUMENT,capture:!1},{eventName:"mousedown",instance:Ht.DOCUMENT,capture:!1},{eventName:"mousemove",instance:Ht.DOCUMENT,capture:!1},{eventName:"mouseup",instance:Ht.DOCUMENT,capture:!1},{eventName:"wheel",instance:Ht.DOCUMENT,capture:!1},{eventName:"keydown",instance:Ht.DOCUMENT,capture:!1,customEventListener:t=>{if((t.ctrlKey||t.metaKey)&&t.keyCode===65){const e=new CustomEvent("selectall",{bubbles:!0,cancelable:!0,detail:{originalEvent:t}});t.target.dispatchEvent(e)}}},{eventName:"scroll",instance:Ht.DOCUMENT,capture:!1},{eventName:"focus",instance:Ht.DOCUMENT,capture:!0},{eventName:"resize",instance:Ht.WINDOW,capture:!1},{eventName:"storage",instance:Ht.WINDOW,capture:!1},{eventName:"message",instance:Ht.WINDOW,capture:!1},{eventName:"unload",instance:Ht.WINDOW,capture:!1},{eventName:"selectall",instance:Ht.DOCUMENT,stopIfDefaultPrevented:!0}],Jd=Ka.reduce((t,e)=>(t[e.eventName]=e,t),{}),Vo=new Map;function Zd(t){const e={};return Ka.forEach(({eventName:n})=>{e[n]=new Map}),Vo.set(t,e),e}function Jr(t=window){return Vo.get(t)}function Wo(t){var e;return t.target.frameElement||((e=t.view)==null?void 0:e.frameElement)||window}function Lr(t){return t===t.top}function ep(t){return!Lr(Wo(t))}function tp(t){const e=Wo(t),n=Jr(e);if(!n)return;const r=t.type,a=Jd[r],s=n[r];if(a.customEventListener&&a.customEventListener(t),s){const o=Array.from(s.values()).sort((u,l)=>l._order-u._order);for(let u=0;u<o.length&&(o[u](t),!(t.defaultPrevented&&(t.detail&&t.detail.originalEvent&&t.detail.originalEvent.preventDefault(),a.stopIfDefaultPrevented)));u++);}}function Os(){}function zo(t=window){let e=Jr(t);if(e)return e;e=Zd(t);try{let n=Lr(t)?document:t.contentDocument;const r=Lr(t)?window:t.contentWindow,a=()=>{try{Ka.forEach(s=>{(s.instance===Ht.DOCUMENT?n:r).addEventListener(s.eventName,tp,s.capture)})}catch(s){Me.error("addEventListener error",s)}};if(Lr(t))a();else{t.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms");let s=100;const o=setInterval(()=>{try{if(n=t.contentDocument,!n)return;n.readyState==="complete"&&(n.body.childNodes.length>0?(clearInterval(o),a()):(s--,s<1&&(clearInterval(o),a())))}catch(u){Me.error("iframeInterval error: ",u),clearInterval(o),a()}},1e3)}}catch(n){Me.error("addAllEventListeners error",n.message)}return e}function En(t,e,n=window,r=0){if(!t||!e)return Os;let a=Jr(n);a||(a=zo(n));const s=ur(),o=a[t];return o?(e._order=r,o.set(s,e),()=>o.delete(s)):Os}function bn(t,e,n=window){const r=Jr(n);if(!r)return;const a=r[t];a&&a.forEach((s,o)=>{s===e&&a.delete(o)})}zo();const np=Pe({__name:"WordTranslateBubble",emits:["alwaysClose"],setup(t,{emit:e}){const{t:n}=pt(),{setPluginUseTime:r}=Yn(),{userSettings:a}=Xe(),s=e,o=D(!0),u=D(!1),l=D(!1),c=D(!1),f=D(0),w=D(0),T=D(0),A=D(0),x=D(0),I=D(0),L=D(0),E=D(0),_=D(""),p=D();ve(c,N=>{if(N&&p.value){const P=p.value.getBoundingClientRect();A.value=P.top,T.value=P.left}}),ve(u,N=>{N&&k.reportShowEvent("plugin_select_to_translate_entry")}),Jt(p,()=>{u.value&&(u.value=!1)},{});const i=()=>{c.value=!0,u.value=!1,r(),k.reportClickEvent("plugin_select_to_translate_entry","translate_entry")},h=async()=>{c.value=!1,await sa(50);const N=window.getSelection();N!=null&&N.toString().trim()&&(u.value=!0)};function g(N){var j;if(x.value=N.pageX,I.value=N.pageY,!u.value)return;const W=N.composedPath()[0]||null;W&&((j=p.value)!=null&&j.contains(W))||(u.value=!1)}function G(N){L.value=N.pageX,E.value=N.pageY}function H(N){return N?N.tagName==="INPUT"||N.tagName==="TEXTAREA"||N.getAttribute("contenteditable")==="true"?N:N.querySelector('input, textarea, [contenteditable="true"]'):null}function te(N){const P=W=>{if(W.shadowRoot)return!0;{const j=W.children;for(let K=0;K<j.length;K++)if(P(j[K]))return!0}return!1};!P(N)&&!H(N)||((x.value>L.value||I.value>E.value)&&(l.value=!0),l.value?(w.value=E.value-50,f.value=L.value+2):(f.value=L.value-20,w.value=E.value+15),!c.value&&(u.value=!0))}async function ue(N){var He,gt,et,ft,Ke;if(u.value||Yi(N.target))return;await sa(50);const P=N.target,W=(P==null?void 0:P.ownerDocument)&&P.ownerDocument!==document,j=(He=P==null?void 0:P.ownerDocument)==null?void 0:He.getSelection(),K=j==null?void 0:j.toString().trim();if(!K||!j)return;l.value=!1,_.value=K;const{anchorNode:O,focusNode:Z}=j,Y=30,Se=j.getRangeAt(0),ne=Se.getBoundingClientRect(),{startContainer:V,endContainer:Q}=Se;if(ne.width===0&&ne.height===0){O&&Z&&O===Z&&te(O);return}O===Z&&(x.value>L.value||I.value>E.value)&&(l.value=!0),O!==Z&&V===Z&&Q===O&&(l.value=!0);const he=ne.right-Y,J=ne.left,be=ne.top-Y,_e=ne.bottom,ye=N.pageX,we=((gt=N.view)==null?void 0:gt.scrollY)||0;let Fe=he,Te=_e;l.value&&(Te=be,Fe=J),ye>=J&&ye<=he&&(Fe=ye);const Oe=-2,$e=8,je=l.value?2:-14,ze=l.value?Oe:$e,Et=10;if(f.value=Fe+je,w.value=Te+ze+we,W&&((et=P.ownerDocument.defaultView)!=null&&et.frameElement)){const wt=P.ownerDocument.defaultView.frameElement.getBoundingClientRect(),ae=P.ownerDocument.defaultView.scrollY,De=P.ownerDocument.defaultView.scrollX,Qe=((ft=document.defaultView)==null?void 0:ft.scrollY)||0,ut=((Ke=document.defaultView)==null?void 0:Ke.scrollX)||0;f.value=f.value+wt.left+ut-De,w.value=w.value+wt.top+Qe-ae}const Re=()=>w.value+Y-we>window.innerHeight,ce=()=>w.value-we<0;Re()&&(w.value=window.innerHeight-Y-Et+we,l.value||(w.value=be+Oe+we,l.value=!0)),ce()&&(w.value=Et+we,l.value&&(w.value=_e+$e+we,l.value=!1,Re()&&(w.value=Et+we,l.value=!0))),!c.value&&X()}async function X(){var N,P;try{const W=await co(_.value),j=(N=Zt(W))==null?void 0:N.value,K=a.value.inTextTranslation;Me.info(`
    detectLanguage: ${W},
    sourceTextLanguage: ${j},
    targetLanguage: ${a.value.targetLanguage},
    blockedLanguages: ${K.blockedLanguages}`),j===a.value.targetLanguage&&((P=K.blockedLanguages)!=null&&P.includes(j))?u.value=!1:u.value=!0}catch{u.value=!0}}function Ee(N){var j;if(!N)return!1;const P=((j=N.shadowRoot)==null?void 0:j.activeElement)||void 0,W=[mo.toUpperCase(),"INPUT","TEXTAREA"];return Ee(P)||W.includes(N.tagName)||N.getAttribute("contenteditable")==="true"}async function B(N){var Se;const P=N.target;if(Ee(P))return;const W=((Se=N.detail)==null?void 0:Se.originalEvent)||void 0;if(W&&(Ee(W.target)||ep(W)))return;N.preventDefault();const j=window.getSelection();if(!j)return;j.removeAllRanges();const K=document.createRange();K.selectNodeContents(document.body),j.addRange(K),await sa(50);const O=j.toString().trim();if(!O)return;_.value=O;const Y=j.getRangeAt(0).getBoundingClientRect();Y.width===0&&Y.height===0||(f.value=L.value+5,w.value=E.value+5,!c.value&&X())}return xt(async()=>{En("mousedown",g),En("mousemove",G),En("mouseup",ue),En("selectall",B),document.querySelectorAll("iframe").forEach(P=>{En("mouseup",ue,P),En("mousedown",g,P),En("mousemove",G,P),En("selectall",B,P)})}),yn(()=>{bn("mousedown",g),bn("mousemove",G),bn("mouseup",ue),bn("selectall",B),document.querySelectorAll("iframe").forEach(P=>{bn("mouseup",ue,P),bn("mousedown",g,P),bn("mousemove",G,P),bn("selectall",B,P)})}),(N,P)=>(F(),re(Ft,null,[oe(zn,{name:"fade-in"},{default:Ze(()=>[Dt(y("div",{ref_key:"translateBubbleRef",ref:p,style:Ae({top:w.value+"px",left:f.value+"px"}),class:Je(["word-translate-bubble",{"black-theme":o.value}]),onClick:i},[oe(it,{icon:o.value?"translate-text-white":"translate-text",size:20},null,8,["icon"]),y("div",null,pe(z(n)("translate.translate")),1),y("div",{class:Je(["translate-text-sharp-angle",l.value?"sharp-bottom":"sharp-top"])},null,2)],6),[[yt,u.value]])]),_:1}),oe(zn,{name:"fade-in"},{default:Ze(()=>[c.value?(F(),Le(Ho,{key:0,top:A.value,left:T.value,"translate-replace-type":z(Ye).NONE,"source-text":_.value,show:c.value,onAlwayCloseConfirm:P[0]||(P[0]=W=>s("alwaysClose",W)),onClose:h},null,8,["top","left","translate-replace-type","source-text","show"])):ge("",!0)]),_:1})],64))}}),rp=Ve(np,[["__scopeId","data-v-86790c53"]]);let Ms=!1;const Ps="anydoc-scholar-buttons-container",jo="anydoc-scholar-text",{userSettings:Pr}=Xe();ve(Pr,()=>{document.querySelectorAll(`.${jo}`).forEach(e=>{e instanceof HTMLElement&&(e.innerText=Xo())})});function ap(t){var c,f,w,T;const e=(t.href||"").toLowerCase(),n=(t.textContent||"").toLowerCase(),r=((f=(c=t.querySelector("img"))==null?void 0:c.alt)==null?void 0:f.toLowerCase())||"",a=[/\.pdf$/i,/\/pdf\//i,/[?&]pdf=/i,/type=pdf/i,/format=pdf/i,/application\/pdf/i,/download=pdf/i],s=[/\[pdf\]/i,/pdf\s*version/i,/pdf\s*file/i,/download\s*pdf/i,/view\s*pdf/i,/full\s*text/i];if(a.some(A=>A.test(e))||s.some(A=>A.test(n)||A.test(r)))return!0;const l=((T=(w=t.parentElement)==null?void 0:w.textContent)==null?void 0:T.toLowerCase())||"";return!!s.some(A=>A.test(l))}function sp(t){const e=t.parentNode;return e instanceof Element&&e.classList.contains("wps-buttons-container")}function $s(t){qe(`
    ${fe.fileTranslateRedirectPage}?plugin=anydoc&is_academia=true&pdf_url=${encodeURIComponent(t)}&position=google_academia_translateplugin_translate_bar_translate
  `)}function Xo(){const{targetLanguage:t}=Pr.value;return navigator.language.startsWith("zh")?`[PDF]  [${oa("zh-CN").language[t]}]`:(oa("en").language.targetLanguage,`[PDF] Translate to [${oa("en").language[t]}]Academic Translator`)}const Yo=qa(()=>{document.querySelectorAll(".gs_or_ggsm").forEach(e=>{if(e.dataset.anydocProcessed)return;e.dataset.anydocProcessed="true",e.querySelectorAll("a").forEach(r=>{var a,s;if(ap(r)&&!sp(r)&&!((a=r.parentNode)!=null&&a.querySelector(`.${Ps}`))){const o=document.createElement("div");o.className=Ps,o.style.display="flex",o.style.alignItems="center",o.style.gap="8px";const u=document.createElement("span");u.className=jo,u.textContent=Xo(),u.style.color="#1a0dab",u.style.cursor="pointer",u.style.fontSize="14px",u.addEventListener("mouseenter",()=>{u.style.textDecoration="underline"}),u.addEventListener("mouseleave",()=>{u.style.textDecoration=""}),u.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),$s(r.href),k.reportClickEvent("google_academia_translateplugin_translate_bar","translate_to_target_lang",{link:r.href,target_lang:Pr.value.targetLanguage})}),o.appendChild(u);const l=document.createElement("img");l.style.width="16px",l.style.height="16px",l.style.cursor="pointer",l.src=chrome.runtime.getURL("public/logo/icon-32.png"),l.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),$s(r.href),k.reportClickEvent("google_academia_translateplugin_translate_bar","icon",{link:r.href,target_lang:Pr.value.targetLanguage})}),o.appendChild(l),(s=r.parentNode)==null||s.appendChild(o),Ms||(Ms=!0,k.reportShowEvent("google_academia_translateplugin_translate_bar"))}})})},250);function op(){new MutationObserver(qa(e=>{let n=!1;e.forEach(r=>{r.type==="childList"&&r.addedNodes.length>0&&(n=!0)}),n&&Yo()},250)).observe(document.body,{childList:!0,subtree:!0})}function ip(){return{initScholarEnhance:()=>{Wr()||location.host.includes("scholar.google.")&&(window.addEventListener("load",()=>{op()}),Yo())}}}function Ko(t){t.nodeType===Node.ELEMENT_NODE&&t.removeAttribute("id"),t.childNodes.forEach(Ko)}function up(t){const e=document.querySelector(".ams.bkG");if(e)try{e.click(),setTimeout(()=>{const r=document.querySelector(".ii.gt").cloneNode(!0);Ko(r);const a=document.querySelector(".gmail_quote.gmail_quote_container"),s=a==null?void 0:a.querySelector(".gmail_attr");a&&(Au(a),s&&a.appendChild(s),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("br")),a.appendChild(r),a.appendChild(t))},500)}catch{}}const lp=[{name:vo.GMAIL,pattern:/^https?:\/\/mail\.google\.com(\/.*)?$/i,btnAnchorSelector:"#gb .gb_Je",detailElementSelector:".ii.gt",detailElementParentLevel:1,btnAppendMethod:lr.INSERT_AFTER,translateAnchorSelector:".gE.iv.gt",translateAppendMethod:lr.INSERT_AFTER,detailPattern:/^https?:\/\/mail\.google\.com\/mail\/u\/\d+\/#inbox\/([a-zA-Z0-9]+)$/i,enableFunction:()=>()=>{},disableFunction:()=>{},transferEmail:up}];function Qa(t){for(const e of lp)if(t.match(e.pattern))return e;return null}const cp=["dir"],dp=["src"],pp={class:"banner-content"},gp={class:"header-section"},fp=["src"],hp={class:"title"},mp=["src"],vp={class:"feature-text"},Ep={class:"bottom-section"},bp={class:"enable-text"},Tp={key:1,class:"mail-setting-btn-red-hot"},wp=Pe({__name:"SettingBtn",setup(t){const{locale:e,t:n}=pt(),{contentScriptRefreshUserInfo:r}=Tt(),{userSettings:a,getSettingByKey:s,notifyUserSettings:o}=Xe(),u=Qa(location.href),l=D(!1),c=se(()=>nn(e.value)?"rtl":"ltr"),f=se(()=>a.value.integrations[u.name].enable?"on":"off"),w=Ue("popupContainerRef"),T=Ue("logoRef"),A=D(!1),x=D(a.value.integrations[u.name].enable),I=se(()=>[{id:1,text:n("integration.mail.feature1")},{id:2,text:n("integration.mail.feature2")},{id:3,text:n("integration.mail.feature3")}]);Jt(w,()=>{A.value=!1},{ignore:[T]}),ve(a,(p,i)=>{p.integrations[u.name].enable!==i.integrations[u.name].enable&&(x.value=p.integrations[u.name].enable,p.integrations[u.name].enable?u.disableFunction=u.enableFunction():u.disableFunction())}),ve(A,p=>{p&&k.reportIntergratedShowEvent("mail_translate_settings_popup",{status:f.value})});function L(){A.value=!A.value,l.value=!1,dt(de.MAIL_GUID_SHOW,!0),r(),k.reportIntergratedClickEvent("mail_translate_settings_icon")}function E(){A.value=!1}function _(p){const i=s("integrations");i[u.name].enable=p,o({integrations:i}),p?k.reportIntergratedClickEvent("open_mail_translate_settings_popup"):k.reportIntergratedClickEvent("close_mail_translate_settings_popup")}return xt(async()=>{await Ge(de.MAIL_GUID_SHOW)||(l.value=!0)}),(p,i)=>(F(),re("div",{dir:c.value,class:"mail-setting-container anydoc-translate-ignore"},[y("div",{class:"mail-setting-btn",ref_key:"logoRef",ref:T},[y("img",{ref_key:"logoRef",ref:T,onClick:L,style:{width:"24px",height:"24px",cursor:"pointer"},src:z(pn)("logo/icon-128.png")},null,8,dp)],512),A.value?(F(),re("div",{key:0,ref_key:"popupContainerRef",ref:w,style:Ae(z(Yt)()?"left: 13px;":"right: 13px;"),class:"mail-welcome-banner"},[y("div",pp,[y("div",gp,[y("img",{src:z(pn)("images/celebration.png"),style:{width:"24px",height:"24px"}},null,8,fp),y("div",hp,pe(p.$t("integration.mail.welcome",[z(u).name])),1),oe(Ut,{class:"close-button",icon:"close",size:24,onClick:E})]),y("div",null,[(F(!0),re(Ft,null,hn(I.value,h=>(F(),re("div",{key:h.id,class:"feature-item"},[y("img",{src:z(pn)("images/check.png"),style:{width:"16px",height:"16px"}},null,8,mp),y("div",vp,pe(h.text),1)]))),128))])]),i[1]||(i[1]=y("div",{class:"separator"},null,-1)),y("div",Ep,[y("div",bp,pe(p.$t("integration.mail.enable",[z(u).name])),1),oe($i,{modelValue:x.value,"onUpdate:modelValue":i[0]||(i[0]=h=>x.value=h),onChange:_},null,8,["modelValue"])])],4)):ge("",!0),l.value?(F(),re("div",Tp)):ge("",!0)],8,cp))}}),Ap=Ve(wp,[["__scopeId","data-v-1f5937b9"]]),_p=["dir"],Cp={class:"translate-btn"},yp={class:"logo"},Dp={class:"text-content"},Sp={class:"send-text-content"},xp=Pe({__name:"TranslateBanner",setup(t){const{locale:e,t:n}=pt(),{userSettings:r}=Xe(),{translateElement:a,restoreElement:s,setReportParams:o,deleteElementResult:u}=ko(),{refreshPaymentDialogShow:l}=fn(),{isPageTranslated:c}=kn(),{contentScriptRefreshUserInfo:f}=Tt();let w;const T=Qa(location.href),A=new Map,x=D(),I=D(!1),L=D(!1),E=D(!0),_=Ue("settingBtnRef"),p=D(!1),i=Ue("mailTranslateSettingRef"),h=se(()=>nn(e.value)?"rtl":"ltr"),g=se(()=>zr(e.value)),G=se(()=>{const K=r.value.targetLanguage,O=Zt(K);return O?n(`language.${O.value}`)||O.label:n("language.en")}),H=se(()=>r.value.integrations[T.name].enable?"on":"off");Jt(i,()=>{L.value=!1},{ignore:[_]});const te=(K,O)=>{const Z=`${O.serviceName}-${O.targetLanguage}`;A.set(Z,K),K==="success"&&(E.value=!1),K==="limit"&&(p.value=!0)},ue=()=>{if(!w)return;const{translationService:K,targetLanguage:O}=r.value,Z=A.get(`${K}-${O}`);Z&&te(Z,{serviceName:K,targetLanguage:O}),a(w,te)},X=()=>{I.value&&w&&(L.value=!1,E.value=!0,ue())},Ee=async()=>{c.value||(L.value=!1,p.value=!1,E.value=!0,w&&(I.value?(I.value=!1,s(w),k.reportIntergratedClickEvent("mail_translate_toolbar_translated_mail_show_original")):(I.value=!0,o("plugin_gmail_integration_mail_translate","plugin_gmail_integration_mail_translate"),ue(),f(),k.reportIntergratedClickEvent("mail_translate_toolbar_translate"))))};function B(){c.value||(p.value=!1,L.value=!L.value,k.reportIntergratedClickEvent("mail_translate_toolbar_settings"),L.value&&k.reportIntergratedShowEvent("mail_translate_toolbar_settings",{status:H.value}))}function N(){p.value=!1,setTimeout(()=>{l.value=!0},1e3)}async function P(){const K=await Ge(de.INSTALL_SOURCE),O=document.createElement("div"),Z=`${fe.fileTranslatePage}?source=plugin_gmail_integration&utm_source=${K}`;return O.innerHTML=`
    <div style='font-size: 14px;'>
      <br/>
      <div style="color: rgba(0,0,0,0.9);">
        ${n("integration.mail.waterMarkDesc")}
      </div>
      <a style="display: block;color: rgba(41, 98, 255, 1); text-decoration: underline;" href="${Z}" target="_blank">
        ${n("integration.mail.waterMarkLink")}
      </a>
    </div>
  `,O}async function W(){E.value||(T.transferEmail(await P()),k.reportIntergratedClickEvent("mail_translate_toolbar_forward_translated_mail"))}function j(){if(!x.value)return;const O=x.value.getRootNode().host;if(!O)return;let Z=O;for(let Y=0;Y<T.detailElementParentLevel&&Z.parentElement;Y++)Z=Z.parentElement;w=Z.querySelector(T.detailElementSelector)}return xt(()=>{j(),w&&(w.selfRestore=()=>{I.value=!1,E.value=!0,s(w)}),k.reportIntergratedShowEvent("mail_translate_toolbar",{status:H.value})}),Va(()=>{w&&(s(w),u(w)),A.clear()}),(K,O)=>(F(),re("div",{dir:h.value,ref_key:"bannerRef",ref:x,class:"mail-translate-banner-container anydoc-translate-ignore",style:Ae({fontFamily:g.value,textAlign:z(Yt)()?"right":"left",alignItems:"flex-start"})},[y("div",Cp,[y("div",{class:Je([{"btn-disabled":z(c)},"logo-container"]),onClick:Ee},[y("div",yp,[oe(it,{size:16,icon:"translate-text-white"})]),y("div",Dp,pe(I.value?K.$t("integration.mail.showOriginal"):K.$t("hoverBall.tips.translate",[G.value])),1)],2),y("div",{class:Je(["setting-container",{"btn-disabled":z(c)}]),ref_key:"settingBtnRef",ref:_,onClick:B},[oe(it,{icon:"setting",size:16})],2),L.value?(F(),Le(Ya,{key:0,source:"mail",languageColumn:1,ref_key:"mailTranslateSettingRef",ref:i,class:"translate-setting-container",onSettingChange:X,onClose:O[0]||(O[0]=Z=>L.value=!1)},null,512)):ge("",!0),p.value?(F(),Le(Jn,{key:1,class:"exceed-limit-tip",position:"top",onClose:O[1]||(O[1]=Z=>p.value=!1),onUpgrade:N,scene:"plugin_mail_translate_free_trial_limit"})):ge("",!0)]),y("div",{class:Je(["send-email-btn",{"btn-disabled":E.value}]),onClick:W},[oe(it,{class:"send-mail-icon",size:20,icon:"sendMail"}),y("div",Sp,pe(K.$t("integration.mail.sendTranslatedEmail")),1)],2)],12,_p))}}),Lp=Ve(xp,[["__scopeId","data-v-b02d00f3"]]),Rp="wps-translate-mail-translation-button",Ip="wps-translate-mail-translate-banner";let qn=null;const Kn=new Map;async function Bp(t){let e=0;const n=4,r=2e3;let a=null,s=null;for(;e<n&&(a=document.querySelector(t.btnAnchorSelector),s=document.querySelector(t.translateAnchorSelector),!(a&&s));)await new Promise(o=>setTimeout(o,r)),e++;return{btnAnchorElement:a,translateBannerAnchorElement:s}}async function Np(t){const{btnAnchorElement:e}=await Bp(t);e&&kr(e,qn,t.btnAppendMethod)}async function Us(t,e){t.forEach(n=>{if(Kn.has(n))return;const r=Xn(Ip,Lp,!1);Kn.set(n,r),kr(n,r,e.translateAppendMethod)})}function kp(){Kn.forEach((t,e)=>{t.isConnected||(t.cleanup(),Kn.delete(e))})}async function Fp(){Kn.forEach(t=>{t.remove()}),Kn.clear()}function Op(t){t.name===vo.GMAIL&&(t.enableFunction=()=>{t.disableFunction(),Us(document.querySelectorAll(t.translateAnchorSelector),t);let e=new MutationObserver(n=>{n.forEach(r=>{if(r.type==="childList"){kp();for(let a=0;a<r.addedNodes.length;a++){const s=r.addedNodes[a];if(s instanceof HTMLElement){const o=s.querySelectorAll(t.translateAnchorSelector);if(o.length>0){Us(o,t);break}}}}})});return e.observe(document.body,{subtree:!0,childList:!0}),()=>{e==null||e.disconnect(),e=null,Fp()}})}function Mp(t){if(Wr())return;const e=Qa(location.href);e&&(qn=Xn(Rp,Ap),Np(e),Op(e),t.integrations[e.name].enable&&(e.disableFunction=e.enableFunction()),jr({name:Xr.INJECTION,onDisconnect:()=>{qn==null||qn.remove(),qn=null,e.disableFunction()}}))}function Pp(t){Mp(t)}const Qo=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",$p=Qo+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Up="["+Qo+"]["+$p+"]*",qp=new RegExp("^"+Up+"$");function Jo(t,e){const n=[];let r=e.exec(t);for(;r;){const a=[];a.startIndex=e.lastIndex-r[0].length;const s=r.length;for(let o=0;o<s;o++)a.push(r[o]);n.push(a),r=e.exec(t)}return n}const Ja=function(t){const e=qp.exec(t);return!(e===null||typeof e>"u")};function Hp(t){return typeof t<"u"}const Gp={allowBooleanAttributes:!1,unpairedTags:[]};function Vp(t,e){e=Object.assign({},Gp,e);const n=[];let r=!1,a=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let s=0;s<t.length;s++)if(t[s]==="<"&&t[s+1]==="?"){if(s+=2,s=Hs(t,s),s.err)return s}else if(t[s]==="<"){let o=s;if(s++,t[s]==="!"){s=Gs(t,s);continue}else{let u=!1;t[s]==="/"&&(u=!0,s++);let l="";for(;s<t.length&&t[s]!==">"&&t[s]!==" "&&t[s]!=="	"&&t[s]!==`
`&&t[s]!=="\r";s++)l+=t[s];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),s--),!Jp(l)){let w;return l.trim().length===0?w="Invalid space after '<'.":w="Tag '"+l+"' is an invalid name.",At("InvalidTag",w,$t(t,s))}const c=jp(t,s);if(c===!1)return At("InvalidAttr","Attributes for '"+l+"' have open quote.",$t(t,s));let f=c.value;if(s=c.index,f[f.length-1]==="/"){const w=s-f.length;f=f.substring(0,f.length-1);const T=Vs(f,e);if(T===!0)r=!0;else return At(T.err.code,T.err.msg,$t(t,w+T.err.line))}else if(u)if(c.tagClosed){if(f.trim().length>0)return At("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",$t(t,o));if(n.length===0)return At("InvalidTag","Closing tag '"+l+"' has not been opened.",$t(t,o));{const w=n.pop();if(l!==w.tagName){let T=$t(t,w.tagStartPos);return At("InvalidTag","Expected closing tag '"+w.tagName+"' (opened in line "+T.line+", col "+T.col+") instead of closing tag '"+l+"'.",$t(t,o))}n.length==0&&(a=!0)}}else return At("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",$t(t,s));else{const w=Vs(f,e);if(w!==!0)return At(w.err.code,w.err.msg,$t(t,s-f.length+w.err.line));if(a===!0)return At("InvalidXml","Multiple possible root nodes found.",$t(t,s));e.unpairedTags.indexOf(l)!==-1||n.push({tagName:l,tagStartPos:o}),r=!0}for(s++;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="!"){s++,s=Gs(t,s);continue}else if(t[s+1]==="?"){if(s=Hs(t,++s),s.err)return s}else break;else if(t[s]==="&"){const w=Kp(t,s);if(w==-1)return At("InvalidChar","char '&' is not expected.",$t(t,s));s=w}else if(a===!0&&!qs(t[s]))return At("InvalidXml","Extra text at the end",$t(t,s));t[s]==="<"&&s--}}else{if(qs(t[s]))continue;return At("InvalidChar","char '"+t[s]+"' is not expected.",$t(t,s))}if(r){if(n.length==1)return At("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",$t(t,n[0].tagStartPos));if(n.length>0)return At("InvalidXml","Invalid '"+JSON.stringify(n.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return At("InvalidXml","Start tag expected.",1);return!0}function qs(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Hs(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const r=t.substr(n,e-n);if(e>5&&r==="xml")return At("InvalidXml","XML declaration allowed only at the start of the document.",$t(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Gs(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const Wp='"',zp="'";function jp(t,e){let n="",r="",a=!1;for(;e<t.length;e++){if(t[e]===Wp||t[e]===zp)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){a=!0;break}n+=t[e]}return r!==""?!1:{value:n,index:e,tagClosed:a}}const Xp=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Vs(t,e){const n=Jo(t,Xp),r={};for(let a=0;a<n.length;a++){if(n[a][1].length===0)return At("InvalidAttr","Attribute '"+n[a][2]+"' has no space in starting.",sr(n[a]));if(n[a][3]!==void 0&&n[a][4]===void 0)return At("InvalidAttr","Attribute '"+n[a][2]+"' is without value.",sr(n[a]));if(n[a][3]===void 0&&!e.allowBooleanAttributes)return At("InvalidAttr","boolean attribute '"+n[a][2]+"' is not allowed.",sr(n[a]));const s=n[a][2];if(!Qp(s))return At("InvalidAttr","Attribute '"+s+"' is an invalid name.",sr(n[a]));if(!r.hasOwnProperty(s))r[s]=1;else return At("InvalidAttr","Attribute '"+s+"' is repeated.",sr(n[a]))}return!0}function Yp(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function Kp(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Yp(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function At(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function Qp(t){return Ja(t)}function Jp(t){return Ja(t)}function $t(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function sr(t){return t.startIndex+t[1].length}const Zp={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t},captureMetaData:!1},eg=function(t){return Object.assign({},Zp,t)};let $r;typeof Symbol!="function"?$r="@@xmlMetadata":$r=Symbol("XML Node Metadata");class Rn{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e,n){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),n!==void 0&&(this.child[this.child.length-1][$r]={startIndex:n})}static getMetaDataSymbol(){return $r}}function tg(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,a=!1,s=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!s){if(a&&In(t,"!ENTITY",e)){e+=7;let u,l;[u,l,e]=ng(t,e+1),l.indexOf("&")===-1&&(n[u]={regx:RegExp(`&${u};`,"g"),val:l})}else if(a&&In(t,"!ELEMENT",e)){e+=8;const{index:u}=ag(t,e+1);e=u}else if(a&&In(t,"!ATTLIST",e))e+=8;else if(a&&In(t,"!NOTATION",e)){e+=9;const{index:u}=rg(t,e+1);e=u}else if(In(t,"!--",e))s=!0;else throw new Error("Invalid DOCTYPE");r++,o=""}else if(t[e]===">"){if(s?t[e-1]==="-"&&t[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else t[e]==="["?a=!0:o+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}const wn=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function ng(t,e){e=wn(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)n+=t[e],e++;if(Za(n),e=wn(t,e),t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported");let r="";return[e,r]=Rr(t,e,"entity"),e--,[n,r,e]}function rg(t,e){e=wn(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;Za(n),e=wn(t,e);const r=t.substring(e,e+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=wn(t,e);let a=null,s=null;if(r==="PUBLIC")[e,a]=Rr(t,e,"publicIdentifier"),e=wn(t,e),(t[e]==='"'||t[e]==="'")&&([e,s]=Rr(t,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,s]=Rr(t,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:a,systemIdentifier:s,index:--e}}function Rr(t,e,n){let r="";const a=t[e];if(a!=='"'&&a!=="'")throw new Error(`Expected quoted string, found "${a}"`);for(e++;e<t.length&&t[e]!==a;)r+=t[e],e++;if(t[e]!==a)throw new Error(`Unterminated ${n} value`);return e++,[e,r]}function ag(t,e){e=wn(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;if(!Za(n))throw new Error(`Invalid element name: "${n}"`);e=wn(t,e);let r="";if(t[e]==="E"&&In(t,"MPTY",e))e+=4;else if(t[e]==="A"&&In(t,"NY",e))e+=2;else if(t[e]==="("){for(e++;e<t.length&&t[e]!==")";)r+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:n,contentModel:r.trim(),index:e}}function In(t,e,n){for(let r=0;r<e.length;r++)if(e[r]!==t[n+r+1])return!1;return!0}function Za(t){if(Ja(t))return t;throw new Error(`Invalid entity name ${t}`)}const sg=/^[-+]?0x[a-fA-F0-9]+$/,og=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,ig={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ug(t,e={}){if(e=Object.assign({},ig,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(t==="0")return 0;if(e.hex&&sg.test(n))return pg(n,16);if(n.search(/.+[eE].+/)!==-1)return cg(t,n,e);{const r=og.exec(n);if(r){const a=r[1]||"",s=r[2];let o=dg(r[3]);const u=a?t[s.length+1]===".":t[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!u))return t;{const l=Number(n),c=String(l);if(l===0)return l;if(c.search(/[eE]/)!==-1)return e.eNotation?l:t;if(n.indexOf(".")!==-1)return c==="0"||c===o||c===`${a}${o}`?l:t;let f=s?o:n;return s?f===c||a+f===c?l:t:f===c||f===a+c?l:t}}else return t}}const lg=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function cg(t,e,n){if(!n.eNotation)return t;const r=e.match(lg);if(r){let a=r[1]||"";const s=r[3].indexOf("e")===-1?"E":"e",o=r[2],u=a?t[o.length+1]===s:t[o.length]===s;return o.length>1&&u?t:o.length===1&&(r[3].startsWith(`.${s}`)||r[3][0]===s)?Number(e):n.leadingZeros&&!u?(e=(r[1]||"")+r[3],Number(e)):t}else return t}function dg(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function pg(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function gg(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}class fg{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=hg,this.parseXml=Tg,this.parseTextData=mg,this.resolveNameSpace=vg,this.buildAttributesMap=bg,this.isItStopNode=Cg,this.replaceEntitiesValue=Ag,this.readStopNodeData=Dg,this.saveTextToParentTag=_g,this.addChild=wg,this.ignoreAttributesFn=gg(this.options.ignoreAttributes)}}function hg(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:t[r]}}}function mg(t,e,n,r,a,s,o){if(t!==void 0&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const u=this.options.tagValueProcessor(e,t,n,a,s);return u==null?t:typeof u!=typeof t||u!==t?u:this.options.trimValues?Fa(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Fa(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function vg(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const Eg=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function bg(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const r=Jo(t,Eg),a=r.length,s={};for(let o=0;o<a;o++){const u=this.resolveNameSpace(r[o][1]);if(this.ignoreAttributesFn(u,e))continue;let l=r[o][4],c=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const f=this.options.attributeValueProcessor(u,l,e);f==null?s[c]=l:typeof f!=typeof l||f!==l?s[c]=f:s[c]=Fa(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[c]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=s,o}return s}}const Tg=function(t){t=t.replace(/\r\n?/g,`
`);const e=new Rn("!xml");let n=e,r="",a="";for(let s=0;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="/"){const u=Bn(t,">",s,"Closing Tag is not closed.");let l=t.substring(s+2,u).trim();if(this.options.removeNSPrefix){const w=l.indexOf(":");w!==-1&&(l=l.substr(w+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&(r=this.saveTextToParentTag(r,n,a));const c=a.substring(a.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let f=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(f=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):f=a.lastIndexOf("."),a=a.substring(0,f),n=this.tagsNodeStack.pop(),r="",s=u}else if(t[s+1]==="?"){let u=ka(t,s,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,a),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const l=new Rn(u.tagName);l.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(l[":@"]=this.buildAttributesMap(u.tagExp,a,u.tagName)),this.addChild(n,l,a,s)}s=u.closeIndex+1}else if(t.substr(s+1,3)==="!--"){const u=Bn(t,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const l=t.substring(s+4,u-2);r=this.saveTextToParentTag(r,n,a),n.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}s=u}else if(t.substr(s+1,2)==="!D"){const u=tg(t,s);this.docTypeEntities=u.entities,s=u.i}else if(t.substr(s+1,2)==="!["){const u=Bn(t,"]]>",s,"CDATA is not closed.")-2,l=t.substring(s+9,u);r=this.saveTextToParentTag(r,n,a);let c=this.parseTextData(l,n.tagname,a,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):n.add(this.options.textNodeName,c),s=u+2}else{let u=ka(t,s,this.options.removeNSPrefix),l=u.tagName;const c=u.rawTagName;let f=u.tagExp,w=u.attrExpPresent,T=u.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,a,!1));const A=n;A&&this.options.unpairedTags.indexOf(A.tagname)!==-1&&(n=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),l!==e.tagname&&(a+=a?"."+l:l);const x=s;if(this.isItStopNode(this.options.stopNodes,a,l)){let I="";if(f.length>0&&f.lastIndexOf("/")===f.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),f=l):f=f.substr(0,f.length-1),s=u.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)s=u.closeIndex;else{const E=this.readStopNodeData(t,c,T+1);if(!E)throw new Error(`Unexpected end of ${c}`);s=E.i,I=E.tagContent}const L=new Rn(l);l!==f&&w&&(L[":@"]=this.buildAttributesMap(f,a,l)),I&&(I=this.parseTextData(I,l,a,!0,w,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),L.add(this.options.textNodeName,I),this.addChild(n,L,a,x)}else{if(f.length>0&&f.lastIndexOf("/")===f.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),f=l):f=f.substr(0,f.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const I=new Rn(l);l!==f&&w&&(I[":@"]=this.buildAttributesMap(f,a,l)),this.addChild(n,I,a,x),a=a.substr(0,a.lastIndexOf("."))}else{const I=new Rn(l);this.tagsNodeStack.push(n),l!==f&&w&&(I[":@"]=this.buildAttributesMap(f,a,l)),this.addChild(n,I,a,x),n=I}r="",s=T}}else r+=t[s];return e.child};function wg(t,e,n,r){this.options.captureMetaData||(r=void 0);const a=this.options.updateTag(e.tagname,n,e[":@"]);a===!1||(typeof a=="string"&&(e.tagname=a),t.addChild(e,r))}const Ag=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function _g(t,e,n,r){return t&&(r===void 0&&(r=e.child.length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function Cg(t,e,n){const r="*."+n;for(const a in t){const s=t[a];if(r===s||e===s)return!0}return!1}function yg(t,e,n=">"){let r,a="";for(let s=e;s<t.length;s++){let o=t[s];if(r)o===r&&(r="");else if(o==='"'||o==="'")r=o;else if(o===n[0])if(n[1]){if(t[s+1]===n[1])return{data:a,index:s}}else return{data:a,index:s};else o==="	"&&(o=" ");a+=o}}function Bn(t,e,n,r){const a=t.indexOf(e,n);if(a===-1)throw new Error(r);return a+e.length-1}function ka(t,e,n,r=">"){const a=yg(t,e+1,r);if(!a)return;let s=a.data;const o=a.index,u=s.search(/\s/);let l=s,c=!0;u!==-1&&(l=s.substring(0,u),s=s.substring(u+1).trimStart());const f=l;if(n){const w=l.indexOf(":");w!==-1&&(l=l.substr(w+1),c=l!==a.data.substr(w+1))}return{tagName:l,tagExp:s,closeIndex:o,attrExpPresent:c,rawTagName:f}}function Dg(t,e,n){const r=n;let a=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const s=Bn(t,">",n,`${e} is not closed`);if(t.substring(n+2,s).trim()===e&&(a--,a===0))return{tagContent:t.substring(r,n),i:s};n=s}else if(t[n+1]==="?")n=Bn(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=Bn(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=Bn(t,"]]>",n,"StopNode is not closed.")-2;else{const s=ka(t,n,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&a++,n=s.closeIndex)}}function Fa(t,e,n){if(e&&typeof t=="string"){const r=t.trim();return r==="true"?!0:r==="false"?!1:ug(t,n)}else return Hp(t)?t:""}const Da=Rn.getMetaDataSymbol();function Sg(t,e){return Zo(t,e)}function Zo(t,e,n){let r;const a={};for(let s=0;s<t.length;s++){const o=t[s],u=xg(o);let l="";if(n===void 0?l=u:l=n+"."+u,u===e.textNodeName)r===void 0?r=o[u]:r+=""+o[u];else{if(u===void 0)continue;if(o[u]){let c=Zo(o[u],e,l);const f=Rg(c,e);o[Da]!==void 0&&(c[Da]=o[Da]),o[":@"]?Lg(c,o[":@"],l,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),a[u]!==void 0&&a.hasOwnProperty(u)?(Array.isArray(a[u])||(a[u]=[a[u]]),a[u].push(c)):e.isArray(u,l,f)?a[u]=[c]:a[u]=c}}}return typeof r=="string"?r.length>0&&(a[e.textNodeName]=r):r!==void 0&&(a[e.textNodeName]=r),a}function xg(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(r!==":@")return r}}function Lg(t,e,n,r){if(e){const a=Object.keys(e),s=a.length;for(let o=0;o<s;o++){const u=a[o];r.isArray(u,n+"."+u,!0,!0)?t[u]=[e[u]]:t[u]=e[u]}}}function Rg(t,e){const{textNodeName:n}=e,r=Object.keys(t).length;return!!(r===0||r===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}class Ig{constructor(e){this.externalEntities={},this.options=eg(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const s=Vp(e,n);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new fg(this.options);r.addExternalEntities(this.externalEntities);const a=r.parseXml(e);return this.options.preserveOrder||a===void 0?a:Sg(a,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}static getMetaDataSymbol(){return Rn.getMetaDataSymbol()}}var ir={exports:{}};/*! https://mths.be/he v1.2.0 by @mathias | MIT license */var Bg=ir.exports,Ws;function Ng(){return Ws||(Ws=1,function(t,e){(function(n){var r=e,a=t&&t.exports==r&&t,s=typeof _s=="object"&&_s;(s.global===s||s.window===s)&&(n=s);var o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[\x01-\x7F]/g,l=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,c=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,f={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","	":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr",:"ordf",:"aacute",:"Aacute",:"agrave",:"Agrave",:"abreve",:"Abreve",:"acirc",:"Acirc",:"aring",:"angst",:"auml",:"Auml",:"atilde",:"Atilde",:"aogon",:"Aogon",:"amacr",:"Amacr",:"aelig",:"AElig","":"bscr","":"bopf","":"bfr","":"Bopf",:"Bscr","":"Bfr","":"cfr","":"cscr","":"copf",:"Cfr","":"Cscr",:"Copf",:"cacute",:"Cacute",:"ccirc",:"Ccirc",:"ccaron",:"Ccaron",:"cdot",:"Cdot",:"ccedil",:"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf",:"dcaron",:"Dcaron",:"dstrok",:"Dstrok",:"eth",:"ETH","":"ee",:"escr","":"efr","":"eopf",:"Escr","":"Efr","":"Eopf",:"eacute",:"Eacute",:"egrave",:"Egrave",:"ecirc",:"Ecirc",:"ecaron",:"Ecaron",:"euml",:"Euml",:"edot",:"Edot",:"eogon",:"Eogon",:"emacr",:"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf",:"Fscr",:"fflig",:"ffilig",:"ffllig",:"filig",fj:"fjlig",:"fllig",:"fnof",:"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr",:"gacute",:"gbreve",:"Gbreve",:"gcirc",:"Gcirc",:"gdot",:"Gdot",:"Gcedil","":"hfr",:"planckh","":"hscr","":"hopf",:"Hscr",:"Hfr",:"Hopf",:"hcirc",:"Hcirc",:"hbar",:"hstrok",:"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf",:"Iscr",:"Im",:"iacute",:"Iacute",:"igrave",:"Igrave",:"icirc",:"Icirc",:"iuml",:"Iuml",:"itilde",:"Itilde",:"Idot",:"iogon",:"Iogon",:"imacr",:"Imacr",:"ijlig",:"IJlig",:"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf",:"jcirc",:"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr",:"kcedil",:"Kcedil","":"lfr","":"lscr",:"ell","":"lopf",:"Lscr","":"Lfr","":"Lopf",:"lacute",:"Lacute",:"lcaron",:"Lcaron",:"lcedil",:"Lcedil",:"lstrok",:"Lstrok",:"lmidot",:"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf",:"Mscr","":"nfr","":"nopf","":"nscr",:"Nopf","":"Nscr","":"Nfr",:"nacute",:"Nacute",:"ncaron",:"Ncaron",:"ntilde",:"Ntilde",:"ncedil",:"Ncedil","":"numero",:"eng",:"ENG","":"oopf","":"ofr",:"oscr","":"Oscr","":"Ofr","":"Oopf",:"ordm",:"oacute",:"Oacute",:"ograve",:"Ograve",:"ocirc",:"Ocirc",:"ouml",:"Ouml",:"odblac",:"Odblac",:"otilde",:"Otilde",:"oslash",:"Oslash",:"omacr",:"Omacr",:"oelig",:"OElig","":"pfr","":"pscr","":"popf",:"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr",:"Qopf",:"kgreen","":"rfr","":"ropf","":"rscr",:"Rscr",:"Re",:"Ropf",:"racute",:"Racute",:"rcaron",:"Rcaron",:"rcedil",:"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS",:"sacute",:"Sacute",:"scirc",:"Scirc",:"scaron",:"Scaron",:"scedil",:"Scedil",:"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf",:"tcaron",:"Tcaron",:"tcedil",:"Tcedil","":"trade",:"tstrok",:"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr",:"uacute",:"Uacute",:"ugrave",:"Ugrave",:"ubreve",:"Ubreve",:"ucirc",:"Ucirc",:"uring",:"Uring",:"uuml",:"Uuml",:"udblac",:"Udblac",:"utilde",:"Utilde",:"uogon",:"Uogon",:"umacr",:"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr",:"wcirc",:"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf",:"yacute",:"Yacute",:"ycirc",:"Ycirc",:"yuml",:"Yuml","":"zscr","":"zfr","":"zopf",:"Zfr",:"Zopf","":"Zscr",:"zacute",:"Zacute",:"zcaron",:"Zcaron",:"zdot",:"Zdot",:"imped",:"thorn",:"THORN",:"napos",:"alpha",:"Alpha",:"beta",:"Beta",:"gamma",:"Gamma",:"delta",:"Delta",:"epsi","":"epsiv",:"Epsilon",:"gammad",:"Gammad",:"zeta",:"Zeta",:"eta",:"Eta",:"theta",:"thetav",:"Theta",:"iota",:"Iota",:"kappa",:"kappav",:"Kappa",:"lambda",:"Lambda",:"mu",:"micro",:"Mu",:"nu",:"Nu",:"xi",:"Xi",:"omicron",:"Omicron",:"pi",:"piv",:"Pi",:"rho",:"rhov",:"Rho",:"sigma",:"Sigma",:"sigmaf",:"tau",:"Tau",:"upsi",:"Upsilon",:"Upsi",:"phi",:"phiv",:"Phi",:"chi",:"Chi",:"psi",:"Psi",:"omega",:"ohm",:"acy",:"Acy",:"bcy",:"Bcy",:"vcy",:"Vcy",:"gcy",:"Gcy",:"gjcy",:"GJcy",:"dcy",:"Dcy",:"djcy",:"DJcy",:"iecy",:"IEcy",:"iocy",:"IOcy",:"jukcy",:"Jukcy",:"zhcy",:"ZHcy",:"zcy",:"Zcy",:"dscy",:"DScy",:"icy",:"Icy",:"iukcy",:"Iukcy",:"yicy",:"YIcy",:"jcy",:"Jcy",:"jsercy",:"Jsercy",:"kcy",:"Kcy",:"kjcy",:"KJcy",:"lcy",:"Lcy",:"ljcy",:"LJcy",:"mcy",:"Mcy",:"ncy",:"Ncy",:"njcy",:"NJcy",:"ocy",:"Ocy",:"pcy",:"Pcy",:"rcy",:"Rcy",:"scy",:"Scy",:"tcy",:"Tcy",:"tshcy",:"TSHcy",:"ucy",:"Ucy",:"ubrcy",:"Ubrcy",:"fcy",:"Fcy",:"khcy",:"KHcy",:"tscy",:"TScy",:"chcy",:"CHcy",:"dzcy",:"DZcy",:"shcy",:"SHcy",:"shchcy",:"SHCHcy",:"hardcy",:"HARDcy",:"ycy",:"Ycy",:"softcy",:"SOFTcy",:"ecy",:"Ecy",:"yucy",:"YUcy",:"yacy",:"YAcy",:"aleph",:"beth",:"gimel",:"daleth"},w=/["&'<>`]/g,T={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},A=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,x=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,I=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,L={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},E={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},_={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},p=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],i=String.fromCharCode,h={},g=h.hasOwnProperty,G=function(O,Z){return g.call(O,Z)},H=function(O,Z){for(var Y=-1,Se=O.length;++Y<Se;)if(O[Y]==Z)return!0;return!1},te=function(O,Z){if(!O)return Z;var Y={},Se;for(Se in Z)Y[Se]=G(O,Se)?O[Se]:Z[Se];return Y},ue=function(O,Z){var Y="";return O>=55296&&O<=57343||O>1114111?(Z&&B("character reference outside the permissible Unicode range"),""):G(_,O)?(Z&&B("disallowed character reference"),_[O]):(Z&&H(p,O)&&B("disallowed character reference"),O>65535&&(O-=65536,Y+=i(O>>>10&1023|55296),O=56320|O&1023),Y+=i(O),Y)},X=function(O){return"&#x"+O.toString(16).toUpperCase()+";"},Ee=function(O){return"&#"+O+";"},B=function(O){throw Error("Parse error: "+O)},N=function(O,Z){Z=te(Z,N.options);var Y=Z.strict;Y&&x.test(O)&&B("forbidden code point");var Se=Z.encodeEverything,ne=Z.useNamedReferences,V=Z.allowUnsafeSymbols,Q=Z.decimal?Ee:X,he=function(J){return Q(J.charCodeAt(0))};return Se?(O=O.replace(u,function(J){return ne&&G(f,J)?"&"+f[J]+";":he(J)}),ne&&(O=O.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),ne&&(O=O.replace(c,function(J){return"&"+f[J]+";"}))):ne?(V||(O=O.replace(w,function(J){return"&"+f[J]+";"})),O=O.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),O=O.replace(c,function(J){return"&"+f[J]+";"})):V||(O=O.replace(w,he)),O.replace(o,function(J){var be=J.charCodeAt(0),_e=J.charCodeAt(1),ye=(be-55296)*1024+_e-56320+65536;return Q(ye)}).replace(l,he)};N.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var P=function(O,Z){Z=te(Z,P.options);var Y=Z.strict;return Y&&A.test(O)&&B("malformed character reference"),O.replace(I,function(Se,ne,V,Q,he,J,be,_e,ye){var we,Fe,Te,Oe,$e,je;return ne?($e=ne,L[$e]):V?($e=V,je=Q,je&&Z.isAttributeValue?(Y&&je=="="&&B("`&` did not start a character reference"),Se):(Y&&B("named character reference was not terminated by a semicolon"),E[$e]+(je||""))):he?(Te=he,Fe=J,Y&&!Fe&&B("character reference was not terminated by a semicolon"),we=parseInt(Te,10),ue(we,Y)):be?(Oe=be,Fe=_e,Y&&!Fe&&B("character reference was not terminated by a semicolon"),we=parseInt(Oe,16),ue(we,Y)):(Y&&B("named character reference was not terminated by a semicolon"),Se)})};P.options={isAttributeValue:!1,strict:!1};var W=function(O){return O.replace(w,function(Z){return T[Z]})},j={version:"1.2.0",encode:N,decode:P,escape:W,unescape:P};if(r&&!r.nodeType)if(a)a.exports=j;else for(var K in j)G(j,K)&&(r[K]=j[K]);else n.he=j})(Bg)}(ir,ir.exports)),ir.exports}var kg=Ng();const Fg=lo(kg),Sa={OK:"OK",ERROR:"ERROR",LOGIN_REQUIRED:"LOGIN_REQUIRED"},xa={BOT_DETECTED:"Sign in to confirm you're not a bot",AGE_RESTRICTED:"This video may be inappropriate for some users.",VIDEO_UNAVAILABLE:"This video is unavailable"},Og=["strong","em","b","i","mark","small","del","ins","sub","sup"],Mg=["zh-CN","zh-TW","zh-Hant","zh-Hans","zh","ja","ko","ja-JP","ko-KR"];class zs{constructor(e){Be(this,"videoId",null);Be(this,"_preserveFormatting",!1);Be(this,"innertubeData",null);Be(this,"captionsJson",null);Be(this,"captionLanguage","");Be(this,"url","");Be(this,"adCallback",null);Be(this,"adObserver",null);Be(this,"containerObserver",null);this.videoId=(e==null?void 0:e.videoId)||null,this._preserveFormatting=e.preserveFormatting||!1}async fetchCaption(){this.innertubeData||(this.innertubeData=await this._getInnertubeData()),this.captionsJson=this._extractCaptionJson(this.innertubeData);const e=this._selectBestCaption(this.captionsJson);if(!e)return Me.info(`No subtitle found for video: ${this.videoId}`),[];this.captionLanguage=e.languageCode;const n=await this._getCaptionXml(e),r=this._parseCaptionXml(n);return this.formatSubtitle(r)}async fetchSubtitle(e){const n=this.getManualSubtitleLanguage(),r=e==null?void 0:e.split("-")[0];if(this.url&&(n!=null&&n.includes(r)))return this._fetchManualSubtitle(r);let a=this._selectBestCaption(this.captionsJson,e);if(!a&&r&&(a=this._selectBestCaption(this.captionsJson,r)),!a)return[];const s=await this._getCaptionXml(a),o=this._parseCaptionXml(s);return o!=null&&o.length?this.formatSubtitle(o):[]}async _fetchManualSubtitle(e){const r={"zh-CN":"zh-Hans","zh-TW":"zh-Hant"}[e]||e;if(r)try{const a=`${this.url}&tlang=${r}`,o=await(await fetch(a,{method:"GET"})).json();return Me.success("_fetchManualSubtitle data",o),(o==null?void 0:o.events)||[]}catch{return[]}return[]}getManualSubtitleLanguage(){var e;return((e=this.captionsJson)==null?void 0:e.filter(n=>(n==null?void 0:n.kind)!=="asr").map(n=>n==null?void 0:n.languageCode))||[]}processInterceptorData(e){var n;try{const r=JSON.parse(e.data);return this.url=typeof e.url=="string"?e.url:JSON.stringify(e.url),Me.success("",r,this.url),((n=r==null?void 0:r.events)==null?void 0:n.length)===0?[]:this.formatInterceptorData(r.events,e.language)}catch{return[]}}formatInterceptorData(e,n){try{const a=e.filter(o=>o.segs&&o.segs.length>0&&(o==null?void 0:o.tStartMs)&&(o==null?void 0:o.dDurationMs)).map(o=>this._createCaptionItem(o,n));if(a.length===0)return[];for(let o=0;o<a.length-1;o++){const u=a[o],l=a[o+1];u.end===l.end&&(u.text+=` ${l.text}`,u.duration=u.end-u.start,a.splice(o+1,1),o--)}const s=a.map((o,u)=>{const l=Number(o.start)/1e3,c=Number(o.duration)/1e3,f=Number(o.end)/1e3;return{text:o.text,start:l,duration:c,end:f,index:u}}).filter(o=>o!==null);return this.formatSubtitle(s)}catch{return[]}}formatSubtitle(e){if((e==null?void 0:e.length)===0)return[];for(let n=0;n<e.length-2;n++){const r=e[n],a=e[n+1],s=e[n+2];this._isFloatEqual(r.start+r.duration,s.start)&&(r.text+=` ${a.text}`,r.duration=Math.round((s.start-r.start)*1e3)/1e3,r.end=Math.round((r.start+r.duration)*1e3)/1e3,e.splice(n+1,1),n--)}return e}getCaptionLanguage(){return this.captionLanguage}setVideoInfo(e){if(!e)return;const n=typeof e=="string"?JSON.parse(e):e;this.innertubeData=n}hasAds(){var e,n;return((n=(e=this.innertubeData)==null?void 0:e.adPlacements)==null?void 0:n.length)>0}initAdDetector(e){this.adCallback=e,this.initAdObserver()}initAdObserver(){var n;this.adObserver=new MutationObserver(r=>{let a=!1;r.forEach(s=>{s.type==="childList"&&(a=this.checkAdElementChanges(s))}),a&&this.checkAdStatus()});const e=document.querySelector(".video-ads")||document.querySelector(".ytp-ad-module");e&&((n=this.adObserver)==null||n.observe(e,{childList:!0,subtree:!0})),this.checkAdStatus()}checkAdElementChanges(e){return Array.from(e.addedNodes).length>0||Array.from(e.removedNodes).length>0}checkAdStatus(){var r,a,s;const e=document.querySelector(".video-ads"),n=!!((r=e==null?void 0:e.innerHTML)!=null&&r.trim()||(a=e==null?void 0:e.textContent)!=null&&a.trim());(s=this.adCallback)==null||s.onAdStatusChange(n)}destroyAdDetector(){this.adObserver&&(this.adObserver.disconnect(),this.adObserver=null),this.containerObserver&&(this.containerObserver.disconnect(),this.containerObserver=null),this.adCallback=null}getVideoInfo(){var e;return((e=this.innertubeData)==null?void 0:e.videoDetails)||{}}_selectBestCaption(e,n){if(!e||e.length===0)return null;if(n)return e.find(s=>s.languageCode===n&&s.kind!=="asr");if(e.length===1)return e[0];const r=this._formatCaptionLanguage();let a=e.find(s=>s.languageCode===r&&s.kind!=="asr");return a||(a=e.find(s=>s.languageCode===r||s.languageCode==="en")),a||(a=e[0]),a}async _getInnertubeData(){return await(await fetch("https://www.youtube.com/youtubei/v1/player",{method:"POST",body:JSON.stringify({contentCheckOk:!1,context:{client:{clientName:"WEB_EMBEDDED_PLAYER",clientVersion:"1.20241009.01.00"}},videoId:this.videoId})})).json()}_extractCaptionJson(e){var r,a;try{this._isAvailable(e.playabilityStatus)}catch{return[]}const n=(a=(r=e.captions)==null?void 0:r.playerCaptionsTracklistRenderer)==null?void 0:a.captionTracks;return n||(Me.info(`Transcripts disabled for video: ${this.videoId}`),[])}_isAvailable(e){var r,a,s;const n=e==null?void 0:e.status;if(n!==Sa.OK&&n!=null){const o=e.reason;if(n===Sa.LOGIN_REQUIRED){if(o===xa.BOT_DETECTED)throw new Error(`Request blocked for video: ${this.videoId}`);if(o===xa.AGE_RESTRICTED)throw new Error(`Age restricted for video: ${this.videoId}`)}if(n===Sa.ERROR&&o===xa.VIDEO_UNAVAILABLE)throw new Error(`Video unavailable: ${this.videoId}`);const u=((s=(a=(r=e.errorScreen)==null?void 0:r.playerErrorMessageRenderer)==null?void 0:a.subreason)==null?void 0:s.runs)||[];throw new Error(`Video unplayable: ${this.videoId}, reason: ${o}, subreasons: ${u.map(l=>l.text||"").join(", ")}`)}}async _getCaptionXml(e){return await(await fetch(e.baseUrl,{method:"GET"})).text()}_parseCaptionXml(e){var o;const a=((o=new Ig({ignoreAttributes:!1,attributeNamePrefix:""}).parse(e).transcript)==null?void 0:o.text)||[],s=this._getHtmlRegex();return a.map(u=>{const l=typeof u["#text"]=="string"?u["#text"]:JSON.stringify(u);return{text:l?Fg.unescape(l).replace(s,""):"",start:parseFloat(u.start),duration:parseFloat(u.dur||"0.0")}}).filter(u=>u.text)}_getHtmlRegex(){if(this._preserveFormatting){const e=Og.join("|");return new RegExp(`<\\/?(?!\\/?(?:${e})\\b).*?\\b>`,"gi")}return/<[^>]*>/gi}_isFloatEqual(e,n,r=.001){return Math.abs(e-n)<r}_needsSpaceJoining(e){return!Mg.includes(e)}_createCaptionItem(e,n){var s;const a=this._needsSpaceJoining(n)?" ":"";return{text:((s=e.segs)==null?void 0:s.map(o=>{var u;return(u=o.utf8)==null?void 0:u.replace(/\n/g," ")}).join(a))||"",start:Number(e.tStartMs),duration:Number(e.dDurationMs),end:Number(e.tStartMs)+Number(e.dDurationMs)}}_formatCaptionLanguage(){let e=navigator.language;return(e==="zh-TW"||e==="zh-HK")&&(e="zh-Hant"),e}}const $n=()=>{},Pg={"zh-Hant":"zh-TW","en-US":"en"};class $g{constructor(e){Be(this,"videoPlatform","youtube");Be(this,"translationService",Tn.GOOGLE);Be(this,"captionLanguage","");Be(this,"targetLanguage","");Be(this,"useManualSubtitle",!0);Be(this,"displayMode",sn.BILINGUAL);Be(this,"videoElement",null);Be(this,"captionElement",null);Be(this,"subtitleElement",null);Be(this,"subtitleExtractor",null);Be(this,"captionList",[]);Be(this,"subtitleList",[]);Be(this,"isPlaying",!1);Be(this,"lastRenderedTime",-1);Be(this,"renderThrottleTimer",null);Be(this,"currentSubtitle",{caption:"",subtitle:""});Be(this,"translatedCount",0);Be(this,"batchSize",10);Be(this,"translateErrorcount",0);Be(this,"pauseTranslation",!1);Be(this,"isTranslating",!1);Be(this,"needTranslate",!0);Be(this,"translationQueue",[]);Be(this,"preloadThreshold",15);Be(this,"stopRender",!1);Be(this,"isAdPlaying",!1);Be(this,"captionCallbackCalled",!1);Be(this,"translationCallback",$n);Be(this,"captionStatusCallback",$n);Be(this,"captionEntryTriggerCallback",$n);Be(this,"isInitialized",!1);Be(this,"isDownloadingSubtitle",!1);Be(this,"boundEventHandlers",{play:()=>this.handlePlay(),pause:()=>this.handlePause(),timeupdate:()=>this.handleTimeUpdate(),seeked:()=>this.handleSeeked()});this.isInitialized&&this.destroy(),this.initInterceptor(),this.videoPlatform=e.videoPlatform||"youtube",this.translationService=e.translationService,this.targetLanguage=e.targetLanguage,this.useManualSubtitle=e.useManualSubtitle??!0,this.displayMode=e.displayMode||sn.BILINGUAL,this.videoElement=e.videoElement,this.captionElement=e.captionElement,this.subtitleElement=e.subtitleElement,this.translationCallback=e.translationCallback||$n,this.captionStatusCallback=e.captionStatusCallback||$n,this.captionEntryTriggerCallback=e.captionEntryTriggerCallback||$n,Me.info("this.videoPlatform",this.videoPlatform)}initInterceptor(){window.addEventListener("message",e=>{if(e.source===window&&e.origin===window.location.origin){if(e.data.eventType==="ANYDOC_SUBTITLE_DATA"&&e.data.source==="inject"){this.captionCallbackCalled||(this.captionCallbackCalled=!0,this.captionStatusCallback({hasCaption:!0}));const n=e.data.data;(n==null?void 0:n.language)===this.targetLanguage?this.useManualSubtitle&&this.subtitleList.length!==this.captionList.length&&this.processInterceptorSubtitleData(n,"subtitle"):this.processInterceptorSubtitleData(n,"caption")}else if(e.data.eventType==="ANYDOC_VIDEO_INFO"&&e.data.source==="inject"){const n=e.data.data;dt(de.SUBTITLE_TRANSLATE_VIDEO_INFO,n)}}})}async processInterceptorSubtitleData(e,n){var r,a;try{this.subtitleExtractor=new zs({}),n==="subtitle"?(this.subtitleList=this.subtitleExtractor.processInterceptorData(e),this.needTranslate=((r=this.subtitleList)==null?void 0:r.length)===0):(this.captionList=this.subtitleExtractor.processInterceptorData(e),this.captionList.length>0&&(this.preloadSubtitles(),this.captionCallbackCalled||(this.captionCallbackCalled=!0,this.captionStatusCallback({hasCaption:!0})),this.captionLanguage=e.language,Me.success("",this.captionLanguage,this.captionList.length),this.initializeSubtitles()),this.useManualSubtitle&&this.needTranslate&&(this.subtitleList=await this.subtitleExtractor.fetchSubtitle(this.targetLanguage),this.needTranslate=((a=this.subtitleList)==null?void 0:a.length)===0))}catch{}}async processVideoInfoData(){var e;try{const n=await Ge(de.SUBTITLE_TRANSLATE_VIDEO_INFO),r=JSON.parse((n==null?void 0:n.data)||"{}");switch(jn(de.SUBTITLE_TRANSLATE_VIDEO_INFO),this.videoPlatform){case"youtube":(e=this.subtitleExtractor)==null||e.setVideoInfo(r);break;default:Me.info(":",n==null?void 0:n.site)}}catch{}}async init(){this.setupVideoEventListeners(),this.processVideoInfoData(),setTimeout(()=>{this.captionList.length||this.captionEntryTriggerCallback&&this.captionEntryTriggerCallback()},3e3),setTimeout(()=>{this.captionList.length||this.fallbackToTraditionalMethod()},5e3),this.isInitialized=!0}async fallbackToTraditionalMethod(){var n,r,a;const e=new URL(location.href).searchParams.get("v")||"";this.subtitleExtractor=new zs({videoId:e}),this.captionList=await this.subtitleExtractor.fetchCaption(),this.captionLanguage=((n=this.subtitleExtractor)==null?void 0:n.getCaptionLanguage())||"",this.preloadSubtitles(),(r=this.subtitleExtractor)!=null&&r.hasAds()&&((a=this.subtitleExtractor)==null||a.initAdDetector({onAdStatusChange:s=>{this.isAdPlaying=s}})),Me.success("",this.captionLanguage,this.targetLanguage),await this.initializeSubtitles()}async initializeSubtitles(){var e;this.useManualSubtitle&&this.subtitleExtractor&&(this.subtitleList=await this.subtitleExtractor.fetchSubtitle(this.targetLanguage),this.needTranslate=((e=this.subtitleList)==null?void 0:e.length)===0),this.isSameLanguage(this.captionLanguage,this.targetLanguage)&&(this.subtitleList=this.captionList,this.needTranslate=!1)}isSameLanguage(e,n){return e===n||Pg[e]===n}setupVideoEventListeners(){Object.entries(this.boundEventHandlers).forEach(([e,n])=>{var r;(r=this.videoElement)==null||r.addEventListener(e,n)})}handlePlay(){this.isPlaying=!0,this.startSubtitleRendering()}handlePause(){this.isPlaying=!1,this.stopSubtitleRendering()}handleTimeUpdate(){var e,n,r;this.isPlaying||(this.isPlaying=!!this.videoElement&&!((e=this.videoElement)!=null&&e.paused)&&!((n=this.videoElement)!=null&&n.ended)&&((r=this.videoElement)==null?void 0:r.readyState)>=2),this.isPlaying&&!this.stopRender&&this.processVideoUpdate()}handleSeeked(){this.stopRender||(this.lastRenderedTime=-1,this.processVideoUpdate())}processVideoUpdate(){this.checkAndRenderSubtitle(),this.checkTranslationQueue()}startSubtitleRendering(){this.stopRender||this.isAdPlaying||(this.stopSubtitleRendering(),this.renderSubtitleLoop())}stopSubtitleRendering(){this.renderThrottleTimer&&(clearTimeout(this.renderThrottleTimer),this.renderThrottleTimer=null)}renderSubtitleLoop(){!this.isPlaying||this.isAdPlaying||(this.processVideoUpdate(),this.renderThrottleTimer=setTimeout(()=>{this.renderSubtitleLoop()},200))}async checkAndRenderSubtitle(){var r;if(this.isAdPlaying)return;const e=((r=this.videoElement)==null?void 0:r.currentTime)||0;if(Math.abs(e-this.lastRenderedTime)<.1)return;const n=this.getSubtitleText(e);(n.caption!==this.currentSubtitle.caption||n.subtitle!==this.currentSubtitle.subtitle)&&(this.currentSubtitle=n,this.renderSubtitle(n),this.lastRenderedTime=e)}getSubtitleText(e){var o,u;if(!((o=this.captionList)!=null&&o.length))return{caption:"",subtitle:""};const n=this.findSubtitleIndex(e,this.captionList);if(n===-1)return{caption:"",subtitle:""};const a=this.captionList[n].text;let s="";if(((u=this.subtitleList)==null?void 0:u.length)>n){const l=this.subtitleList[n];l!=null&&l.text&&(s=l.text)}return{caption:a,subtitle:s}}findSubtitleIndex(e,n){let r=0,a=n.length-1;for(;r<=a;){const s=Math.floor((r+a)/2),o=n[s];if(e>=o.start&&e<o.end)return s;e<o.start?a=s-1:r=s+1}return-1}async renderSubtitle(e){const{caption:n,subtitle:r}=e;if(this.isSameLanguage(this.captionLanguage,this.targetLanguage)){this.updateSingleCaption(n,"");return}if(r&&r.trim()){this.updateSingleCaption(n,r);return}this.updateSingleCaption(n,"")}updateSingleCaption(e,n=""){const r=e.trim(),a=n.trim();if(this.captionElement){this.captionElement.innerText=e;const s=this.displayMode===sn.BILINGUAL&&r;this.captionElement.style.display=s?"block":"none"}this.subtitleElement&&(a?(this.subtitleElement.innerText=n,this.subtitleElement.style.display="block"):this.subtitleElement.style.display="none")}checkTranslationQueue(){var s;if(!this.needTranslate||this.isTranslating||this.pauseTranslation)return;const e=((s=this.videoElement)==null?void 0:s.currentTime)||0,n=this.findSubtitleIndex(e,this.captionList);if(n===-1)return;const r=n+1,a=Math.min(n+this.preloadThreshold,this.captionList.length);for(let o=r;o<a;o++)!this.isSubtitleTranslated(o)&&!this.translationQueue.includes(o)&&this.translationQueue.push(o);this.translationQueue.length>=this.batchSize&&this.processTranslationQueue()}async processTranslationQueue(e=""){if(!(this.isTranslating||this.translationQueue.length===0||this.pauseTranslation)){this.isTranslating=!0;try{const n=this.translationQueue.splice(0,this.batchSize),r=n.map(s=>this.captionList[s].text);Me.info(` ${r.length}  :${this.translationService}`);const a=await this.batchTranslateSubtitles(r);this.updateTranslationResults(n,a),this.translatedCount+=n.length,Me.success(` ${n.length} `)}catch{this.translateErrorcount++,this.translationQueue.push(...this.translationQueue.splice(0,this.batchSize))}finally{this.isTranslating=!1,this.translationQueue.length>0&&(e==="all"?await this.processTranslationQueue(e):setTimeout(()=>this.processTranslationQueue(e),1e3))}}}updateTranslationResults(e,n){e.forEach((r,a)=>{const s=this.captionList[r];for(;this.subtitleList.length<=r;)this.subtitleList.push({start:s.start,duration:s.duration,text:"",end:s.end,index:r});this.subtitleList[r]={start:s.start,duration:s.duration,text:n[a]||"",end:s.end,index:r}})}async batchTranslateSubtitles(e){return new Promise(async(n,r)=>{var s;if(e.length===0){n([]);return}const a=this.targetLanguage;try{const o=await Zn({service:this.translationService,texts:e.map(u=>({text:u})),from:"",to:a,type:q.SUBTITLE},{position:"plugin_subtitle_translate",feature:"plugin_subtitle_translate"});(o==null?void 0:o.code)!==0&&(this.translationCallback({error:o}),r(o)),a!==this.targetLanguage&&n([]),n(((s=o==null?void 0:o.data)==null?void 0:s.map(u=>u.text))||e.map(()=>""))}catch(o){this.translationCallback({error:o}),n([])}})}async translateAllSubtitles(){if(this.captionList.length===0)return;await this.waitForTranslationComplete();const e=[];for(let n=0;n<this.captionList.length;n++)this.isSubtitleTranslated(n)||e.push(n);e.length!==0&&(this.translationQueue.push(...e),await this.processTranslationQueue("all"),await this.waitForTranslationComplete())}async waitForTranslationComplete(){return new Promise(e=>{const n=()=>{!this.isTranslating&&this.translationQueue.length===0?e():setTimeout(n,200)};n()})}preloadSubtitles(){const e=n=>{n.length>0&&n.forEach((r,a)=>{r.end=Math.round((r.start+r.duration)*1e3)/1e3,r.index=a})};e(this.captionList),e(this.subtitleList)}isSubtitleTranslated(e){var n,r;return e<0||e>=this.subtitleList.length?!1:!!((r=(n=this.subtitleList[e])==null?void 0:n.text)!=null&&r.trim())}hasCaption(){var e;return((e=this.captionList)==null?void 0:e.length)>0}pauseRendering(){this.stopRender=!0}resumeRendering(){this.stopRender=!1}cancelTranslate(){this.pauseTranslation=!0}destroy(){var e;this.stopSubtitleRendering(),(e=this.subtitleExtractor)==null||e.destroyAdDetector(),this.subtitleExtractor=null,this.captionList=[],this.subtitleList=[],this.translationQueue=[],this.captionLanguage="",this.targetLanguage="",this.useManualSubtitle=!0,this.isInitialized=!1,this.isPlaying=!1,this.lastRenderedTime=-1,this.currentSubtitle={caption:"",subtitle:""},this.translatedCount=0,this.translateErrorcount=0,this.pauseTranslation=!1,this.isTranslating=!1,this.needTranslate=!0,this.stopRender=!1,this.isAdPlaying=!1,this.videoElement&&Object.entries(this.boundEventHandlers).forEach(([n,r])=>{var a;(a=this.videoElement)==null||a.removeEventListener(n,r)})}formatTime(e){const n=Math.floor(e/3600),r=Math.floor(e%3600/60),a=Math.floor(e%60),s=Math.floor(e%1*1e3);return`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")},${s.toString().padStart(3,"0")}`}downloadSubtitle(){return new Promise(async e=>{var n;if(!this.captionList||this.captionList.length===0){setTimeout(()=>{e({isCompleted:!1,error:!0,message:"no_subtitle_data"})},100);return}try{const r=(n=this.subtitleExtractor)==null?void 0:n.getVideoInfo();if(this.isDownloadingSubtitle){setTimeout(()=>{e({isCompleted:!1,error:!1,message:""})},100);return}if(this.needTranslate&&this.subtitleList.length<this.captionList.length)try{this.isDownloadingSubtitle=!0,await this.translateAllSubtitles()}catch{this.isDownloadingSubtitle=!1,setTimeout(()=>{e({isCompleted:!1,error:!0,message:"translate_failed"})},100);return}e({isCompleted:!0,error:!1,message:""}),setTimeout(()=>{var o;const a=this.generateSrtContent(),s=(o=document.querySelector("yt-formatted-string.style-scope.ytd-watch-metadata"))==null?void 0:o.innerText;this.downloadSrtFile(a,(r==null?void 0:r.title)||s||"video"),this.isDownloadingSubtitle=!1},100)}catch(r){this.isDownloadingSubtitle=!1,setTimeout(()=>{e({isCompleted:!1,error:!0,message:(r==null?void 0:r.message)||"network_error"})},100)}})}generateSrtContent(){return this.captionList.map((e,n)=>{var l,c;const r=this.formatTime(e.start),a=this.formatTime(e.end),s=e.text.trim();let o="";this.subtitleList&&this.subtitleList.length>n&&(o=((c=(l=this.subtitleList[n])==null?void 0:l.text)==null?void 0:c.trim())||"");let u="";return this.displayMode===sn.BILINGUAL?u=o?`${s}
${o}`:s:u=o,`${n+1}
${r} --> ${a}
${u}
`}).join(`
`)}downloadSrtFile(e,n){const r=new Blob([e],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(r),s=document.createElement("a");s.id="subtitle-download-link",s.href=a,s.download=`${n}-${this.targetLanguage}-translation.srt`,s.style.display="none";const o=()=>{const u=document.getElementById("subtitle-download-link");u&&u.remove(),URL.revokeObjectURL(a)};s.addEventListener("click",()=>{setTimeout(o,100)}),document.body.appendChild(s),s.click()}setService(e){this.pauseTranslation=!1,this.translationService=e,this.needTranslate&&(this.subtitleList=[],this.translatedCount=0,this.translationQueue=[],this.isTranslating=!1,this.checkTranslationQueue())}async setTargetLanguage(e){var n,r;e!==this.targetLanguage&&(this.targetLanguage=e,e===this.captionLanguage?(this.needTranslate=!1,this.subtitleList=this.captionList):this.useManualSubtitle?(this.subtitleList=await((n=this.subtitleExtractor)==null?void 0:n.fetchSubtitle(this.targetLanguage))||[],this.needTranslate=((r=this.subtitleList)==null?void 0:r.length)===0):(this.needTranslate=!0,this.subtitleList=[]),this.needTranslate&&(this.translatedCount=0,this.translationQueue=[],this.isTranslating=!1,this.checkTranslationQueue()))}async setUseManualSubtitle(e){var n;if(e!==this.useManualSubtitle&&(this.useManualSubtitle=e,this.useManualSubtitle)){const r=await((n=this.subtitleExtractor)==null?void 0:n.fetchSubtitle(this.targetLanguage))||[];r.length>0&&(this.subtitleList=r,this.needTranslate=!1)}}setDisplayMode(e){this.displayMode=e,this.captionElement&&(this.captionElement.style.display=e===sn.BILINGUAL?"block":"none")}}const{userSettings:ei}=Xe();let dn=null,ot=null;const Oa=new Set,Qt=D(void 0),es=D(!1),ts=D(!1),ns=D(!1),rs=D(!1);ve(ei,(t,e)=>{e.subtitleTranslation.enable!==t.subtitleTranslation.enable&&(t.subtitleTranslation.enable?Ug():qg()),t.subtitleTranslation.enable&&ot&&dr(),e.subtitleTranslation.translationService!==t.subtitleTranslation.translationService&&(ti(),Qt.value&&(Qt.value.translationService=t.subtitleTranslation.translationService),ot==null||ot.setService(t.subtitleTranslation.translationService)),e.targetLanguage!==t.targetLanguage&&(Qt.value&&(Qt.value.targetLanguage=t.targetLanguage),ot==null||ot.setTargetLanguage(t.targetLanguage)),e.subtitleTranslation.useSiteSubtitle!==t.subtitleTranslation.useSiteSubtitle&&(Qt.value&&(Qt.value.useManualSubtitle=t.subtitleTranslation.useSiteSubtitle),ot==null||ot.setUseManualSubtitle(t.subtitleTranslation.useSiteSubtitle)),e.subtitleTranslation.displayMode!==t.subtitleTranslation.displayMode&&(Qt.value&&(Qt.value.displayMode=t.subtitleTranslation.displayMode),ot==null||ot.setDisplayMode(t.subtitleTranslation.displayMode))});const ti=()=>{es.value=!1,ts.value=!1,rs.value=!1,ns.value=!1},dr=()=>{if(dn){const t=document.querySelector(dn.originCaptionSelector);t&&(t.style.display="none")}},as=()=>{if(dn){const t=document.querySelector(dn.originCaptionSelector);t&&(t.style.display="block")}},Ug=()=>{if(ot?ot.resumeRendering():ss(),dn!=null&&dn.subtitleBtnSelector){const t=document.querySelector(dn.subtitleBtnSelector);t&&(t.getAttribute("aria-pressed")==="true"||setTimeout(()=>{t.click()},100))}dr()},qg=()=>{ot==null||ot.pauseRendering(),as()},Hg=(t,e)=>{dn=t,Qt.value=e},Gg=t=>{const e=t.error;e&&(es.value=!0,as(),ot==null||ot.cancelTranslate(),e.code===ke.EXTEND_LIMIT?ts.value=!0:Ki.includes(e.code)?ns.value=!0:rs.value=!0)},Vg=()=>{dr(),setTimeout(()=>{dr()},5e3),Oa.forEach(t=>{try{t()}catch{}})},Wg=()=>ot?ot.downloadSubtitle():Promise.reject(new Error("subtitle translator not initialized")),ss=async()=>{ti(),ot&&ni(),Qt.value&&ei.value.subtitleTranslation.enable&&(ot=new $g({...Qt.value,translationCallback:Gg,captionStatusCallback:Vg}),ot.init())},ni=()=>{ot==null||ot.destroy(),ot=null},zg=()=>{Qt.value&&ss()},jg=t=>(Oa.add(t),()=>Oa.delete(t)),os=()=>({setSubtitleTranslateInfo:Hg,resetSubtitleTranslateInfo:zg,initTranslateSubtitle:ss,destroySubtitleTranslate:ni,hideOriginCaption:dr,showOriginCaption:as,limitError:ts,errorTipShow:rs,translateError:es,otherLimitError:ns,addCaptionStatusListener:jg,downloadSubtitle:Wg});var Ur=(t=>(t.YOUTUBE="youtube",t))(Ur||{});const ri=[{name:"youtube",pattern:/^https:\/\/www\.youtube\.com\//i,videoIdPattern:/^(https?:\/\/)?(www\.|m\.)?(youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})(?:[?#&].*)?$/i,btnAnchorSelector:"#movie_player .ytp-right-controls",videoSelector:"#movie_player video",originCaptionSelector:"#ytp-caption-window-container",btnAppendMethod:lr.INSERT_BEFORE,captionAnchorSelector:"#movie_player",captionAppendMethod:lr.APPEND_CHILD,subtitleBtnSelector:"#movie_player .ytp-subtitles-button"}];function Zr(t){for(const e of ri)if(t.match(e.pattern))return e;return null}function js(t){for(const e of ri){const n=t.match(e.videoIdPattern);if(n)return n[n.length-1]||null}return null}function Xg(t){if(t.name==="youtube"){if(!t.subtitleBtnSelector)return!1;const e=document.querySelector(t.subtitleBtnSelector);if(!e)return!1;const n=e.querySelector("svg");return n?n.getAttribute("fill-opacity")==="0.3":!1}return!1}const Yg={style:{position:"absolute",left:"40px",right:"40px",bottom:"5px",display:"flex","white-space":"pre-wrap","flex-direction":"column","pointer-events":"all","user-select":"text","align-items":"center"}},Kg={key:0,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px"}},Qg=Pe({__name:"captionWindow",setup(t){const{userSettings:e}=Xe(),{initTranslateSubtitle:n,setSubtitleTranslateInfo:r,destroySubtitleTranslate:a,resetSubtitleTranslateInfo:s,hideOriginCaption:o,translateError:u,addCaptionStatusListener:l}=os(),c=Zr(location.href);let f=js(location.href),w=null,T=null,A=null,x=null;const I=D(0),L=Ue("subtitleRef"),E=Ue("captionRef"),_=D(!0),p=D(!1),i=se(()=>e.value.subtitleTranslation.enable&&!u.value),h=()=>{const X=document.getElementById("movie_player");X&&(X.classList.contains("ytp-autohide")?I.value=0:I.value=60,T=new MutationObserver(B=>{B.forEach(N=>{N.type==="attributes"&&N.attributeName==="class"&&(N.target.classList.contains("ytp-autohide")?I.value=0:I.value=60)})}),T.observe(X,{attributes:!0,attributeFilter:["class"],subtree:!1}))},g=X=>{w=new MutationObserver(Ee=>{Ee.forEach(B=>{if(B.type==="attributes"&&B.attributeName==="src"){const N=B.target;if(N.src){Me.info("video src change",N.src);const P=js(location.href);P||(_.value=!1),f!==P&&(_.value=!1,E.value&&(E.value.innerText=""),L.value&&(L.value.innerText=""),f=P,s())}}})}),w.observe(X,{attributes:!0,attributeFilter:["src"]})},G=()=>{if(!c.subtitleBtnSelector)return;const X=document.querySelector(c.subtitleBtnSelector);X&&X.addEventListener("click",()=>{i.value&&(_.value=X.getAttribute("aria-pressed")==="true",setTimeout(()=>{o()},100))})},H=X=>{X.name===Ur.YOUTUBE&&(h(),G())},te=()=>{x&&clearTimeout(x),_.value=!0,p.value=!0,x=setTimeout(()=>{p.value=!1},3e3)};async function ue(){try{if(c.name===Ur.YOUTUBE){const X=document.querySelector(c.subtitleBtnSelector);if(X){const Ee=X.getAttribute("aria-pressed")==="true";X.click(),Ee&&setTimeout(()=>{X.click()},100)}}}catch{}}return xt(()=>{const X=document.querySelector(c.videoSelector);!X||!(X instanceof HTMLVideoElement)||!E.value||!L.value||(r(c,{videoPlatform:c.name,translationService:e.value.subtitleTranslation.translationService,targetLanguage:e.value.targetLanguage,videoElement:X,captionElement:E.value,subtitleElement:L.value,useManualSubtitle:e.value.subtitleTranslation.useSiteSubtitle,displayMode:e.value.subtitleTranslation.displayMode,captionEntryTriggerCallback:ue}),A=l(te),f&&n(),H(c),g(X))}),yn(()=>{a(),w==null||w.disconnect(),w=null,T==null||T.disconnect(),T=null,A==null||A(),A=null}),(X,Ee)=>Dt((F(),re("div",{style:Ae([{position:"absolute",width:"100%",top:"0px",left:"0px","pointer-events":"none","z-index":"10","font-size":"20px",color:"rgba(255,255,255,0.9)","font-weight":"400","line-height":"150%",transition:"bottom 0.1s ease-in-out"},{bottom:`${I.value}px`}])},[Dt(y("div",Yg,[y("div",{ref_key:"captionRef",ref:E,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px",display:"none"}},null,512),y("div",{ref_key:"subtitleRef",ref:L,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px",display:"none"}},null,512),p.value?(F(),re("div",Kg," ["+pe(X.$t("subtitle.guidText"))+"] ",1)):ge("",!0)],512),[[yt,_.value]])],4)),[[yt,i.value]])}}),Jg=Ve(Qg,[["__scopeId","data-v-d1944dd0"]]),Zg={class:"subtitle-guide-dialog-container"},ef={class:"dialog-title"},tf={class:"dialog-description"},nf={class:"dialog-actions"},rf=Pe({__name:"guidDialog",emits:["gotIt","exploreMore"],setup(t,{emit:e}){const n=e;function r(){n("gotIt"),k.reportClickEvent("plugin_subtitle_translate_newuser_guide_page","got_it")}function a(){n("exploreMore"),k.reportClickEvent("plugin_subtitle_translate_newuser_guide_page","explore_more")}return(s,o)=>(F(),re("div",Zg,[y("h3",ef,pe(s.$t("subtitle.guidText")),1),y("p",tf,pe(s.$t("subtitle.guidDialog.desc")),1),y("div",nf,[oe(tn,{type:"text",class:"got-it-button",onClick:r},{default:Ze(()=>[Gt(pe(s.$t("common.gotIt")),1)]),_:1}),oe(tn,{type:"primary",class:"explore-button",onClick:a},{default:Ze(()=>[Gt(pe(s.$t("common.exploreMore")),1)]),_:1})])]))}}),af=Ve(rf,[["__scopeId","data-v-e6e519b9"]]),sf={class:"subtitle-icon"},of=["src"],uf=Pe({__name:"SubtitleIcon",props:{icon:{},size:{default:24}},setup(t){const e=t,n=()=>e.icon==="arrowLeft"?chrome.runtime.getURL("public/subtitle/arrowLeft.png"):chrome.runtime.getURL(`public/subtitle/${e.icon}.svg`);return(r,a)=>(F(),re("div",sf,[y("img",{src:n(),style:Ae({width:`${r.size}px`,height:`${r.size}px`})},null,12,of)]))}}),ea=Ve(uf,[["__scopeId","data-v-64fd24a9"]]),lf={class:"menu-cell-left"},cf={class:"menu-cell-right"},df={key:0,style:{"font-size":"14px"}},pf=Pe({__name:"MenuCell",props:{title:{},value:{default:""},isLink:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},className:{default:""}},emits:["click"],setup(t,{emit:e}){const{isRtl:n}=no(),r=t,a=e,{disabled:s}=r,o=()=>{r.disabled||a("click")};return(u,l)=>(F(),re("div",{class:Je(["menu-cell",u.className]),style:Ae({cursor:z(s)?"not-allowed":"pointer",opacity:z(s)?.5:1}),onClick:o},[y("div",lf,[fr(u.$slots,"left-icon",{},void 0,!0),y("span",null,pe(u.title),1)]),y("div",cf,[u.value?(F(),re("span",df,pe(u.value),1)):ge("",!0),u.isLink?(F(),Le(ea,{key:1,size:16,style:Ae(z(n)?{transform:"rotate(180deg)"}:{}),icon:"arrowRightSmall"},null,8,["style"])):ge("",!0)])],6))}}),gf=Ve(pf,[["__scopeId","data-v-de94c478"]]),ff=Pe({__name:"MenuContainer",props:{className:{default:""}},setup(t){return(e,n)=>(F(),re("div",{class:Je(["menu-container",e.className])},[fr(e.$slots,"default",{},void 0,!0)],2))}}),ai=Ve(ff,[["__scopeId","data-v-20d5d8e7"]]),hf={},mf={class:"menu-divider"};function vf(t,e){return F(),re("div",mf)}const si=Ve(hf,[["render",vf],["__scopeId","data-v-f1c6b8bc"]]),Ef=["onClick"],Xs=24,bf=Pe({__name:"SelectList",props:{items:{}},emits:["select"],setup(t,{emit:e}){const n=e,r=a=>{n("select",a)};return(a,s)=>(F(),re("div",null,[(F(!0),re(Ft,null,hn(a.items,o=>(F(),re("div",{key:o.id,class:"select-list-item",onClick:()=>r(o.id)},[o.selected?(F(),Le(ea,{key:0,size:Xs,icon:"check"})):(F(),re("div",{key:1,style:Ae({width:`${Xs}px`})},null,4)),fr(a.$slots,"default",{item:o},()=>[y("span",null,pe(o.title),1)],!0)],8,Ef))),128))]))}}),oi=Ve(bf,[["__scopeId","data-v-cab79358"]]),Tf={class:"menu-header-title"},wf=Pe({__name:"MenuHeader",props:{title:{}},emits:["back"],setup(t,{emit:e}){const n=e,r=()=>{n("back")};return(a,s)=>(F(),re("div",{class:"menu-header",onClick:r},[oe(ea,{icon:"arrowLeft",size:24}),y("span",Tf,pe(a.title),1)]))}}),Af=Ve(wf,[["__scopeId","data-v-4535d3fb"]]),_f={class:"service-list-container"},Cf={key:0,class:"group-title"},yf={class:"group-title-text"},Df=["src"],Sf={class:"service-item"},xf=["src"],Lf=["src"],Rf=Pe({__name:"TranslateServicePanel",emits:["close","back","select"],setup(t,{emit:e}){const{userSettings:n,notifyUserSettings:r,getSettingByKey:a}=Xe(),{userInfo:s}=Tt(),{t:o}=pt(),{refreshPaymentDialogShow:u}=fn(),l=se(()=>{const x=n.value.subtitleTranslation.translationService;return n.value.services.filter(L=>n.value.enabledServices.includes(L.value)||L.value===x).map(L=>({id:L.value,title:L.title,icon:chrome.runtime.getURL(`public/modelIcons/small/${L.icon}.svg`),selected:L.value===x,isAIService:L.isAIService,isVipService:L.isVipService}))}),c=se(()=>{var x,I;return[{title:o("model.basicModels"),models:l.value.filter(L=>!L.isAIService),tag:(x=s.value)!=null&&x.isVip?"":pn("images/dark-free.svg")},{title:o("model.advancedModels"),models:l.value.filter(L=>L.isAIService),tag:(I=s.value)!=null&&I.isVip?"":pn("images/pro.svg")}]}),f=x=>{var L;const I=l.value.find(E=>E.id===x);return!I||(L=s.value)!=null&&L.isVip?"":I.isAIService&&!I.isVipService?pn("/images/dark-limited-free.svg"):""},w=e,T=x=>{const I=l.value.find(E=>E.id===x);if(!I)return;if(k.reportClickEvent("plugin_subtitle_translate_service_page",I.id),w("close"),s.value){if(!s.value.isVip&&I.isVipService){const E=`${fe.priceUrl}?source=web_translate_subtitle&position=web_subtitle_translate_ai_payment`;qe(E),setTimeout(()=>{u.value=!0},1e3);return}}else if(I.isAIService){const E="plugin_subtitle_translate_service_page",_="plugin_subtitle_translate_service_page",p=encodeURIComponent(`${fe.pluginDescPage}?from=extensionLogin`);qe(`${fe.loginUrl}?feature=${_}&position=${E}&cb=${p}`);return}const L=a("subtitleTranslation");L.translationService=I.id,r({subtitleTranslation:L})},A=()=>{w("back")};return(x,I)=>(F(),Le(ai,null,{default:Ze(()=>[oe(Af,{title:x.$t("translate.serviceLabel"),onBack:A},null,8,["title"]),oe(si),y("div",_f,[(F(!0),re(Ft,null,hn(c.value,L=>(F(),re("div",{key:L.title},[L.models.length>0?(F(),re("div",Cf,[I[0]||(I[0]=y("div",{style:{width:"24px",height:"24px"}},null,-1)),y("div",yf,pe(L.title),1),L.tag?(F(),re("img",{key:0,src:L.tag,width:"32px",height:"16px"},null,8,Df)):ge("",!0)])):ge("",!0),oe(oi,{class:"service-list",items:L.models,onSelect:T},{default:Ze(({item:E})=>[y("div",Sf,[y("img",{src:E.icon,style:{width:"24px",height:"24px"}},null,8,xf),y("span",null,pe(E.title),1),f(E.id)?(F(),re("img",{key:0,height:"16px",src:f(E.id)},null,8,Lf)):ge("",!0)])]),_:2},1032,["items"])]))),128))])]),_:1}))}}),If=Ve(Rf,[["__scopeId","data-v-b42f5d5b"]]),Bf=["src"],Nf=Pe({__name:"SettingPanel",props:{setDownloadTip:{type:Function}},emits:["close","login"],setup(t,{emit:e}){const{userSettings:n,getSettingByKey:r,notifyUserSettings:a}=Xe(),{downloadSubtitle:s}=os(),{userInfo:o}=Tt(),{t:u}=pt(),{giftText:l,giftType:c}=gr(),f=e,w=t,T=D(!1),A=se(()=>!T.value);ve(T,h=>{h&&k.reportShowEvent("plugin_subtitle_translate_service_page")});const x=se(()=>[{id:"enable-bilingual",title:u("subtitle.autoEnableBilingualSubtitles"),selected:n.value.subtitleTranslation.enable&&n.value.subtitleTranslation.displayMode===sn.BILINGUAL},{id:"disable-bilingual",title:u("subtitle.turnOffBilingualSubtitles"),selected:n.value.subtitleTranslation.enable&&n.value.subtitleTranslation.displayMode===sn.TRANSLATE_ONLY},{id:"turn-off",title:u("subtitle.turnOff"),selected:!n.value.subtitleTranslation.enable}]),I=()=>{var G;const h=n.value.subtitleTranslation.translationService,g=((G=Ha.find(H=>H.value===h))==null?void 0:G.icon)||"google";return chrome.runtime.getURL(`public/modelIcons/small/${g}.svg`)},L=se(()=>{var g;const h=[{id:"translateService",title:u("translate.serviceLabel"),isLink:!0,iconImage:I()},{id:"download",title:u("subtitle.download"),icon:"download"},{id:"settings",title:u("common.setting"),isLink:!0,icon:"setting"}];return(g=o.value)!=null&&g.isVip||h.push({id:"gift",title:l.value,isLink:!1,iconImage:pn("images/gift.png")}),h}),E=h=>{const g=r("subtitleTranslation");h==="enable-bilingual"?(g.enable=!0,g.displayMode=sn.BILINGUAL,k.reportClickEvent("plugin_subtitle_translate_page","auto_enable")):h==="disable-bilingual"?(g.enable=!0,g.displayMode=sn.TRANSLATE_ONLY,k.reportClickEvent("plugin_subtitle_translate_page","show_translated")):h==="turn-off"&&(g.enable=!1,k.reportClickEvent("plugin_subtitle_translate_page","turn_off")),a({subtitleTranslation:g}),f("close")},_=()=>{T.value=!0},p=async()=>{var Ee;if(!o.value){f("login");return}if(!((Ee=o.value)!=null&&Ee.isVip)){qe(`${fe.priceUrl}?source=web_translate_subtitle&position=web_subtitle_translate_download`);return}const g={feature:"plugin_subtitle_translate",download_type:r("subtitleTranslation").displayMode===sn.BILINGUAL?"download_bilingual":"download_translated",action:"save_file",source_language_target_language:`auto_detect||${n.value.targetLanguage}`};k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{...g,stage:"download_start",status:"success_pre_upload"});const G=s(),H=new Promise(B=>setTimeout(B,200)),ue=await Promise.race([H.then(()=>({type:"delay"})),G.then(B=>({type:"download",result:B}))]),X=B=>{B.isCompleted?(k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{...g,stage:"download_complete",status:"success"}),w.setDownloadTip({visible:!1,message:""})):B.error&&(k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{...g,stage:"download_complete",status:`failed_${B.message}`}),w.setDownloadTip({visible:!0,message:u("subtitle.downloadFailed")}))};if(ue.type==="delay"){w.setDownloadTip({visible:!0,message:u("subtitle.downloading")}),k.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{...g,stage:"download_start",status:"processing"});const B=await G;X(B)}else X(ue.result)},i=h=>{switch(h){case"download":p(),k.reportClickEvent("plugin_subtitle_translate_page","download_subtitle"),f("close");break;case"translateService":_(),k.reportClickEvent("plugin_subtitle_translate_page","translate_service");break;case"settings":Qi(!!o.value,fe.subtitleSettingPage,"plugin_subtitle_translate_page"),k.reportClickEvent("plugin_subtitle_translate_page","settings"),f("close");break;case"gift":qe(`${fe.priceUrl}?position=plugin_subtitle_translate_page_get_trial`),k.fireEvent(Nt.PREMIUM_PROMOTION,{action:"click",item:"plugin_subtitle_translate_page_get_trial",type:c.value==="1"?"1":"7"}),f("close");break}};return(h,g)=>A.value?(F(),Le(ai,{key:0,style:{overflow:"auto"}},{default:Ze(()=>[oe(oi,{items:x.value,onSelect:E},null,8,["items"]),oe(si),(F(!0),re(Ft,null,hn(L.value,G=>(F(),Le(gf,{key:G.id,title:G.title,"is-link":G.isLink,onClick:()=>i(G.id)},{"left-icon":Ze(()=>[G.iconImage?(F(),re("img",{key:0,src:G.iconImage,style:{width:"24px",height:"24px"}},null,8,Bf)):(F(),Le(ea,{key:1,icon:G.icon},null,8,["icon"]))]),_:2},1032,["title","is-link","onClick"]))),128))]),_:1})):T.value?(F(),Le(If,{key:1,onClose:g[0]||(g[0]=G=>f("close")),onBack:g[1]||(g[1]=G=>T.value=!1)})):ge("",!0)}}),kf={class:"try-ai-model-tip-wrapper"},Ff={class:"try-ai-model-tip"},Of={class:"tip-content"},Mf={class:"tip-text"},Pf=Pe({__name:"TryAiModelTip",props:{position:{},scene:{}},emits:["close","tryAiModel"],setup(t,{emit:e}){const{locale:n}=pt(),r=t,a=se(()=>nn(n.value)&&r.position==="right"?"left":r.position||"bottom"),s=se(()=>({plugin_subtitle_translate_ai_service_guide_page:r.scene})[r.scene]),o=e;function u(){o("close"),k.reportClickEvent(s.value,"close")}async function l(){o("tryAiModel"),k.reportClickEvent(s.value,"try_use")}return xt(()=>{k.reportShowEvent(r.scene)}),(c,f)=>(F(),re("div",kf,[f[0]||(f[0]=y("div",{class:"try-ai-model-tip-bg"},null,-1)),y("div",Ff,[y("div",Of,[y("div",Mf,pe(c.$t("translate.tryAiTip")),1),y("div",{class:"try-text-btn",onClick:l},pe(c.$t("common.tryAiModel")),1)]),y("div",{class:Je(["arrow",`arrow-${a.value||"bottom"}`])},null,2),oe(it,{class:"icon-close",icon:"close",size:16,onClick:u})])]))}}),$f=Ve(Pf,[["__scopeId","data-v-eda2ac46"]]),Uf=["dir"],qf={class:"logo-outer-border"},Hf={class:"logo-inner-border"},Gf=["src"],Vf=Pe({__name:"quickButton",setup(t){const e=Zr(location.href);let n=null;const{getServiceOnlineParams:r,onlineParams:a}=Cn(),{userInfo:s}=Tt(),{checkBoundary:o}=oo({margin:2}),{userSettings:u,notifyUserSettings:l,getSettingByKey:c}=Xe(),{contentScriptRefreshUserInfo:f}=Tt(),{subtitleLoginTipShow:w,setNoLoginTranslateUseCount:T,showLoginTipGuid:A,checkLoginTipShow:x}=hr(),{limitError:I,errorTipShow:L,otherLimitError:E,addCaptionStatusListener:_}=os(),{refreshPaymentDialogShow:p}=fn(),{locale:i}=pt(),{giftType:h}=gr(),g=se(()=>nn(i.value)?"rtl":"ltr");let G=null,H=null,te=!1;const ue=D(!1),X=D(!1),Ee=D(!1),B=D(!1),N=D(!1),P=D(!1),W=D({maxWidth:"0px",maxHeight:"0px"}),j=Ue("logoRef"),K=Ue("settingPanelRef"),O=Ue("noCaptionTipRef"),Z=Ue("errorTipRef"),Y=Ue("downloadTipRef"),Se=D("");Jt(K,()=>{P.value=!1},{ignore:[j]}),Jt(O,()=>{Ee.value=!1},{ignore:[j]}),Jt(Z,()=>{Et()},{ignore:[j]}),Jt(Y,()=>{N.value=!1},{ignore:[j]});const ne=se(()=>!ue.value),V=se(()=>zr(i.value)),Q=()=>{_t(()=>{K.value&&o(K.value.$el,Re=>{Re&&he()})})},he=io(()=>{if(!K.value)return;const Re=K.value.$el,ce=Re.getBoundingClientRect();ce.left<0?Re.style.transform=`translateX(${-ce.left}px)`:ce.right>window.innerWidth&&(Re.style.transform=`translateX(${window.innerWidth-ce.right}px)`)},100),J=Re=>{Se.value=Re.message,N.value=Re.visible};ve(I,Re=>{Re?(B.value=!0,P.value=!1):B.value=!1}),ve(P,Re=>{var ce;Re&&(Q(),k.reportShowEvent("plugin_subtitle_translate_page"),(ce=s.value)!=null&&ce.isVip||k.fireEvent(Nt.PREMIUM_PROMOTION,{action:"show",item:"plugin_subtitle_translate_page_get_trial",type:h.value==="1"?"1":"7"}))});const be=async()=>{if(B.value=!1,L.value=!1,ue.value=!1,X.value=!1,k.reportClickEvent("plugin_subtitle_translate_page","plugin_subtitle_translate_entry"),Xg(e)){Ee.value=!Ee.value;return}if(f(),!P.value&&(await T(),await x())){A(Vn.SUBTITLE);return}w.value=!1,P.value=!P.value},_e=()=>{ue.value=!1,qe(`${fe.mainPage}?position=plugin_subtitle_translate_newuser_guide`)},ye=()=>{var Re;if(X.value=!1,s.value){let ce;const He=s.value.isVip,{translationService:gt,services:et}=r();if(et.find(Ke=>Ke.value===gt)?ce=gt:He&&(ce=(Re=et.find(Ke=>Ke.isAIService))==null?void 0:Re.value),ce){const Ke=c("subtitleTranslation");Ke.translationService=ce,l({subtitleTranslation:Ke})}}else{const ce=encodeURIComponent(`${fe.mainPage}?from=extensionLogin`);qe(`${fe.loginUrl}?position=plugin_subtitle_translate_ai_service_guide&feature=plugin_translate_subtitle&cb=${ce}`)}},we=()=>{B.value=!1,setTimeout(()=>{p.value=!0},1e3)},Fe=()=>chrome.runtime.getURL("public/logo/icon-128.png"),Te=()=>{var ft;const Re=n==null?void 0:n.getBoundingClientRect(),ce=(ft=j.value)==null?void 0:ft.getBoundingClientRect();if(!Re||!ce){W.value={maxWidth:"0px",maxHeight:"0px"};return}const He=5,gt=Re.width-He,et=ce.top-Re.top-He;W.value={maxWidth:`${gt}px`,maxHeight:`${et}px`}},Oe=()=>{n&&(G=new ResizeObserver(()=>{Te(),Q()}),G.observe(n))};let $e=null;const je=async()=>{var gt;const Re=((gt=a.value)==null?void 0:gt.subtitleConfig)||{tryAiModelGap:7,tryAiModelShowTime:60},ce=u.value.subtitleTranslation.translationService;if(X.value=!1,$e&&clearTimeout($e),Cs.includes(ce))return;const He=await Ge(de.SUBTITLE_TRY_AI_MODEL_TIP_SHOW_TIME);He&&Date.now()-He<Re.tryAiModelGap*24*60*60*1e3||($e=setTimeout(()=>{if(L.value||E.value)return;const et=u.value.subtitleTranslation.translationService;Cs.includes(et)||(dt(de.SUBTITLE_TRY_AI_MODEL_TIP_SHOW_TIME,Date.now()),X.value=!0,P.value=!1,w.value=!1)},Re.tryAiModelShowTime*1e3))},ze=async()=>{te=!0,ue.value===!1&&je()},Et=()=>{L.value=!1,E.value=!1};return xt(async()=>{n=document.querySelector(e.videoSelector),Te(),Oe(),H=_(ze),await Ge(de.SUBTITLE_GUID_TEXT_TIP_SHOW)||(ue.value=!0,dt(de.SUBTITLE_GUID_TEXT_TIP_SHOW,!0),k.reportShowEvent("plugin_subtitle_translate_newuser_guide_page"),ve(ue,Re=>{!Re&&te&&je()})),k.reportShowEvent("plugin_subtitle_translate_entry")}),yn(()=>{G==null||G.disconnect(),G=null,H==null||H(),H=null}),(Re,ce)=>Dt((F(),re("div",{dir:g.value,class:"quick-button-container",style:Ae({fontFamily:V.value})},[y("div",{class:Je(["logo-container",{"hide-borders":ne.value}])},[y("div",qf,[y("div",Hf,[y("img",{ref_key:"logoRef",ref:j,onClick:be,class:"logo-image",style:{width:"24px",height:"24px"},src:Fe()},null,8,Gf)])])],2),y("div",{class:Je(["subtitle-popup-container",{"hide-borders":ne.value}])},[ue.value?(F(),Le(af,{key:0,onGotIt:ce[0]||(ce[0]=He=>ue.value=!1),onExploreMore:_e})):ge("",!0),!ue.value&&B.value?(F(),Le(Jn,{key:1,class:"exceed-limit-tip",onClose:ce[1]||(ce[1]=He=>B.value=!1),onUpgrade:we,scene:"plugin_subtitle_translate_page_free_trial_limit"})):ge("",!0),!ue.value&&(z(L)||z(E))?(F(),re("div",{key:2,class:"error-tip",ref_key:"errorTipRef",ref:Z},[y("div",null,pe(Re.$t("translate.networkError")),1),oe(it,{class:"error-tip-close",icon:"close",size:16,onClick:Et})],512)):ge("",!0),X.value?(F(),Le($f,{key:3,onClose:ce[2]||(ce[2]=He=>X.value=!1),onTryAiModel:ye,scene:"plugin_subtitle_translate_ai_service_guide_page"})):ge("",!0),Ee.value?(F(),re("div",{key:4,class:"no-caption-tip",ref_key:"noCaptionTipRef",ref:O},pe(Re.$t("subtitle.noCaption")),513)):ge("",!0),N.value?(F(),re("div",{key:5,class:"download-tip",ref_key:"downloadTipRef",ref:Y},[y("div",null,pe(Se.value),1)],512)):ge("",!0),z(w)?(F(),Le(Kr,{key:6,source:"plugin_subtitle_translate_login_guide_page",onClose:ce[3]||(ce[3]=He=>w.value=!1)})):ge("",!0),P.value?(F(),Le(Nf,{key:7,ref_key:"settingPanelRef",ref:K,style:Ae(W.value),setDownloadTip:J,onLogin:ce[4]||(ce[4]=He=>w.value=!0),onClose:ce[5]||(ce[5]=He=>P.value=!1)},null,8,["style"])):ge("",!0)],2)],12,Uf)),[[yt,z(u).subtitleTranslation.enableShortcut]])}}),Wf=Ve(Vf,[["__scopeId","data-v-6ab58ce4"]]),zf="wps-translate-subtitle-translation-button",jf="wps-translate-subtitle-translation-caption";let Hn=null,Gn=null;async function Xf(t){let e=0;const n=4,r=1e3;let a=null,s=null;for(;e<n&&(a=document.querySelector(t.btnAnchorSelector),s=document.querySelector(t.captionAnchorSelector),!(a&&s));)await new Promise(o=>setTimeout(o,r)),e++;return{btnAnchorElement:a,captionAnchorElement:s}}async function Yf(t){const{btnAnchorElement:e,captionAnchorElement:n}=await Xf(t);if(!e){Me.error(` ${t.name} `);return}if(!n){Me.error(` ${t.name} `);return}kr(e,Hn,t.btnAppendMethod),kr(n,Gn,t.captionAppendMethod)}function Kf(){if(Wr())return;const t=Zr(location.href);t&&(Me.info(":",t.name),Hn=Xn(zf,Wf),Gn=Xn(jf,Jg),Yf(t),jr({name:Xr.INJECTION,onDisconnect:()=>{Hn==null||Hn.remove(),Gn==null||Gn.remove(),Hn=null,Gn=null}}))}const{userInfo:Ma,refreshUserInfo:Qf,notifyOtherTabUserInfo:Jf}=Tt(),{onlineParams:Ys}=Cn();function Zf(){var t;location.host===fe.webHost&&window.postMessage({type:"userStatus",source:"extension",data:{isVip:(t=Ma.value)==null?void 0:t.isVip,isLogin:!!Ma.value}},window.location.origin)}async function e2(){try{const t=await nt(Ie.GET_WPS_CLIENT_INFO,{from:Wn()?"edge":"chrome"});return t?t.data?t.data:(k.reportCustomEvent("native_get_info",{result:"error",errorMsg:t.errorMsg,code:t.code}),{}):(k.reportCustomEvent("native_get_info",{result:"error",errorMsg:"get wps client info failed",code:-101}),{})}catch(t){return k.reportCustomEvent("native_get_info",{result:"error",errorMsg:t&&t.message||"unknown error",code:-102}),{}}}async function Cr(t){const e=await e2();e&&(t.wps_deviceId=e.deviceId,t.wps_exe_version=e.exe_version,t.wps_host_version=e.host_version),k.reportCustomEvent("native_login",t)}function t2(){return{autoLogin:async()=>{var o,u;if(!Ji()||Ma.value)return;if(!((o=Ys.value)!=null&&o.nativeLogin)){Cr({result:"error",errorMsg:"native login config not exist",code:-101});return}const e=(u=Ys.value)==null?void 0:u.nativeLogin.gap,n=await Ge(de.NATIVE_LOGIN_ERROR_TIME);if(n&&Date.now()-n<e*60*1e3)return;jn(de.NATIVE_LOGIN_ERROR_TIME);const r=await nt(Ie.GET_LOGIN_URL);if(!r)return;if(k.reportCustomEvent("native_login",{action:"start"}),!r.url){dt(de.NATIVE_LOGIN_ERROR_TIME,Date.now()),Cr({result:"error",errorMsg:r.errorMsg,code:r.code});return}Cr({result:"success"});const a=document.createElement("iframe");a.style.display="none";const s=()=>{setTimeout(async()=>{await Qf(),Zf(),Jf(),document.body.removeChild(a)},5e3)};a.onload=s,a.src=r.url,a.onerror=()=>{Me.error("iframe load url onerror",r.url),Cr({result:"error",errorMsg:"iframe load url onerror",url:r.url})},document.body.appendChild(a)}}}const n2=["dir"],r2={key:5},a2=Pe({__name:"index",setup(t){const{initScholarEnhance:e}=ip(),{pluginCommentGuidShow:n}=Yn(),{translatePage:r,setReportParams:a}=kn(),{userInfo:s,refreshUserInfo:o,initUserInfo:u,noLoginUserInfoRefresh:l,notifyOtherTabUserInfo:c,setUserInfo:f}=Tt(),{initUserSettings:w,userSettings:T,notifyUserSettings:A,getSettingByKey:x,refreshUserSettings:I}=Xe(),{locale:L}=pt(),{currentWindowId:E,isWindowActive:_}=Xa(),{autoLogin:p}=t2(),{upgradeDialogShow:i,exceedLimitDialogShow:h,refreshPaymentDialogShow:g}=fn(),{checkPageContinueTranslate:G,continueTranslateDialogShow:H}=Yr(),{checkUserIsT1:te}=gr(),ue=wu(),X=D(!1),Ee=D(!1),B=D(!1),N=D(!1),P=se(()=>nn(L.value)?"rtl":"ltr"),W=se(()=>zr(L.value));function j(J){const be=new URL(J);return`${be.protocol}//${be.host}`}async function K(J){const be=x("floatButton"),_e=await Mn();Ee.value=!1,J==="2"&&(Kt(_e,be.blockedSites)||(be.blockedSites.push(j(_e)),A({floatButton:be}))),J==="3"&&(be.enable=!1,A({floatButton:be}))}async function O(J){const be=x("textboxTranslation"),_e=await Mn();N.value=!1,J==="2"&&(Kt(_e,be.blockedSites)||(be.blockedSites.push(j(_e)),A({textboxTranslation:be}))),J==="3"&&(be.enable=!1,A({textboxTranslation:be}))}async function Z(J){const be=x("inTextTranslation"),_e=await Mn();B.value=!1,J==="2"&&(Kt(_e,be.blockedSites)||(be.blockedSites.push(j(_e)),A({inTextTranslation:be}))),J==="3"&&(be.enable=!1,A({inTextTranslation:be})),J==="4"&&(be.blockedLanguages||(be.blockedLanguages=[]),be.blockedLanguages.includes(T.value.targetLanguage)||be.blockedLanguages.push(T.value.targetLanguage),A({inTextTranslation:be}))}async function Y(J){const be=x("imageTranslation"),_e=await Mn();J==="2"&&(Kt(_e,be.blockedSites)||(be.blockedSites.push(j(_e)),A({imageTranslation:be}))),J==="3"&&(be.enable=!1,A({imageTranslation:be}))}async function Se(){const J=await Mn();X.value=!0;const{floatButton:be,inTextTranslation:_e}=T.value;let{textboxTranslation:ye}=T.value;ye||(ye=Zi.textboxTranslation),Ee.value=be.enable&&!Kt(J,be.blockedSites),B.value=_e.enable&&!Kt(J,_e.blockedSites),N.value=ye.enable&&!Kt(J,ye.blockedSites)}function ne(J,be){if(be==="local"&&J[de.TEMP_CONFIGS]){const{newValue:_e}=J[de.TEMP_CONFIGS];_e&&_e.inTextTranslationEnable!==void 0&&(B.value=_e.inTextTranslationEnable)}}function V(){window.location.host===fe.webHost&&window.addEventListener("message",async J=>{var be,_e,ye,we,Fe,Te,Oe,$e,je,ze;if(J.source===window&&J.origin===window.location.origin&&J.data.source==="page"){if(J.data.type==="settingSync"&&(Me.info("receive settingSync message from web:",J.data.data),s.value&&A(J.data.data,!1,!1)),J.data.type==="userStatus"){const Et=!!((_e=(be=J.data)==null?void 0:be.data)!=null&&_e.isLogin),Re=!!((we=(ye=J.data)==null?void 0:ye.data)!=null&&we.isVip),ce=((Te=(Fe=J.data)==null?void 0:Fe.data)==null?void 0:Te.userId)||void 0,He=!!s.value,gt=!!((Oe=s.value)!=null&&Oe.isVip),et=($e=s.value)==null?void 0:$e.userid;Me.info("receive userStatus message from web:",J.data),(Et!==He||Re!==gt||ce!==et)&&(Et===!1?f(void 0):await o()),c()}if(J.data.type==="interfaceLanguageChange"&&(Me.info("receive interfaceLanguageChange message from web:",J.data),!s.value)){const Et=Eo((ze=(je=J.data)==null?void 0:je.data)==null?void 0:ze.language).value;Ia(Et),nt(Ie.NOTIFY_NO_LOGIN_LOCALE_CHANGE,Et)}}})}async function Q(){var ze;const J=await Mn(),be=await nt(Ie.DETECT_PAGE_LANGUAGE),_e=((ze=Zt(be))==null?void 0:ze.value)||"",{pageTranslation:ye}=T.value,we=ye.alwaysTranslateLanguage||[],Fe=ye.neverTranslateSites||[];Fe.push("anydoctranslator-test.toolsmart.ai","anydoctranslator.toolsmart.ai","account.wps.com");const Te=Kt(J,Fe),Oe=Kt(J,ye.alwaysTranslateSites),$e=ye.alwaysTranslateEnabled&&we.includes(_e),je=await G(_e);Me.info("check page translate, info:",{pageLanguageValue:_e,pageUrl:J,alwaysTranslateEnabled:wr(ye.alwaysTranslateEnabled),alwaysTranslateSites:wr(ye.alwaysTranslateSites),neverAutoTranslateSites:wr(ye.neverTranslateSites),alwaysTranslateLanguage:wr(ye.alwaysTranslateLanguage),isNeverAutoTranslatePage:Te,isAlwaysTranslatePage:Oe,isAlwaysTranslateLanguage:$e,isContinueTranslate:je}),(Oe||!Te&&$e||!Te&&je)&&(a("plugin_open_translate_website","plugin_translate_website"),r(jt.HOVER_BALL))}async function he(){try{const J=await nt(Ie.GET_TAB_INFO);E.value=J.windowId,_.value=J.isWindowActive}catch{}}return Wa(async()=>{await k.init(),await u(),await w(),await I(),await l(),e(),await he(),Se(),Ia(T.value.interfaceLanguage),Q(),ve(T,()=>{Se()}),ve(n,J=>{J&&k.reportShowEvent("plugin_fivestar_guide_popup")}),ve(H,J=>{J&&k.reportShowEvent("plugin_always_translate_popup")}),nt(Ie.UPDATE_CONTEXT_MENU_BY_TARGET_LANGUAGE,T.value.targetLanguage),chrome.storage.onChanged.addListener(ne),V(),p(),Kf(),Pp(T.value),te()}),yn(()=>{chrome.storage.onChanged.removeListener(ne)}),(J,be)=>X.value?(F(),re("div",{key:0,dir:P.value,id:"root",style:Ae({fontFamily:W.value}),class:"root"},[!z(ue)&&Ee.value?(F(),Le(kl,{key:0,onClose:K})):ge("",!0),!z(ue)&&B.value?(F(),Le(rp,{key:1,onAlwaysClose:Z})):ge("",!0),N.value?(F(),Le(Ed,{key:2,onClose:O})):ge("",!0),oe(vc,{onClose:Y}),oe(_d),!z(ue)&&z(H)?(F(),Le(Mu,{key:3})):ge("",!0),!z(ue)&&z(n)?(F(),Le(Nd,{key:4})):ge("",!0),z(ue)?ge("",!0):(F(),re("div",r2,[z(h)?(F(),Le(Hd,{key:0})):ge("",!0),z(i)?(F(),Le(Qd,{key:1})):ge("",!0),z(g)?(F(),Le(Gd,{key:2})):ge("",!0)]))],12,n2)):ge("",!0)}}),s2=Ve(a2,[["__scopeId","data-v-9e0591f1"]]),{userSettings:Ks}=Xe(),{setWatchTranslate:ii}=kn(),{t:Qs,locale:Js}=uo.global;let ui=0;const o2=2,Zs=Math.round(1e3/o2),i2="AnyDoc",an=[];let qr=!1,Pa;const Hr={scrollTop:0,bodyOverflow:""};let Gr;async function li(){Gr||(Gr={source_language:await nt(Ie.DETECT_PAGE_LANGUAGE),target_language:Ks.value.targetLanguage,service:Ks.value.translationService,feature:"plugin_translate_website",func_type:"quick_save",target_format:"png",has_watermark:1})}async function u2(){await li(),k.fireEvent("oversea_translate_status",Gr)}async function is(t){await li();const n=Date.now()-ui;k.fireEvent("oversea_translate_status",{...Gr,result:t,duration:n})}function l2(){return new Promise(t=>{window.scrollBy(0,window.innerHeight),setTimeout(t,100)})}async function c2(){var r;const t=await nt(Ie.GET_POPUP_PERFORMANCE_NOW),e=((r=an[an.length-1])==null?void 0:r.time)||0,n=t-e;n<Zs&&await bo(Math.ceil(Zs-n))}async function ci(t,e){const n=cu(t===1,t===e);await bo(200);const r=await nt(Ie.SCREEN_SHOT);r.result===eu.SUCCESS&&an.push({data:r.data,time:r.time}),du(n),!qr&&(nt(Ie.CAPTURE_PROGRESS,{progress:`${Math.floor(t/e*100)}%`}),t<e&&(await l2(),await c2(),await ci(t+1,e)))}async function d2(t){const{logoUrl:e,logoText:n,sloganText:r}=t,a=nn(Js.value)?"rtl":"ltr",s=zr(Js.value),o=await fetch(e).then(T=>T.blob()).then(T=>new Promise((A,x)=>{const I=new FileReader;I.onload=()=>A(I.result),I.onerror=x,I.readAsDataURL(T)})),u=`
    <div dir="${a}" style="display: flex; align-items: center; justify-content: center; font-family: ${s}; padding: 12px 16px;">
      <div style="display: flex; align-items: center; gap: 8px;">
        <img style="flex-basis: 24px" width="24" height="24" src="${o}"/>
        <div style="font-size: 14px; font-weight: 600; margin-inline-end: 8px; line-height: 22px;">${Ds(n)}</div>
        <div style="flex: 1; font-size: 14px; line-height: 20px;">${Ds(r)}</div>
      </div>
    </div>
  `,l=document.createElement("div");l.style.overflow="hidden";const c=l.attachShadow({mode:"open"});c.innerHTML=u,document.body.appendChild(l);const f=Array.from(c.querySelectorAll("img"));await Promise.all(f.map(T=>new Promise((A,x)=>{T.complete?A():(T.onload=()=>A(),T.onerror=()=>x(new Error(`Failed to load image: ${T.src}`)))})));const w=l.offsetHeight;return document.body.removeChild(l),{height:w,htmlString:u}}const p2=async t=>{const{ctx:e,htmlString:n,positions:r,width:a,height:s}=t,o=`
    <svg xmlns="http://www.w3.org/2000/svg" width="${a}" height="${s}">
      <rect width="100%" height="100%" fill="#fff" />
      <foreignObject width="100%" height="100%">
        <div xmlns="http://www.w3.org/1999/xhtml" style="width: ${a}px; height: ${s}px;">
          ${n}
        </div>
      </foreignObject>
    </svg>
  `,u=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(o)))}`,l=new Image;l.src=u,await new Promise(c=>{l.onload=()=>{for(const f of r){const{x:w,y:T}=f;e.drawImage(l,w,T,a,s)}c()}})};async function g2(){const t=document.createElement("canvas"),e=t.getContext("2d");if(!e)return;const n=document.documentElement.scrollHeight,r=Math.ceil(n/window.innerHeight),a=an.length,s=r===a&&n%window.innerHeight||window.innerHeight,{height:o,htmlString:u}=await d2({logoUrl:chrome.runtime.getURL("public/logo/icon-48.png"),logoText:Qs("common.title"),sloganText:Qs("capture.watermark.slogan")});t.width=window.innerWidth,t.height=window.innerHeight*(an.length-1)+s+o*2,await p2({ctx:e,htmlString:u,width:window.innerWidth,height:o,positions:[{x:0,y:0},{x:0,y:window.innerHeight*(an.length-1)+s+o}]});let l=o;const c=an.map(w=>new Promise(T=>{const{data:A}=w,x=new Image;x.src=A,x.onload=()=>T(x)}));return await Promise.all(c).then(async w=>{w.forEach((x,I)=>{const L=window.innerWidth,E=I===an.length-1?s:window.innerHeight,_=x.width,p=x.height,i=x.height/window.innerHeight,h=I===an.length-1?(window.innerHeight-s)*i:0;e.drawImage(x,0,h,_,p-h,0,l,L,E),l+=E});const T=t.toDataURL("image/png");return await fetch(T).then(x=>x.blob())}).catch(w=>{is(`failed_${w&&w.message||"unknown_error"}`)})}function di(){an.length=0,gu(Hr.bodyOverflow),ii(!0),window.scrollTo(0,Hr.scrollTop),lu()}function f2(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return`${e}_${n}_${r}_${a}_${s}_${o}`}function h2(t){const e=new File([t],`${i2}_Screenshot_${f2()}.png`,{type:"image/png"}),n=URL.createObjectURL(e),r=document.createElement("a");r.style.display="none",r.href=n,r.download=e.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function m2(){ui=Date.now(),u2(),ii(!1),qr=!1;const t=Math.ceil(document.documentElement.scrollHeight/window.innerHeight);Hr.scrollTop=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop,Hr.bodyOverflow=document.body.style.overflow,pu(),uu(),window.scrollTo(0,0),Pa=setTimeout(async()=>{await ci(1,t);const e=await g2();qr||(e&&h2(e),di(),is("success"))},100)}function v2(){qr=!0,Pa&&clearTimeout(Pa),di(),is("failed_user_cancelled")}const pr=new Map,Vr=new Map;function E2(t){pr.set(t,[]),nt(Ie.GET_PDF_FILE_CONTENT,{url:t})}function b2(t){const e=pr.get(t.fileName);Vr.set(t.fileName,t.totalChunks),e&&(e[t.chunkIndex]=new Uint8Array(t.data))}function T2(t){const e=pr.get(t.fileName),n=Vr.get(t.fileName);if(e&&n!==void 0&&e.length===n&&e.every(r=>r!==void 0)){const r=new Blob(e,{type:"application/pdf"}),a=URL.createObjectURL(r);pr.delete(t.fileName),Vr.delete(t.fileName),window.postMessage({type:"pdfContent",source:"extension",data:{url:a,fileName:t.fileName}},window.location.origin)}else window.postMessage({type:"pdfContent",source:"extension",data:{errorType:-1,fileName:t.fileName}},window.location.origin),Me.error(`PDF content for ${t.fileName} is incomplete or invalid.`,e)}function w2(t){pr.delete(t.fileName),Vr.delete(t.fileName),window.postMessage({type:"pdfContent",source:"extension",data:{errorType:t.errorType==="overSize"?-2:-1,fileName:t.fileName}},window.location.origin),Me.error(`PDF get error for ${t.fileName}: ${t.errorType}`),k.reportCustomEvent("pdf_get_error",{type:t.errorType,pdfUrl:t.fileName})}const{isPageTranslated:A2,translatePage:_2,showOriginPage:C2,setTranslatePageStyle:y2,setReportParams:La}=kn(),D2={[Ie.TRANSLATE_PAGE]:t=>{const{contentScriptRefreshUserInfo:e}=Tt(),{userSettings:n}=Xe();if((t==null?void 0:t.scene)===jt.CONTEXT_MENU?(e().then(()=>{nt(Ie.UPDATE_CONTEXT_MENU_BY_TARGET_LANGUAGE,n.value.targetLanguage)}),La("plugin_rightclickmenu_translate_website","plugin_translate_website")):(t==null?void 0:t.scene)===jt.DROPDOWN?La("plugin_dropdown_translate_website","plugin_translate_website"):(t==null?void 0:t.scene)===jt.HOVER_BALL&&La("plugin_floatingball_translate_website","plugin_translate_website"),t!=null&&t.clickBtn||(t==null?void 0:t.scene)===jt.CONTEXT_MENU){const{checkDialogAndUpdateUsageInfo:r}=Yr();r()}_2(t.scene),(t==null?void 0:t.scene)===jt.CONTEXT_MENU&&k.reportClickEvent("Other","plugin_rightclickmenu_translate_website")},[Ie.SET_TRANSLATE_PAGE_STYLE]:t=>{y2(t.displayMode,t.theme)},[Ie.CAPTURE_PAGE]:()=>{m2()},[Ie.STOP_CAPTURE_PAGE]:()=>{v2()},[Ie.SHOW_ORIGIN]:t=>{C2(),(t==null?void 0:t.scene)==="contextMenu"&&k.reportClickEvent("Other","plugin_rightclickmenu_show_original")},[Ie.CHECK_PAGE_TRANSLATED]:(t,e,n)=>{n({isTranslated:A2.value})},[Ie.NOTIFY_CONTENT_SETTING_CHANGE]:t=>{const{setUserSettings:e}=Xe();e(t),location.host===fe.webHost&&window.postMessage({type:"settingSync",source:"extension",data:t},window.location.origin)},[Ie.NOTIFY_IFRAME_SETTING_CHANGE]:t=>{const{setUserSettings:e}=Xe();e(t)},[Ie.NOTIFY_CONTENT_LOGIN_STATE]:t=>{const{setUserInfo:e}=Tt();e(t)},[Ie.CHAT_COMPLETIONS_RESPONSE]:t=>{var c;const{addExplainImproveWriteText:e,setExplainImproveWriteError:n,explainDone:r,improveWriteDone:a,getCurrentRequestId:s}=mr(),{userInfo:o}=Tt(),{requestId:u,translateType:l}=t;if(t.result){if(Ea({done:!1,requestId:u}),u!==s(l))return;e(l,t.result)}if(t.done){if(Ea({done:!0,code:ke.SUCCESS,requestId:u}),u!==s(l))return;l===q.EXPLAIN?r.value=!0:a.value=!0}if(t.response){if(Ea({done:!0,code:(c=t.response)==null?void 0:c.code,requestId:u}),u!==s(l))return;if(n(l,!0,t.response.code||ke.UNKNOWN_ERROR),t.response.code===ke.NOT_LOGIN){o.value=void 0;const f=encodeURIComponent(`${fe.pluginDescPage}?from=extensionLogin`);qe(`${fe.loginUrl}?feature=${t.reportParams.feature}&position=${t.reportParams.position}&cb=${f}`)}t.response.code===ke.PRIVILEGE_INSUFFICIENT&&qe(`${fe.priceUrl}?source=${t.reportParams.feature}`)}},[Ie.CONTEXT_MENU_TOGGLE_SELECT_TRANSLATE]:t=>{const{contentScriptRefreshUserInfo:e}=Tt();e().then(()=>{const{notifyUserSettings:n,getSettingByKey:r}=Xe(),a=r("inTextTranslation");a.enable=t,n({inTextTranslation:a}),k.reportClickEvent("Other",t?"plugin_rightclickmenu_enable_select_to_translate":"plugin_rightclickmenu_disable_select_to_translate")})},[Ie.CHANGE_TRANSLATE_OPTIONS]:t=>{const{changeTranslateOptions:e}=kn();e(t)},[Ie.CLOSE_HOVER_BALL_ONBOARDING]:()=>{const{onBoardingShow:t}=_o();t.value=!1},[Ie.NOTIFY_NO_LOGIN_LOCALE_CHANGE]:t=>{const{userInfo:e}=Tt();e.value||Ia(t)},[Ie.CURRENT_ACTIVE_WINDOW]:t=>{const{currentWindowId:e,isWindowActive:n}=Xa();t===e.value?n.value=!0:n.value=!1},[Ie.GET_PAGE_TRANSLATE_TARGET_LANGUAGE]:(t,e,n)=>{const{userSettings:r}=Xe();n(r.value.targetLanguage)},[Ie.PDF_FILE_CHUNK]:t=>{b2(t)},[Ie.PDF_FILE_CHUNK_DONE]:t=>{T2(t)},[Ie.PDF_FILE_GET_ERROR]:t=>{w2(t)},[Ie.NOTIFY_CONTENT_USER_INFO_REFRESH]:t=>{const{setUserInfo:e}=Tt();e(t)}};function S2(){chrome.runtime.onMessage.addListener((t,e,n)=>{const r=D2[t.type];if(r)return r(t.data,e,n)})}const ta=["translate","translator","","traduction","traduire","bersetzen","bersetzer","traducir","traductor","traduccin","","","","","","","","","terjemahan","penerjemah","menerjemahkan","tradurre","traduttore","traduzione","","","","","terjemah","penterjemah","tumaczy","tumacz","traduzir","tradutor","traduo","","","","","","eviri","evirmen","","","dch","bin dch","phin dch","",""],x2=/([\u4e00-\u9fa5a-zA-Z]+)\s*\s*([\u4e00-\u9fa5a-zA-Z]+)/,L2=["image","scan","picture","photo","screenshot","jpg","jpeg","png","screencap","screengrab","scanned","","","","","","","","","","image","numriser","image numrise","photo","capture d'cran","numrisation","Bild","Scan","gescannt","Foto","Screenshot","Bildschirmfoto","Bilddatei","imagen","escanear","imagen escaneada","foto","captura de pantalla","archivo escaneado","","",""," ","  ","  ",""," ","  "," ","  ","",""," "," "," ","","","","","   ","   ","gambar","pindai","foto","tangkapan layar","file yang dipindai","gambar yang dipindai","immagine","scansione","foto","screenshot","file scansionato","immagine scansionata","","","","","","","","","",""," "," ","imej","imbas","gambar","tangkapan skrin","fail yang diimbas","imej yang diimbas","obraz","skan","zdjcie","zrzut ekranu","zeskanowany plik","zeskanowany obraz","imagem","digitalizar","foto","captura de tela","arquivo digitalizado","imagem digitalizada","","","",""," "," ","","","","","","","resim","tarama","fotoraf","ekran grnts","taranan dosya","taranan resim","","",""," ","  ","  ","hnh nh","qut","nh","nh chp mn hnh","tp  qut","hnh nh  qut","","","","","",""],R2={PDF:["pdf","scanned file","image","",""," ","","","  ","imagen","archivo escaneado","image scanne","fichier scann","gescannt","Bild","scansione","immagine","","","","","imej","fail diimbas","obraz","zeskanowany","imagem","arquivo digitalizado","","","","","taranan dosya","resim","  ","","nh","tp  qut","",""],PPT:["ppt","presentation","powerpoint","pptx","dps","dpt","pps","pot","ppsx","potm","","","",""," ","presentacin","diapositiva","prsentation","diaporama","prsentation","presentazione","presentazione powerpoint","","","","","pembentangan","prezentacja","apresentao","","","","sunum","","","bi thuyt trnh","",""],XLS:["xls","csv","excel","sheets","xlsx","et","ett","xlsm","xltx","xltm","xlsb","xlam","xla","","",""," ",""," ","hoja de clculo","feuille de calcul","tabelle","","","","","lembaran","arkusz","planilha","","","excel","","","bng tnh"],File:["","","","","","","","documento","archivo","document","fichier","dokument","datei","documento","file","","","","","dokumen","fail","dokument","plik","","","","","belge","dosya","","","ti liu","tp tin","",""],DOC:["doc","word","docx","docs","wps","wpt","dot","dotx","docm","dotm","rtf"]},I2=["","Chinesisch","Chinese","Chino","","Chinois","","","Bahasa","Cinese","","","","Cina","Chiski","Chins","","","ince","Ting","","","","","",""],B2=[" "," ","Chinesisch traditionell","traditionell Chinesisch","Chinese Traditional","Traditional Chinese","Chino tradicional","tradicional Chino"," "," ","Chinois traditionnel","traditionnel Chinois"," "," "," "," ","Bahasa Mandarin Tradisional","Tradisional Mandarin Bahasa","Cinese tradizionale","tradizionale Cinese",""," ",""," "," ","Cina Tradisional","Tradisional Cina","Chiski tradycyjny","tradycyjny Chiski","Chins tradicional","tradicional Chins","  ","  "," "," ","ince Geleneksel","Geleneksel ince"," "," ","Ting Trung phn th","phn th Ting Trung","","","","",""];function Qn(t,e){const n=t.toLowerCase();for(const r of e)if(n.includes(r.toLowerCase()))return r.toLowerCase();return null}function N2(t,e){const n=t.toLowerCase();let r=-1;for(const a of e){const s=n.indexOf(a.toLowerCase());s!==-1&&(r===-1||s<r)&&(r=s)}return r}function k2(t){const e=Qn(t,ta);if(!e)return null;const n=Qn(t,L2);if(!n)return null;const r=gi(t);if(r===null)return{type:"Image",keyword:`${e}|${n}`};{const{to:a}=r;return{type:"Image",keyword:`${e}|${n}|${a}`,to:a}}}function pi(t){const e=Qn(t,ta);if(!e)return null;const n=t.toLowerCase();for(const[r,a]of Object.entries(R2))for(const s of a)if(n.includes(s.toLowerCase())){const o=`${e}|${s}`;return{type:r,keyword:o}}return{type:"File",keyword:""}}function F2(t){return t.replace(/[\(\][^)\]*[\)\]/g,"")}function gi(t){const e=new Map;let n=t;const r=Qn(n,B2);r&&(e.set("zh-TW",r),n=n.replace(r,""));const a=Qn(n,I2);a&&(e.set("zh-CN",a),n=n.replace(a,""));for(const s of Object.keys(Ra)){const o=Ra[s].language;for(const[u,l]of Object.entries(o)){if(e.has(u))continue;let c=F2(l).toLowerCase().trim();if(n.includes(c)){e.set(u,c);continue}if(c=c.replace(/$/,"").replace(/$/,""),n.includes(c)){e.set(u,c);continue}if(c=c.length>6?c.slice(0,-2):c,n.includes(c)){e.set(u,c);continue}}}if(Me.info("",Array.from(e)),e.size===0)return null;if(e.size===1){const s=e.values().next().value,o=e.keys().next().value,u=t.indexOf(s);let l=N2(t,ta);return x2.test(t)&&(l=t.indexOf("")),u<l?null:{to:o}}if(e.size>1){const o=Array.from(e.entries()).map(([u,l])=>({key:u,index:t.indexOf(l)})).filter(u=>u.index!==-1).sort((u,l)=>u.index-l.index);if(o.length>=2)return Me.info("",{from:o[0].key,to:o[1].key},""),{from:o[0].key,to:o[1].key}}return null}function fi(t){const e=/([\u4e00-\u9fa5a-zA-Z]+)\s*\s*([\u4e00-\u9fa5a-zA-Z]+)/;let n=Qn(t,ta);if(e.test(t)&&(n=""),!n)return null;t=t.toLocaleLowerCase().replace(/\+/g," ");const r=gi(t);if(r===null)return null;const{from:a,to:s}=r;if(!a&&s){const o=`${n}|${s}`;return{to:s,keyword:o}}if(a&&s){const o=`${n}|${a}|${s}`;return{from:a,to:s,keyword:o}}return null}const us=[{name:"google",pattern:/^(https?:\/\/)?(www\.)?google\.[a-z.]+\/search.*?[?&]q=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("center_col")),addMethod:(t,e)=>{if(e.getBoundingClientRect().width>750)return;let n=document.getElementById("rhs");if(!n){n=document.createElement("div"),n.id="rhs",n.style.display="block",n.style.width="fit-content";const r=e.parentElement;r==null||r.appendChild(n)}n.insertBefore(t,n.firstChild)}},{name:"bing",pattern:/^(https?:\/\/)?((www|cn)\.)?bing\.[a-z.]+\/search.*?[?&]q=([^&#]+)/i,getAnchorElement:()=>new Promise(t=>{setTimeout(()=>{t(document.getElementById("b_context"))},100)})},{name:"yahoo",pattern:/^(https?:\/\/)?([a-z]+\.)?search\.yahoo\.[a-z.]+\/search.*?[?&]p=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("right"))},{name:"duckduckgo",pattern:/^https?:\/\/(www\.)?duckduckgo\.com\/.*[?&]q=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.querySelector('[data-testid="sidebar"]'))},{name:"yandex",pattern:/^(https?:\/\/)?(www\.)?yandex\.[a-z.]+\/search\/?\?(?:.*?&)?text=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("search-result-aside"))}];function hi(t){for(const e of us){const n=t.match(e.pattern);if(n){const r=decodeURIComponent(n[n.length-1]||"");return{name:e.name,query:r}}}return null}const O2={style:{width:"336px","margin-bottom":"10px","margin-top":"10px",background:"rgba(255, 255, 255, 1)","border-radius":"16px",padding:"20px",border:"1px solid rgba(13, 13, 13, 0.12)",position:"relative","user-select":"none"}},M2={style:{display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"12px"}},P2=["src"],$2={style:{"font-weight":"600","font-size":"14px",color:"rgba(0, 0, 0, 0.9)"}},U2={style:{"font-size":"14px","font-weight":"400",color:"rgba(0, 0, 0, 0.9)","margin-bottom":"16px","line-height":"1.5"}},q2=["accept"],H2=Pe({__name:"index",setup(t){const{t:e}=pt(),n={TEXT:"text",FILE:"file",IMAGE:"image"};let r="",a="plugin_search_enginee_translate_file_card",s="",o="",u="";const l=D(null),c=D(n.FILE),f=D(""),w=D(""),T=se(()=>({[n.TEXT]:"plugin_search_engine_translate_text_card_translate",[n.IMAGE]:"plugin_search_engine_translate_image_card_translate",[n.FILE]:"plugin_search_engine_translate_file_card_translate"})[c.value]),A=()=>chrome.runtime.getURL("public/logo/icon-128.png"),x=i=>{k.reportClickEvent(a,i)},I=()=>{x("settings"),qe(`${fe.userCenterPage}?position=${T.value}&source=plugin`)},L=()=>{c.value===n.TEXT?qe(`${fe.textTranslatePage}?position=${T.value}`):c.value===n.IMAGE?qe(`${fe.imagePage}?position=${T.value}`):qe(`${fe.fileTranslatePage}?position=${T.value}`)},E=i=>i.replace(/\s/g,"-"),_=()=>{var i,h,g;if(c.value===n.TEXT){const G=((i=Zt(fe.defaultLanguage))==null?void 0:i.label)||"English",H=E(((h=Zt(o))==null?void 0:h.label)||G),te=E(((g=Zt(s))==null?void 0:g.label)||G);qe(`${fe.textTranslatePage}/${H}-to-${te}?position=${T.value}`),x("translate_now")}else if(c.value===n.IMAGE){const G=new URL(fe.imagePage);u&&G.searchParams.set("target_language",u),qe(`${G.href}?position=${T.value}`),x("translate_now")}else{if(x("select_file"),!l.value)return;l.value.value="",l.value.click()}},p=i=>{var te;const h=(te=i.target.files)==null?void 0:te[0];if(!h)return;if(h.size>nu){qe(`${fe.fileTranslateRedirectPage}?file_load_error=OUT_OF_PLUGIN_PROXY_FILE_LIMIT&position=${T.value}`);return}const g=new Blob([h],{type:h.type}),G=URL.createObjectURL(g),H=new URL(fe.fileTranslateRedirectPage);H.searchParams.set("pdf_url",encodeURIComponent(G)),H.searchParams.set("file_name",encodeURIComponent(h.name)),H.searchParams.set("position",T.value),qe(H.href)};return Wa(()=>{var B;const i=hi(location.href);if(!i)return;const h=((B=Zt(navigator.language))==null?void 0:B.value)||fe.defaultLanguage,g=Eo(h).value;r=i.query;const G=k2(r),H=fi(r),te=pi(r);w.value=e("common.selectFile",{},{locale:g});const ue=(te==null?void 0:te.type)||"File",X=ue==="File"?e("common.files",{},{locale:g}):ue,Ee=e("searchEngineInsert.free",{},{locale:g});if(f.value=e("searchEngineInsert.accurateTranslate",[X,Ee],{locale:g}),G){c.value=n.IMAGE,w.value=e("searchEngineInsert.translateNow");const{to:N}=G;u=N||"",f.value=e("searchEngineInsert.imageTranslate")}else if(H){c.value=n.TEXT,w.value=e("searchEngineInsert.translateNow");const{from:N,to:P}=H,W=e(`language.${P}`,{},{locale:g});if(s=P,o=N||fe.defaultLanguage,N){const j=e(`language.${N}`,{},{locale:g});f.value=e("searchEngineInsert.translateFromTo",[j,W],{locale:g})}else f.value=e("searchEngineInsert.translateTo",[W],{locale:g})}a={[n.TEXT]:"plugin_search_enginee_translate_text_card",[n.FILE]:"plugin_search_enginee_translate_file_card",[n.IMAGE]:"plugin_search_enginee_translate_image_card"}[c.value],k.reportShowEvent(a)}),(i,h)=>(F(),re("div",O2,[y("div",M2,[y("div",{onClick:L,style:{display:"flex",cursor:"pointer","align-items":"center",gap:"8px"}},[y("img",{src:A(),style:{width:"20px",height:"20px"}},null,8,P2),y("div",$2,pe(i.$t("common.title")),1)]),oe(Ut,{onClick:I,icon:"setting",size:28,style:{"margin-right":"-4px","margin-top":"-4px"}})]),y("div",U2,pe(f.value),1),y("button",{onClick:_,style:{display:"block",width:"100%",background:"rgba(237, 242, 255, 1)",border:"none","border-radius":"8px",padding:"12px",color:"rgba(41, 98, 255, 1)","font-weight":"600","font-size":"14px",cursor:"pointer"}},pe(w.value),1),y("input",{ref_key:"fileInput",ref:l,style:{display:"none"},type:"file",accept:z(tu),onChange:p},null,40,q2)]))}}),G2="wps-translate-search-enhance";let Un=null;async function V2(t){var a;let e=0;const n=4,r=100;for(;e<n;){const s=await((a=us.find(o=>o.name===t))==null?void 0:a.getAnchorElement())||null;if(s)return s;await new Promise(o=>setTimeout(o,r)),e++}return null}async function W2(t,e){const n=await V2(t);if(!n)return;const r=us.find(a=>a.name===t);r&&(r.addMethod?r.addMethod(e,n):n.insertBefore(e,n.firstChild))}function z2(){if(Wr())return;const t=hi(location.href);if(!t)return;const e=t.query;if(!fi(e)&&!pi(e))return;const n=t.name;Un=Xn(G2,H2),W2(n,Un),jr({name:Xr.INJECTION,onDisconnect:()=>{Un==null||Un.remove(),Un=null}})}const mi=["www.toolsmart.ai","test.toolsmart.ai"];function j2(){mi.includes(window.location.hostname)&&sessionStorage.setItem("anydoc_plugin_install_flag","true")}function X2(){mi.includes(window.location.hostname)&&sessionStorage.removeItem("anydoc_plugin_install_flag")}const Y2=mo,eo="__wps-translate-entry-init-timestamp__";async function vi(){const t=await Ge(de.TRANSLATE_TEXT);t&&window.postMessage({type:"translateText",source:"extension",data:{text:t}},window.location.origin)}async function Ei(){const t=await Ge(de.ON_BOARDING_TIME,Date.now());window.postMessage({type:"ping",source:"extension",data:{installTimestamp:t}},window.location.origin)}async function bi(){const t=await Ge(de.CONFIGS);window.postMessage({type:"extensionSetting",source:"extension",data:t},window.location.origin)}function K2(){location.host===fe.webHost&&window.addEventListener("message",async t=>{t.source===window&&t.origin===window.location.origin&&t.data.source==="page"&&(Me.warn(`receive ${t.data.type} from web`),t.data.type==="ping"&&Ei(),t.data.type==="getTranslateText"&&vi(),t.data.type==="clearTranslateText"&&jn(de.TRANSLATE_TEXT),t.data.type==="getExtensionSetting"&&bi(),t.data.type==="getPdfContent"&&E2(t.data.data))})}async function Q2(){location.host===fe.webHost&&(vi(),Ei(),bi())}function J2(){const t=Zr(location.href);if(t!=null&&t.name&&![Ur.YOUTUBE].includes(t.name)||document.getElementById("anydoc-subtitle-inject"))return;const e=document.createElement("script");e.id="anydoc-subtitle-inject",e.src=chrome.runtime.getURL("public/subtitle/script/inject.js"),e.onload=()=>{},e.onerror=()=>{},document.head.appendChild(e)}function Z2(){const t=+new Date;window[eo]=t;let e=!0,n=Xn(Y2,s2);document.documentElement.appendChild(n);const r=new MutationObserver(a=>{if(window[eo]!==t||!e){r.disconnect();return}a.forEach(s=>{s.type==="childList"&&!document.documentElement.contains(n)&&document.documentElement.appendChild(n)})});r.observe(document.documentElement,{childList:!0,subtree:!0}),jr({name:Xr.INJECTION,onDisconnect:()=>{e=!1,r.disconnect(),n.remove(),n=null,X2()}}),S2(),K2(),J2(),z2(),Q2(),j2()}Z2();
